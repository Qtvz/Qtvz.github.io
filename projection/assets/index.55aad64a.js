var Nh=Object.defineProperty;var Uh=(e,t,n)=>t in e?Nh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var mt=(e,t,n)=>(Uh(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ic(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Bh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zh=ic(Bh);function gl(e){return!!e||e===""}function ac(e){if(De(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=pt(r)?kh(r):ac(r);if(i)for(const a in i)t[a]=i[a]}return t}else{if(pt(e))return e;if(rt(e))return e}}const Gh=/;(?![^(]*\))/g,Hh=/:(.+)/;function kh(e){const t={};return e.split(Gh).forEach(n=>{if(n){const r=n.split(Hh);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function sc(e){let t="";if(pt(e))t=e;else if(De(e))for(let n=0;n<e.length;n++){const r=sc(e[n]);r&&(t+=r+" ")}else if(rt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ye={},mr=[],Yt=()=>{},Vh=()=>!1,Wh=/^on[^a-z]/,xs=e=>Wh.test(e),oc=e=>e.startsWith("onUpdate:"),dt=Object.assign,cc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Xh=Object.prototype.hasOwnProperty,ke=(e,t)=>Xh.call(e,t),De=Array.isArray,ni=e=>_s(e)==="[object Map]",jh=e=>_s(e)==="[object Set]",Ne=e=>typeof e=="function",pt=e=>typeof e=="string",uc=e=>typeof e=="symbol",rt=e=>e!==null&&typeof e=="object",yl=e=>rt(e)&&Ne(e.then)&&Ne(e.catch),Yh=Object.prototype.toString,_s=e=>Yh.call(e),qh=e=>_s(e).slice(8,-1),Zh=e=>_s(e)==="[object Object]",lc=e=>pt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ga=ic(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Jh=/-(\w)/g,nn=bs(e=>e.replace(Jh,(t,n)=>n?n.toUpperCase():"")),Kh=/\B([A-Z])/g,Vr=bs(e=>e.replace(Kh,"-$1").toLowerCase()),ws=bs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Us=bs(e=>e?`on${ws(e)}`:""),fi=(e,t)=>!Object.is(e,t),Bs=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ea=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Qh=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Zc;const $h=()=>Zc||(Zc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Kt;class ed{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Kt&&(this.parent=Kt,this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Kt;try{return Kt=this,t()}finally{Kt=n}}}on(){Kt=this}off(){Kt=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function td(e,t=Kt){t&&t.active&&t.effects.push(e)}const fc=e=>{const t=new Set(e);return t.w=0,t.n=0,t},xl=e=>(e.w&Un)>0,_l=e=>(e.n&Un)>0,nd=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Un},rd=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];xl(i)&&!_l(i)?i.delete(e):t[n++]=i,i.w&=~Un,i.n&=~Un}t.length=n}},eo=new WeakMap;let ei=0,Un=1;const to=30;let Vt;const Kn=Symbol(""),no=Symbol("");class hc{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,td(this,r)}run(){if(!this.active)return this.fn();let t=Vt,n=On;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Vt,Vt=this,On=!0,Un=1<<++ei,ei<=to?nd(this):Jc(this),this.fn()}finally{ei<=to&&rd(this),Un=1<<--ei,Vt=this.parent,On=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Vt===this?this.deferStop=!0:this.active&&(Jc(this),this.onStop&&this.onStop(),this.active=!1)}}function Jc(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let On=!0;const bl=[];function Wr(){bl.push(On),On=!1}function Xr(){const e=bl.pop();On=e===void 0?!0:e}function At(e,t,n){if(On&&Vt){let r=eo.get(e);r||eo.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=fc()),wl(i)}}function wl(e,t){let n=!1;ei<=to?_l(e)||(e.n|=Un,n=!xl(e)):n=!e.has(Vt),n&&(e.add(Vt),Vt.deps.push(e))}function vn(e,t,n,r,i,a){const s=eo.get(e);if(!s)return;let o=[];if(t==="clear")o=[...s.values()];else if(n==="length"&&De(e))s.forEach((c,u)=>{(u==="length"||u>=r)&&o.push(c)});else switch(n!==void 0&&o.push(s.get(n)),t){case"add":De(e)?lc(n)&&o.push(s.get("length")):(o.push(s.get(Kn)),ni(e)&&o.push(s.get(no)));break;case"delete":De(e)||(o.push(s.get(Kn)),ni(e)&&o.push(s.get(no)));break;case"set":ni(e)&&o.push(s.get(Kn));break}if(o.length===1)o[0]&&ro(o[0]);else{const c=[];for(const u of o)u&&c.push(...u);ro(fc(c))}}function ro(e,t){const n=De(e)?e:[...e];for(const r of n)r.computed&&Kc(r);for(const r of n)r.computed||Kc(r)}function Kc(e,t){(e!==Vt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const id=ic("__proto__,__v_isRef,__isVue"),Ml=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(uc)),ad=dc(),sd=dc(!1,!0),od=dc(!0),Qc=cd();function cd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ve(this);for(let a=0,s=this.length;a<s;a++)At(r,"get",a+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Ve)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Wr();const r=Ve(this)[t].apply(this,n);return Xr(),r}}),e}function dc(e=!1,t=!1){return function(r,i,a){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&a===(e?t?Ed:Rl:t?Al:Sl).get(r))return r;const s=De(r);if(!e&&s&&ke(Qc,i))return Reflect.get(Qc,i,a);const o=Reflect.get(r,i,a);return(uc(i)?Ml.has(i):id(i))||(e||At(r,"get",i),t)?o:ht(o)?s&&lc(i)?o:o.value:rt(o)?e?Pl(o):aa(o):o}}const ud=El(),ld=El(!0);function El(e=!1){return function(n,r,i,a){let s=n[r];if(br(s)&&ht(s)&&!ht(i))return!1;if(!e&&(!Ta(i)&&!br(i)&&(s=Ve(s),i=Ve(i)),!De(n)&&ht(s)&&!ht(i)))return s.value=i,!0;const o=De(n)&&lc(r)?Number(r)<n.length:ke(n,r),c=Reflect.set(n,r,i,a);return n===Ve(a)&&(o?fi(i,s)&&vn(n,"set",r,i):vn(n,"add",r,i)),c}}function fd(e,t){const n=ke(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&vn(e,"delete",t,void 0),r}function hd(e,t){const n=Reflect.has(e,t);return(!uc(t)||!Ml.has(t))&&At(e,"has",t),n}function dd(e){return At(e,"iterate",De(e)?"length":Kn),Reflect.ownKeys(e)}const Tl={get:ad,set:ud,deleteProperty:fd,has:hd,ownKeys:dd},pd={get:od,set(e,t){return!0},deleteProperty(e,t){return!0}},vd=dt({},Tl,{get:sd,set:ld}),pc=e=>e,Ms=e=>Reflect.getPrototypeOf(e);function ua(e,t,n=!1,r=!1){e=e.__v_raw;const i=Ve(e),a=Ve(t);n||(t!==a&&At(i,"get",t),At(i,"get",a));const{has:s}=Ms(i),o=r?pc:n?gc:hi;if(s.call(i,t))return o(e.get(t));if(s.call(i,a))return o(e.get(a));e!==i&&e.get(t)}function la(e,t=!1){const n=this.__v_raw,r=Ve(n),i=Ve(e);return t||(e!==i&&At(r,"has",e),At(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function fa(e,t=!1){return e=e.__v_raw,!t&&At(Ve(e),"iterate",Kn),Reflect.get(e,"size",e)}function $c(e){e=Ve(e);const t=Ve(this);return Ms(t).has.call(t,e)||(t.add(e),vn(t,"add",e,e)),this}function eu(e,t){t=Ve(t);const n=Ve(this),{has:r,get:i}=Ms(n);let a=r.call(n,e);a||(e=Ve(e),a=r.call(n,e));const s=i.call(n,e);return n.set(e,t),a?fi(t,s)&&vn(n,"set",e,t):vn(n,"add",e,t),this}function tu(e){const t=Ve(this),{has:n,get:r}=Ms(t);let i=n.call(t,e);i||(e=Ve(e),i=n.call(t,e)),r&&r.call(t,e);const a=t.delete(e);return i&&vn(t,"delete",e,void 0),a}function nu(){const e=Ve(this),t=e.size!==0,n=e.clear();return t&&vn(e,"clear",void 0,void 0),n}function ha(e,t){return function(r,i){const a=this,s=a.__v_raw,o=Ve(s),c=t?pc:e?gc:hi;return!e&&At(o,"iterate",Kn),s.forEach((u,l)=>r.call(i,c(u),c(l),a))}}function da(e,t,n){return function(...r){const i=this.__v_raw,a=Ve(i),s=ni(a),o=e==="entries"||e===Symbol.iterator&&s,c=e==="keys"&&s,u=i[e](...r),l=n?pc:t?gc:hi;return!t&&At(a,"iterate",c?no:Kn),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:o?[l(f[0]),l(f[1])]:l(f),done:h}},[Symbol.iterator](){return this}}}}function Tn(e){return function(...t){return e==="delete"?!1:this}}function md(){const e={get(a){return ua(this,a)},get size(){return fa(this)},has:la,add:$c,set:eu,delete:tu,clear:nu,forEach:ha(!1,!1)},t={get(a){return ua(this,a,!1,!0)},get size(){return fa(this)},has:la,add:$c,set:eu,delete:tu,clear:nu,forEach:ha(!1,!0)},n={get(a){return ua(this,a,!0)},get size(){return fa(this,!0)},has(a){return la.call(this,a,!0)},add:Tn("add"),set:Tn("set"),delete:Tn("delete"),clear:Tn("clear"),forEach:ha(!0,!1)},r={get(a){return ua(this,a,!0,!0)},get size(){return fa(this,!0)},has(a){return la.call(this,a,!0)},add:Tn("add"),set:Tn("set"),delete:Tn("delete"),clear:Tn("clear"),forEach:ha(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=da(a,!1,!1),n[a]=da(a,!0,!1),t[a]=da(a,!1,!0),r[a]=da(a,!0,!0)}),[e,n,t,r]}const[gd,yd,xd,_d]=md();function vc(e,t){const n=t?e?_d:xd:e?yd:gd;return(r,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(ke(n,i)&&i in r?n:r,i,a)}const bd={get:vc(!1,!1)},wd={get:vc(!1,!0)},Md={get:vc(!0,!1)},Sl=new WeakMap,Al=new WeakMap,Rl=new WeakMap,Ed=new WeakMap;function Td(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sd(e){return e.__v_skip||!Object.isExtensible(e)?0:Td(qh(e))}function aa(e){return br(e)?e:mc(e,!1,Tl,bd,Sl)}function Ad(e){return mc(e,!1,vd,wd,Al)}function Pl(e){return mc(e,!0,pd,Md,Rl)}function mc(e,t,n,r,i){if(!rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const s=Sd(e);if(s===0)return e;const o=new Proxy(e,s===2?r:n);return i.set(e,o),o}function gr(e){return br(e)?gr(e.__v_raw):!!(e&&e.__v_isReactive)}function br(e){return!!(e&&e.__v_isReadonly)}function Ta(e){return!!(e&&e.__v_isShallow)}function Ll(e){return gr(e)||br(e)}function Ve(e){const t=e&&e.__v_raw;return t?Ve(t):e}function Cl(e){return Ea(e,"__v_skip",!0),e}const hi=e=>rt(e)?aa(e):e,gc=e=>rt(e)?Pl(e):e;function Il(e){On&&Vt&&(e=Ve(e),wl(e.dep||(e.dep=fc())))}function Ol(e,t){e=Ve(e),e.dep&&ro(e.dep)}function ht(e){return!!(e&&e.__v_isRef===!0)}function Dl(e){return Fl(e,!1)}function Rd(e){return Fl(e,!0)}function Fl(e,t){return ht(e)?e:new Pd(e,t)}class Pd{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ve(t),this._value=n?t:hi(t)}get value(){return Il(this),this._value}set value(t){const n=this.__v_isShallow||Ta(t)||br(t);t=n?t:Ve(t),fi(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:hi(t),Ol(this))}}function ri(e){return ht(e)?e.value:e}const Ld={get:(e,t,n)=>ri(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return ht(i)&&!ht(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Nl(e){return gr(e)?e:new Proxy(e,Ld)}var Ul;class Cd{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Ul]=!1,this._dirty=!0,this.effect=new hc(t,()=>{this._dirty||(this._dirty=!0,Ol(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Ve(this);return Il(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Ul="__v_isReadonly";function Id(e,t,n=!1){let r,i;const a=Ne(e);return a?(r=e,i=Yt):(r=e.get,i=e.set),new Cd(r,i,a||!i,n)}function Dn(e,t,n,r){let i;try{i=r?e(...r):e()}catch(a){Es(a,t,n)}return i}function Bt(e,t,n,r){if(Ne(e)){const a=Dn(e,t,n,r);return a&&yl(a)&&a.catch(s=>{Es(s,t,n)}),a}const i=[];for(let a=0;a<e.length;a++)i.push(Bt(e[a],t,n,r));return i}function Es(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const s=t.proxy,o=n;for(;a;){const u=a.ec;if(u){for(let l=0;l<u.length;l++)if(u[l](e,s,o)===!1)return}a=a.parent}const c=t.appContext.config.errorHandler;if(c){Dn(c,null,10,[e,s,o]);return}}Od(e,n,i,r)}function Od(e,t,n,r=!0){console.error(e)}let di=!1,io=!1;const ft=[];let $t=0;const yr=[];let dn=null,Yn=0;const Bl=Promise.resolve();let yc=null;function zl(e){const t=yc||Bl;return e?t.then(this?e.bind(this):e):t}function Dd(e){let t=$t+1,n=ft.length;for(;t<n;){const r=t+n>>>1;pi(ft[r])<e?t=r+1:n=r}return t}function xc(e){(!ft.length||!ft.includes(e,di&&e.allowRecurse?$t+1:$t))&&(e.id==null?ft.push(e):ft.splice(Dd(e.id),0,e),Gl())}function Gl(){!di&&!io&&(io=!0,yc=Bl.then(kl))}function Fd(e){const t=ft.indexOf(e);t>$t&&ft.splice(t,1)}function Nd(e){De(e)?yr.push(...e):(!dn||!dn.includes(e,e.allowRecurse?Yn+1:Yn))&&yr.push(e),Gl()}function ru(e,t=di?$t+1:0){for(;t<ft.length;t++){const n=ft[t];n&&n.pre&&(ft.splice(t,1),t--,n())}}function Hl(e){if(yr.length){const t=[...new Set(yr)];if(yr.length=0,dn){dn.push(...t);return}for(dn=t,dn.sort((n,r)=>pi(n)-pi(r)),Yn=0;Yn<dn.length;Yn++)dn[Yn]();dn=null,Yn=0}}const pi=e=>e.id==null?1/0:e.id,Ud=(e,t)=>{const n=pi(e)-pi(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function kl(e){io=!1,di=!0,ft.sort(Ud);const t=Yt;try{for($t=0;$t<ft.length;$t++){const n=ft[$t];n&&n.active!==!1&&Dn(n,null,14)}}finally{$t=0,ft.length=0,Hl(),di=!1,yc=null,(ft.length||yr.length)&&kl()}}function Bd(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ye;let i=n;const a=t.startsWith("update:"),s=a&&t.slice(7);if(s&&s in r){const l=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=r[l]||Ye;h&&(i=n.map(d=>d.trim())),f&&(i=n.map(Qh))}let o,c=r[o=Us(t)]||r[o=Us(nn(t))];!c&&a&&(c=r[o=Us(Vr(t))]),c&&Bt(c,e,6,i);const u=r[o+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Bt(u,e,6,i)}}function Vl(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const a=e.emits;let s={},o=!1;if(!Ne(e)){const c=u=>{const l=Vl(u,t,!0);l&&(o=!0,dt(s,l))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!a&&!o?(rt(e)&&r.set(e,null),null):(De(a)?a.forEach(c=>s[c]=null):dt(s,a),rt(e)&&r.set(e,s),s)}function Ts(e,t){return!e||!xs(t)?!1:(t=t.slice(2).replace(/Once$/,""),ke(e,t[0].toLowerCase()+t.slice(1))||ke(e,Vr(t))||ke(e,t))}let Xt=null,Wl=null;function Sa(e){const t=Xt;return Xt=e,Wl=e&&e.type.__scopeId||null,t}function zd(e,t=Xt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&pu(-1);const a=Sa(t),s=e(...i);return Sa(a),r._d&&pu(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function zs(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:a,propsOptions:[s],slots:o,attrs:c,emit:u,render:l,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const y=Sa(e);try{if(n.shapeFlag&4){const x=i||r;g=Qt(l.call(x,x,f,a,d,h,p)),m=c}else{const x=t;g=Qt(x.length>1?x(a,{attrs:c,slots:o,emit:u}):x(a,null)),m=t.props?c:Gd(c)}}catch(x){ii.length=0,Es(x,e,1),g=wt(pn)}let _=g;if(m&&v!==!1){const x=Object.keys(m),{shapeFlag:E}=_;x.length&&E&7&&(s&&x.some(oc)&&(m=Hd(m,s)),_=Bn(_,m))}return n.dirs&&(_=Bn(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),g=_,Sa(y),g}const Gd=e=>{let t;for(const n in e)(n==="class"||n==="style"||xs(n))&&((t||(t={}))[n]=e[n]);return t},Hd=(e,t)=>{const n={};for(const r in e)(!oc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function kd(e,t,n){const{props:r,children:i,component:a}=e,{props:s,children:o,patchFlag:c}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?iu(r,s,u):!!s;if(c&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const h=l[f];if(s[h]!==r[h]&&!Ts(u,h))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===s?!1:r?s?iu(r,s,u):!0:!!s;return!1}function iu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(t[a]!==e[a]&&!Ts(n,a))return!0}return!1}function Vd({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Wd=e=>e.__isSuspense;function Xd(e,t){t&&t.pendingBranch?De(e)?t.effects.push(...e):t.effects.push(e):Nd(e)}function ya(e,t){if(ot){let n=ot.provides;const r=ot.parent&&ot.parent.provides;r===n&&(n=ot.provides=Object.create(r)),n[e]=t}}function Fn(e,t,n=!1){const r=ot||Xt;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ne(t)?t.call(r.proxy):t}}const au={};function xa(e,t,n){return Xl(e,t,n)}function Xl(e,t,{immediate:n,deep:r,flush:i,onTrack:a,onTrigger:s}=Ye){const o=ot;let c,u=!1,l=!1;if(ht(e)?(c=()=>e.value,u=Ta(e)):gr(e)?(c=()=>e,r=!0):De(e)?(l=!0,u=e.some(m=>gr(m)||Ta(m)),c=()=>e.map(m=>{if(ht(m))return m.value;if(gr(m))return pr(m);if(Ne(m))return Dn(m,o,2)})):Ne(e)?t?c=()=>Dn(e,o,2):c=()=>{if(!(o&&o.isUnmounted))return f&&f(),Bt(e,o,3,[h])}:c=Yt,t&&r){const m=c;c=()=>pr(m())}let f,h=m=>{f=g.onStop=()=>{Dn(m,o,4)}};if(mi)return h=Yt,t?n&&Bt(t,o,3,[c(),l?[]:void 0,h]):c(),Yt;let d=l?[]:au;const p=()=>{if(!!g.active)if(t){const m=g.run();(r||u||(l?m.some((y,_)=>fi(y,d[_])):fi(m,d)))&&(f&&f(),Bt(t,o,3,[m,d===au?void 0:d,h]),d=m)}else g.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>bt(p,o&&o.suspense):(p.pre=!0,o&&(p.id=o.uid),v=()=>xc(p));const g=new hc(c,v);return t?n?p():d=g.run():i==="post"?bt(g.run.bind(g),o&&o.suspense):g.run(),()=>{g.stop(),o&&o.scope&&cc(o.scope.effects,g)}}function jd(e,t,n){const r=this.proxy,i=pt(e)?e.includes(".")?jl(r,e):()=>r[e]:e.bind(r,r);let a;Ne(t)?a=t:(a=t.handler,n=t);const s=ot;wr(this);const o=Xl(i,a.bind(r),n);return s?wr(s):Qn(),o}function jl(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function pr(e,t){if(!rt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ht(e))pr(e.value,t);else if(De(e))for(let n=0;n<e.length;n++)pr(e[n],t);else if(jh(e)||ni(e))e.forEach(n=>{pr(n,t)});else if(Zh(e))for(const n in e)pr(e[n],t);return e}function Yd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _c(()=>{e.isMounted=!0}),Jl(()=>{e.isUnmounting=!0}),e}const Ft=[Function,Array],qd={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ft,onEnter:Ft,onAfterEnter:Ft,onEnterCancelled:Ft,onBeforeLeave:Ft,onLeave:Ft,onAfterLeave:Ft,onLeaveCancelled:Ft,onBeforeAppear:Ft,onAppear:Ft,onAfterAppear:Ft,onAppearCancelled:Ft},setup(e,{slots:t}){const n=Np(),r=Yd();let i;return()=>{const a=t.default&&ql(t.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const v of a)if(v.type!==pn){s=v;break}}const o=Ve(e),{mode:c}=o;if(r.isLeaving)return Gs(s);const u=su(s);if(!u)return Gs(s);const l=ao(u,o,r,n);so(u,l);const f=n.subTree,h=f&&su(f);let d=!1;const{getTransitionKey:p}=u.type;if(p){const v=p();i===void 0?i=v:v!==i&&(i=v,d=!0)}if(h&&h.type!==pn&&(!qn(u,h)||d)){const v=ao(h,o,r,n);if(so(h,v),c==="out-in")return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,n.update()},Gs(s);c==="in-out"&&u.type!==pn&&(v.delayLeave=(g,m,y)=>{const _=Yl(r,h);_[String(h.key)]=h,g._leaveCb=()=>{m(),g._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=y})}return s}}},Zd=qd;function Yl(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ao(e,t,n,r){const{appear:i,mode:a,persisted:s=!1,onBeforeEnter:o,onEnter:c,onAfterEnter:u,onEnterCancelled:l,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:v,onAppear:g,onAfterAppear:m,onAppearCancelled:y}=t,_=String(e.key),x=Yl(n,e),E=(C,R)=>{C&&Bt(C,r,9,R)},T=(C,R)=>{const F=R[1];E(C,R),De(C)?C.every(z=>z.length<=1)&&F():C.length<=1&&F()},S={mode:a,persisted:s,beforeEnter(C){let R=o;if(!n.isMounted)if(i)R=v||o;else return;C._leaveCb&&C._leaveCb(!0);const F=x[_];F&&qn(e,F)&&F.el._leaveCb&&F.el._leaveCb(),E(R,[C])},enter(C){let R=c,F=u,z=l;if(!n.isMounted)if(i)R=g||c,F=m||u,z=y||l;else return;let q=!1;const $=C._enterCb=te=>{q||(q=!0,te?E(z,[C]):E(F,[C]),S.delayedLeave&&S.delayedLeave(),C._enterCb=void 0)};R?T(R,[C,$]):$()},leave(C,R){const F=String(e.key);if(C._enterCb&&C._enterCb(!0),n.isUnmounting)return R();E(f,[C]);let z=!1;const q=C._leaveCb=$=>{z||(z=!0,R(),$?E(p,[C]):E(d,[C]),C._leaveCb=void 0,x[F]===e&&delete x[F])};x[F]=e,h?T(h,[C,q]):q()},clone(C){return ao(C,t,n,r)}};return S}function Gs(e){if(As(e))return e=Bn(e),e.children=null,e}function su(e){return As(e)?e.children?e.children[0]:void 0:e}function so(e,t){e.shapeFlag&6&&e.component?so(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ql(e,t=!1,n){let r=[],i=0;for(let a=0;a<e.length;a++){let s=e[a];const o=n==null?s.key:String(n)+String(s.key!=null?s.key:a);s.type===Ht?(s.patchFlag&128&&i++,r=r.concat(ql(s.children,t,o))):(t||s.type!==pn)&&r.push(o!=null?Bn(s,{key:o}):s)}if(i>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}function Ss(e){return Ne(e)?{setup:e,name:e.name}:e}const _a=e=>!!e.type.__asyncLoader,As=e=>e.type.__isKeepAlive;function Jd(e,t){Zl(e,"a",t)}function Kd(e,t){Zl(e,"da",t)}function Zl(e,t,n=ot){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Rs(t,r,n),n){let i=n.parent;for(;i&&i.parent;)As(i.parent.vnode)&&Qd(r,t,n,i),i=i.parent}}function Qd(e,t,n,r){const i=Rs(t,e,r,!0);Kl(()=>{cc(r[t],i)},n)}function Rs(e,t,n=ot,r=!1){if(n){const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;Wr(),wr(n);const o=Bt(t,n,e,s);return Qn(),Xr(),o});return r?i.unshift(a):i.push(a),a}}const _n=e=>(t,n=ot)=>(!mi||e==="sp")&&Rs(e,(...r)=>t(...r),n),$d=_n("bm"),_c=_n("m"),ep=_n("bu"),tp=_n("u"),Jl=_n("bum"),Kl=_n("um"),np=_n("sp"),rp=_n("rtg"),ip=_n("rtc");function ap(e,t=ot){Rs("ec",e,t)}function Wn(e,t,n,r){const i=e.dirs,a=t&&t.dirs;for(let s=0;s<i.length;s++){const o=i[s];a&&(o.oldValue=a[s].value);let c=o.dir[r];c&&(Wr(),Bt(c,n,8,[e.el,o,e,t]),Xr())}}const Ql="components";function sp(e,t){return cp(Ql,e,!0,t)||e}const op=Symbol();function cp(e,t,n=!0,r=!1){const i=Xt||ot;if(i){const a=i.type;if(e===Ql){const o=Hp(a,!1);if(o&&(o===t||o===nn(t)||o===ws(nn(t))))return a}const s=ou(i[e]||a[e],t)||ou(i.appContext[e],t);return!s&&r?a:s}}function ou(e,t){return e&&(e[t]||e[nn(t)]||e[ws(nn(t))])}const oo=e=>e?hf(e)?Sc(e)||e.proxy:oo(e.parent):null,Aa=dt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>oo(e.parent),$root:e=>oo(e.root),$emit:e=>e.emit,$options:e=>bc(e),$forceUpdate:e=>e.f||(e.f=()=>xc(e.update)),$nextTick:e=>e.n||(e.n=zl.bind(e.proxy)),$watch:e=>jd.bind(e)}),up={get({_:e},t){const{ctx:n,setupState:r,data:i,props:a,accessCache:s,type:o,appContext:c}=e;let u;if(t[0]!=="$"){const d=s[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(r!==Ye&&ke(r,t))return s[t]=1,r[t];if(i!==Ye&&ke(i,t))return s[t]=2,i[t];if((u=e.propsOptions[0])&&ke(u,t))return s[t]=3,a[t];if(n!==Ye&&ke(n,t))return s[t]=4,n[t];co&&(s[t]=0)}}const l=Aa[t];let f,h;if(l)return t==="$attrs"&&At(e,"get",t),l(e);if((f=o.__cssModules)&&(f=f[t]))return f;if(n!==Ye&&ke(n,t))return s[t]=4,n[t];if(h=c.config.globalProperties,ke(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:a}=e;return i!==Ye&&ke(i,t)?(i[t]=n,!0):r!==Ye&&ke(r,t)?(r[t]=n,!0):ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:a}},s){let o;return!!n[s]||e!==Ye&&ke(e,s)||t!==Ye&&ke(t,s)||(o=a[0])&&ke(o,s)||ke(r,s)||ke(Aa,s)||ke(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ke(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let co=!0;function lp(e){const t=bc(e),n=e.proxy,r=e.ctx;co=!1,t.beforeCreate&&cu(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:s,watch:o,provide:c,inject:u,created:l,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:y,destroyed:_,unmounted:x,render:E,renderTracked:T,renderTriggered:S,errorCaptured:C,serverPrefetch:R,expose:F,inheritAttrs:z,components:q,directives:$,filters:te}=t;if(u&&fp(u,r,null,e.appContext.config.unwrapInjectedRef),s)for(const H in s){const B=s[H];Ne(B)&&(r[H]=B.bind(n))}if(i){const H=i.call(n,n);rt(H)&&(e.data=aa(H))}if(co=!0,a)for(const H in a){const B=a[H],Q=Ne(B)?B.bind(n,n):Ne(B.get)?B.get.bind(n,n):Yt,J=!Ne(B)&&Ne(B.set)?B.set.bind(n):Yt,Z=en({get:Q,set:J});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>Z.value,set:ue=>Z.value=ue})}if(o)for(const H in o)$l(o[H],r,n,H);if(c){const H=Ne(c)?c.call(n):c;Reflect.ownKeys(H).forEach(B=>{ya(B,H[B])})}l&&cu(l,e,"c");function A(H,B){De(B)?B.forEach(Q=>H(Q.bind(n))):B&&H(B.bind(n))}if(A($d,f),A(_c,h),A(ep,d),A(tp,p),A(Jd,v),A(Kd,g),A(ap,C),A(ip,T),A(rp,S),A(Jl,y),A(Kl,x),A(np,R),De(F))if(F.length){const H=e.exposed||(e.exposed={});F.forEach(B=>{Object.defineProperty(H,B,{get:()=>n[B],set:Q=>n[B]=Q})})}else e.exposed||(e.exposed={});E&&e.render===Yt&&(e.render=E),z!=null&&(e.inheritAttrs=z),q&&(e.components=q),$&&(e.directives=$)}function fp(e,t,n=Yt,r=!1){De(e)&&(e=uo(e));for(const i in e){const a=e[i];let s;rt(a)?"default"in a?s=Fn(a.from||i,a.default,!0):s=Fn(a.from||i):s=Fn(a),ht(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function cu(e,t,n){Bt(De(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function $l(e,t,n,r){const i=r.includes(".")?jl(n,r):()=>n[r];if(pt(e)){const a=t[e];Ne(a)&&xa(i,a)}else if(Ne(e))xa(i,e.bind(n));else if(rt(e))if(De(e))e.forEach(a=>$l(a,t,n,r));else{const a=Ne(e.handler)?e.handler.bind(n):t[e.handler];Ne(a)&&xa(i,a,e)}}function bc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:s}}=e.appContext,o=a.get(t);let c;return o?c=o:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(u=>Ra(c,u,s,!0)),Ra(c,t,s)),rt(t)&&a.set(t,c),c}function Ra(e,t,n,r=!1){const{mixins:i,extends:a}=t;a&&Ra(e,a,n,!0),i&&i.forEach(s=>Ra(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const o=hp[s]||n&&n[s];e[s]=o?o(e[s],t[s]):t[s]}return e}const hp={data:uu,props:jn,emits:jn,methods:jn,computed:jn,beforeCreate:gt,created:gt,beforeMount:gt,mounted:gt,beforeUpdate:gt,updated:gt,beforeDestroy:gt,beforeUnmount:gt,destroyed:gt,unmounted:gt,activated:gt,deactivated:gt,errorCaptured:gt,serverPrefetch:gt,components:jn,directives:jn,watch:pp,provide:uu,inject:dp};function uu(e,t){return t?e?function(){return dt(Ne(e)?e.call(this,this):e,Ne(t)?t.call(this,this):t)}:t:e}function dp(e,t){return jn(uo(e),uo(t))}function uo(e){if(De(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function gt(e,t){return e?[...new Set([].concat(e,t))]:t}function jn(e,t){return e?dt(dt(Object.create(null),e),t):t}function pp(e,t){if(!e)return t;if(!t)return e;const n=dt(Object.create(null),e);for(const r in t)n[r]=gt(e[r],t[r]);return n}function vp(e,t,n,r=!1){const i={},a={};Ea(a,Ps,1),e.propsDefaults=Object.create(null),ef(e,t,i,a);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:Ad(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function mp(e,t,n,r){const{props:i,attrs:a,vnode:{patchFlag:s}}=e,o=Ve(i),[c]=e.propsOptions;let u=!1;if((r||s>0)&&!(s&16)){if(s&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let h=l[f];if(Ts(e.emitsOptions,h))continue;const d=t[h];if(c)if(ke(a,h))d!==a[h]&&(a[h]=d,u=!0);else{const p=nn(h);i[p]=lo(c,o,p,d,e,!1)}else d!==a[h]&&(a[h]=d,u=!0)}}}else{ef(e,t,i,a)&&(u=!0);let l;for(const f in o)(!t||!ke(t,f)&&((l=Vr(f))===f||!ke(t,l)))&&(c?n&&(n[f]!==void 0||n[l]!==void 0)&&(i[f]=lo(c,o,f,void 0,e,!0)):delete i[f]);if(a!==o)for(const f in a)(!t||!ke(t,f)&&!0)&&(delete a[f],u=!0)}u&&vn(e,"set","$attrs")}function ef(e,t,n,r){const[i,a]=e.propsOptions;let s=!1,o;if(t)for(let c in t){if(ga(c))continue;const u=t[c];let l;i&&ke(i,l=nn(c))?!a||!a.includes(l)?n[l]=u:(o||(o={}))[l]=u:Ts(e.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,s=!0)}if(a){const c=Ve(n),u=o||Ye;for(let l=0;l<a.length;l++){const f=a[l];n[f]=lo(i,c,f,u[f],e,!ke(u,f))}}return s}function lo(e,t,n,r,i,a){const s=e[n];if(s!=null){const o=ke(s,"default");if(o&&r===void 0){const c=s.default;if(s.type!==Function&&Ne(c)){const{propsDefaults:u}=i;n in u?r=u[n]:(wr(i),r=u[n]=c.call(null,t),Qn())}else r=c}s[0]&&(a&&!o?r=!1:s[1]&&(r===""||r===Vr(n))&&(r=!0))}return r}function tf(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const a=e.props,s={},o=[];let c=!1;if(!Ne(e)){const l=f=>{c=!0;const[h,d]=tf(f,t,!0);dt(s,h),d&&o.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!a&&!c)return rt(e)&&r.set(e,mr),mr;if(De(a))for(let l=0;l<a.length;l++){const f=nn(a[l]);lu(f)&&(s[f]=Ye)}else if(a)for(const l in a){const f=nn(l);if(lu(f)){const h=a[l],d=s[f]=De(h)||Ne(h)?{type:h}:h;if(d){const p=du(Boolean,d.type),v=du(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||ke(d,"default"))&&o.push(f)}}}const u=[s,o];return rt(e)&&r.set(e,u),u}function lu(e){return e[0]!=="$"}function fu(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function hu(e,t){return fu(e)===fu(t)}function du(e,t){return De(t)?t.findIndex(n=>hu(n,e)):Ne(t)&&hu(t,e)?0:-1}const nf=e=>e[0]==="_"||e==="$stable",wc=e=>De(e)?e.map(Qt):[Qt(e)],gp=(e,t,n)=>{if(t._n)return t;const r=zd((...i)=>wc(t(...i)),n);return r._c=!1,r},rf=(e,t,n)=>{const r=e._ctx;for(const i in e){if(nf(i))continue;const a=e[i];if(Ne(a))t[i]=gp(i,a,r);else if(a!=null){const s=wc(a);t[i]=()=>s}}},af=(e,t)=>{const n=wc(t);e.slots.default=()=>n},yp=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ve(t),Ea(t,"_",n)):rf(t,e.slots={})}else e.slots={},t&&af(e,t);Ea(e.slots,Ps,1)},xp=(e,t,n)=>{const{vnode:r,slots:i}=e;let a=!0,s=Ye;if(r.shapeFlag&32){const o=t._;o?n&&o===1?a=!1:(dt(i,t),!n&&o===1&&delete i._):(a=!t.$stable,rf(t,i)),s=t}else t&&(af(e,t),s={default:1});if(a)for(const o in i)!nf(o)&&!(o in s)&&delete i[o]};function sf(){return{app:null,config:{isNativeTag:Vh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _p=0;function bp(e,t){return function(r,i=null){Ne(r)||(r=Object.assign({},r)),i!=null&&!rt(i)&&(i=null);const a=sf(),s=new Set;let o=!1;const c=a.app={_uid:_p++,_component:r,_props:i,_container:null,_context:a,_instance:null,version:Vp,get config(){return a.config},set config(u){},use(u,...l){return s.has(u)||(u&&Ne(u.install)?(s.add(u),u.install(c,...l)):Ne(u)&&(s.add(u),u(c,...l))),c},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),c},component(u,l){return l?(a.components[u]=l,c):a.components[u]},directive(u,l){return l?(a.directives[u]=l,c):a.directives[u]},mount(u,l,f){if(!o){const h=wt(r,i);return h.appContext=a,l&&t?t(h,u):e(h,u,f),o=!0,c._container=u,u.__vue_app__=c,Sc(h.component)||h.component.proxy}},unmount(){o&&(e(null,c._container),delete c._container.__vue_app__)},provide(u,l){return a.provides[u]=l,c}};return c}}function fo(e,t,n,r,i=!1){if(De(e)){e.forEach((h,d)=>fo(h,t&&(De(t)?t[d]:t),n,r,i));return}if(_a(r)&&!i)return;const a=r.shapeFlag&4?Sc(r.component)||r.component.proxy:r.el,s=i?null:a,{i:o,r:c}=e,u=t&&t.r,l=o.refs===Ye?o.refs={}:o.refs,f=o.setupState;if(u!=null&&u!==c&&(pt(u)?(l[u]=null,ke(f,u)&&(f[u]=null)):ht(u)&&(u.value=null)),Ne(c))Dn(c,o,12,[s,l]);else{const h=pt(c),d=ht(c);if(h||d){const p=()=>{if(e.f){const v=h?l[c]:c.value;i?De(v)&&cc(v,a):De(v)?v.includes(a)||v.push(a):h?(l[c]=[a],ke(f,c)&&(f[c]=l[c])):(c.value=[a],e.k&&(l[e.k]=c.value))}else h?(l[c]=s,ke(f,c)&&(f[c]=s)):d&&(c.value=s,e.k&&(l[e.k]=s))};s?(p.id=-1,bt(p,n)):p()}}}const bt=Xd;function wp(e){return Mp(e)}function Mp(e,t){const n=$h();n.__VUE__=!0;const{insert:r,remove:i,patchProp:a,createElement:s,createText:o,createComment:c,setText:u,setElementText:l,parentNode:f,nextSibling:h,setScopeId:d=Yt,insertStaticContent:p}=e,v=(w,D,V,W=null,X=null,ie=null,oe=!1,N=null,ne=!!D.dynamicChildren)=>{if(w===D)return;w&&!qn(w,D)&&(W=G(w),ue(w,X,ie,!0),w=null),D.patchFlag===-2&&(ne=!1,D.dynamicChildren=null);const{type:Y,ref:fe,shapeFlag:ee}=D;switch(Y){case Mc:g(w,D,V,W);break;case pn:m(w,D,V,W);break;case ba:w==null&&y(D,V,W,oe);break;case Ht:q(w,D,V,W,X,ie,oe,N,ne);break;default:ee&1?E(w,D,V,W,X,ie,oe,N,ne):ee&6?$(w,D,V,W,X,ie,oe,N,ne):(ee&64||ee&128)&&Y.process(w,D,V,W,X,ie,oe,N,ne,xe)}fe!=null&&X&&fo(fe,w&&w.ref,ie,D||w,!D)},g=(w,D,V,W)=>{if(w==null)r(D.el=o(D.children),V,W);else{const X=D.el=w.el;D.children!==w.children&&u(X,D.children)}},m=(w,D,V,W)=>{w==null?r(D.el=c(D.children||""),V,W):D.el=w.el},y=(w,D,V,W)=>{[w.el,w.anchor]=p(w.children,D,V,W,w.el,w.anchor)},_=({el:w,anchor:D},V,W)=>{let X;for(;w&&w!==D;)X=h(w),r(w,V,W),w=X;r(D,V,W)},x=({el:w,anchor:D})=>{let V;for(;w&&w!==D;)V=h(w),i(w),w=V;i(D)},E=(w,D,V,W,X,ie,oe,N,ne)=>{oe=oe||D.type==="svg",w==null?T(D,V,W,X,ie,oe,N,ne):R(w,D,X,ie,oe,N,ne)},T=(w,D,V,W,X,ie,oe,N)=>{let ne,Y;const{type:fe,props:ee,shapeFlag:O,transition:j,dirs:ae}=w;if(ne=w.el=s(w.type,ie,ee&&ee.is,ee),O&8?l(ne,w.children):O&16&&C(w.children,ne,null,W,X,ie&&fe!=="foreignObject",oe,N),ae&&Wn(w,null,W,"created"),ee){for(const ce in ee)ce!=="value"&&!ga(ce)&&a(ne,ce,null,ee[ce],ie,w.children,W,X,I);"value"in ee&&a(ne,"value",null,ee.value),(Y=ee.onVnodeBeforeMount)&&Jt(Y,W,w)}S(ne,w,w.scopeId,oe,W),ae&&Wn(w,null,W,"beforeMount");const he=(!X||X&&!X.pendingBranch)&&j&&!j.persisted;he&&j.beforeEnter(ne),r(ne,D,V),((Y=ee&&ee.onVnodeMounted)||he||ae)&&bt(()=>{Y&&Jt(Y,W,w),he&&j.enter(ne),ae&&Wn(w,null,W,"mounted")},X)},S=(w,D,V,W,X)=>{if(V&&d(w,V),W)for(let ie=0;ie<W.length;ie++)d(w,W[ie]);if(X){let ie=X.subTree;if(D===ie){const oe=X.vnode;S(w,oe,oe.scopeId,oe.slotScopeIds,X.parent)}}},C=(w,D,V,W,X,ie,oe,N,ne=0)=>{for(let Y=ne;Y<w.length;Y++){const fe=w[Y]=N?Rn(w[Y]):Qt(w[Y]);v(null,fe,D,V,W,X,ie,oe,N)}},R=(w,D,V,W,X,ie,oe)=>{const N=D.el=w.el;let{patchFlag:ne,dynamicChildren:Y,dirs:fe}=D;ne|=w.patchFlag&16;const ee=w.props||Ye,O=D.props||Ye;let j;V&&Xn(V,!1),(j=O.onVnodeBeforeUpdate)&&Jt(j,V,D,w),fe&&Wn(D,w,V,"beforeUpdate"),V&&Xn(V,!0);const ae=X&&D.type!=="foreignObject";if(Y?F(w.dynamicChildren,Y,N,V,W,ae,ie):oe||B(w,D,N,null,V,W,ae,ie,!1),ne>0){if(ne&16)z(N,D,ee,O,V,W,X);else if(ne&2&&ee.class!==O.class&&a(N,"class",null,O.class,X),ne&4&&a(N,"style",ee.style,O.style,X),ne&8){const he=D.dynamicProps;for(let ce=0;ce<he.length;ce++){const Me=he[ce],Ie=ee[Me],Ue=O[Me];(Ue!==Ie||Me==="value")&&a(N,Me,Ie,Ue,X,w.children,V,W,I)}}ne&1&&w.children!==D.children&&l(N,D.children)}else!oe&&Y==null&&z(N,D,ee,O,V,W,X);((j=O.onVnodeUpdated)||fe)&&bt(()=>{j&&Jt(j,V,D,w),fe&&Wn(D,w,V,"updated")},W)},F=(w,D,V,W,X,ie,oe)=>{for(let N=0;N<D.length;N++){const ne=w[N],Y=D[N],fe=ne.el&&(ne.type===Ht||!qn(ne,Y)||ne.shapeFlag&70)?f(ne.el):V;v(ne,Y,fe,null,W,X,ie,oe,!0)}},z=(w,D,V,W,X,ie,oe)=>{if(V!==W){if(V!==Ye)for(const N in V)!ga(N)&&!(N in W)&&a(w,N,V[N],null,oe,D.children,X,ie,I);for(const N in W){if(ga(N))continue;const ne=W[N],Y=V[N];ne!==Y&&N!=="value"&&a(w,N,Y,ne,oe,D.children,X,ie,I)}"value"in W&&a(w,"value",V.value,W.value)}},q=(w,D,V,W,X,ie,oe,N,ne)=>{const Y=D.el=w?w.el:o(""),fe=D.anchor=w?w.anchor:o("");let{patchFlag:ee,dynamicChildren:O,slotScopeIds:j}=D;j&&(N=N?N.concat(j):j),w==null?(r(Y,V,W),r(fe,V,W),C(D.children,V,fe,X,ie,oe,N,ne)):ee>0&&ee&64&&O&&w.dynamicChildren?(F(w.dynamicChildren,O,V,X,ie,oe,N),(D.key!=null||X&&D===X.subTree)&&of(w,D,!0)):B(w,D,V,fe,X,ie,oe,N,ne)},$=(w,D,V,W,X,ie,oe,N,ne)=>{D.slotScopeIds=N,w==null?D.shapeFlag&512?X.ctx.activate(D,V,W,oe,ne):te(D,V,W,X,ie,oe,ne):L(w,D,ne)},te=(w,D,V,W,X,ie,oe)=>{const N=w.component=Fp(w,W,X);if(As(w)&&(N.ctx.renderer=xe),Up(N),N.asyncDep){if(X&&X.registerDep(N,A),!w.el){const ne=N.subTree=wt(pn);m(null,ne,D,V)}return}A(N,w,D,V,X,ie,oe)},L=(w,D,V)=>{const W=D.component=w.component;if(kd(w,D,V))if(W.asyncDep&&!W.asyncResolved){H(W,D,V);return}else W.next=D,Fd(W.update),W.update();else D.el=w.el,W.vnode=D},A=(w,D,V,W,X,ie,oe)=>{const N=()=>{if(w.isMounted){let{next:fe,bu:ee,u:O,parent:j,vnode:ae}=w,he=fe,ce;Xn(w,!1),fe?(fe.el=ae.el,H(w,fe,oe)):fe=ae,ee&&Bs(ee),(ce=fe.props&&fe.props.onVnodeBeforeUpdate)&&Jt(ce,j,fe,ae),Xn(w,!0);const Me=zs(w),Ie=w.subTree;w.subTree=Me,v(Ie,Me,f(Ie.el),G(Ie),w,X,ie),fe.el=Me.el,he===null&&Vd(w,Me.el),O&&bt(O,X),(ce=fe.props&&fe.props.onVnodeUpdated)&&bt(()=>Jt(ce,j,fe,ae),X)}else{let fe;const{el:ee,props:O}=D,{bm:j,m:ae,parent:he}=w,ce=_a(D);if(Xn(w,!1),j&&Bs(j),!ce&&(fe=O&&O.onVnodeBeforeMount)&&Jt(fe,he,D),Xn(w,!0),ee&&ge){const Me=()=>{w.subTree=zs(w),ge(ee,w.subTree,w,X,null)};ce?D.type.__asyncLoader().then(()=>!w.isUnmounted&&Me()):Me()}else{const Me=w.subTree=zs(w);v(null,Me,V,W,w,X,ie),D.el=Me.el}if(ae&&bt(ae,X),!ce&&(fe=O&&O.onVnodeMounted)){const Me=D;bt(()=>Jt(fe,he,Me),X)}(D.shapeFlag&256||he&&_a(he.vnode)&&he.vnode.shapeFlag&256)&&w.a&&bt(w.a,X),w.isMounted=!0,D=V=W=null}},ne=w.effect=new hc(N,()=>xc(Y),w.scope),Y=w.update=()=>ne.run();Y.id=w.uid,Xn(w,!0),Y()},H=(w,D,V)=>{D.component=w;const W=w.vnode.props;w.vnode=D,w.next=null,mp(w,D.props,W,V),xp(w,D.children,V),Wr(),ru(),Xr()},B=(w,D,V,W,X,ie,oe,N,ne=!1)=>{const Y=w&&w.children,fe=w?w.shapeFlag:0,ee=D.children,{patchFlag:O,shapeFlag:j}=D;if(O>0){if(O&128){J(Y,ee,V,W,X,ie,oe,N,ne);return}else if(O&256){Q(Y,ee,V,W,X,ie,oe,N,ne);return}}j&8?(fe&16&&I(Y,X,ie),ee!==Y&&l(V,ee)):fe&16?j&16?J(Y,ee,V,W,X,ie,oe,N,ne):I(Y,X,ie,!0):(fe&8&&l(V,""),j&16&&C(ee,V,W,X,ie,oe,N,ne))},Q=(w,D,V,W,X,ie,oe,N,ne)=>{w=w||mr,D=D||mr;const Y=w.length,fe=D.length,ee=Math.min(Y,fe);let O;for(O=0;O<ee;O++){const j=D[O]=ne?Rn(D[O]):Qt(D[O]);v(w[O],j,V,null,X,ie,oe,N,ne)}Y>fe?I(w,X,ie,!0,!1,ee):C(D,V,W,X,ie,oe,N,ne,ee)},J=(w,D,V,W,X,ie,oe,N,ne)=>{let Y=0;const fe=D.length;let ee=w.length-1,O=fe-1;for(;Y<=ee&&Y<=O;){const j=w[Y],ae=D[Y]=ne?Rn(D[Y]):Qt(D[Y]);if(qn(j,ae))v(j,ae,V,null,X,ie,oe,N,ne);else break;Y++}for(;Y<=ee&&Y<=O;){const j=w[ee],ae=D[O]=ne?Rn(D[O]):Qt(D[O]);if(qn(j,ae))v(j,ae,V,null,X,ie,oe,N,ne);else break;ee--,O--}if(Y>ee){if(Y<=O){const j=O+1,ae=j<fe?D[j].el:W;for(;Y<=O;)v(null,D[Y]=ne?Rn(D[Y]):Qt(D[Y]),V,ae,X,ie,oe,N,ne),Y++}}else if(Y>O)for(;Y<=ee;)ue(w[Y],X,ie,!0),Y++;else{const j=Y,ae=Y,he=new Map;for(Y=ae;Y<=O;Y++){const je=D[Y]=ne?Rn(D[Y]):Qt(D[Y]);je.key!=null&&he.set(je.key,Y)}let ce,Me=0;const Ie=O-ae+1;let Ue=!1,it=0;const He=new Array(Ie);for(Y=0;Y<Ie;Y++)He[Y]=0;for(Y=j;Y<=ee;Y++){const je=w[Y];if(Me>=Ie){ue(je,X,ie,!0);continue}let lt;if(je.key!=null)lt=he.get(je.key);else for(ce=ae;ce<=O;ce++)if(He[ce-ae]===0&&qn(je,D[ce])){lt=ce;break}lt===void 0?ue(je,X,ie,!0):(He[lt-ae]=Y+1,lt>=it?it=lt:Ue=!0,v(je,D[lt],V,null,X,ie,oe,N,ne),Me++)}const ut=Ue?Ep(He):mr;for(ce=ut.length-1,Y=Ie-1;Y>=0;Y--){const je=ae+Y,lt=D[je],fn=je+1<fe?D[je+1].el:W;He[Y]===0?v(null,lt,V,fn,X,ie,oe,N,ne):Ue&&(ce<0||Y!==ut[ce]?Z(lt,V,fn,2):ce--)}}},Z=(w,D,V,W,X=null)=>{const{el:ie,type:oe,transition:N,children:ne,shapeFlag:Y}=w;if(Y&6){Z(w.component.subTree,D,V,W);return}if(Y&128){w.suspense.move(D,V,W);return}if(Y&64){oe.move(w,D,V,xe);return}if(oe===Ht){r(ie,D,V);for(let ee=0;ee<ne.length;ee++)Z(ne[ee],D,V,W);r(w.anchor,D,V);return}if(oe===ba){_(w,D,V);return}if(W!==2&&Y&1&&N)if(W===0)N.beforeEnter(ie),r(ie,D,V),bt(()=>N.enter(ie),X);else{const{leave:ee,delayLeave:O,afterLeave:j}=N,ae=()=>r(ie,D,V),he=()=>{ee(ie,()=>{ae(),j&&j()})};O?O(ie,ae,he):he()}else r(ie,D,V)},ue=(w,D,V,W=!1,X=!1)=>{const{type:ie,props:oe,ref:N,children:ne,dynamicChildren:Y,shapeFlag:fe,patchFlag:ee,dirs:O}=w;if(N!=null&&fo(N,null,V,w,!0),fe&256){D.ctx.deactivate(w);return}const j=fe&1&&O,ae=!_a(w);let he;if(ae&&(he=oe&&oe.onVnodeBeforeUnmount)&&Jt(he,D,w),fe&6)k(w.component,V,W);else{if(fe&128){w.suspense.unmount(V,W);return}j&&Wn(w,null,D,"beforeUnmount"),fe&64?w.type.remove(w,D,V,X,xe,W):Y&&(ie!==Ht||ee>0&&ee&64)?I(Y,D,V,!1,!0):(ie===Ht&&ee&384||!X&&fe&16)&&I(ne,D,V),W&&de(w)}(ae&&(he=oe&&oe.onVnodeUnmounted)||j)&&bt(()=>{he&&Jt(he,D,w),j&&Wn(w,null,D,"unmounted")},V)},de=w=>{const{type:D,el:V,anchor:W,transition:X}=w;if(D===Ht){_e(V,W);return}if(D===ba){x(w);return}const ie=()=>{i(V),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(w.shapeFlag&1&&X&&!X.persisted){const{leave:oe,delayLeave:N}=X,ne=()=>oe(V,ie);N?N(w.el,ie,ne):ne()}else ie()},_e=(w,D)=>{let V;for(;w!==D;)V=h(w),i(w),w=V;i(D)},k=(w,D,V)=>{const{bum:W,scope:X,update:ie,subTree:oe,um:N}=w;W&&Bs(W),X.stop(),ie&&(ie.active=!1,ue(oe,w,D,V)),N&&bt(N,D),bt(()=>{w.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},I=(w,D,V,W=!1,X=!1,ie=0)=>{for(let oe=ie;oe<w.length;oe++)ue(w[oe],D,V,W,X)},G=w=>w.shapeFlag&6?G(w.component.subTree):w.shapeFlag&128?w.suspense.next():h(w.anchor||w.el),K=(w,D,V)=>{w==null?D._vnode&&ue(D._vnode,null,null,!0):v(D._vnode||null,w,D,null,null,null,V),ru(),Hl(),D._vnode=w},xe={p:v,um:ue,m:Z,r:de,mt:te,mc:C,pc:B,pbc:F,n:G,o:e};let le,ge;return t&&([le,ge]=t(xe)),{render:K,hydrate:le,createApp:bp(K,le)}}function Xn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function of(e,t,n=!1){const r=e.children,i=t.children;if(De(r)&&De(i))for(let a=0;a<r.length;a++){const s=r[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=Rn(i[a]),o.el=s.el),n||of(s,o))}}function Ep(e){const t=e.slice(),n=[0];let r,i,a,s,o;const c=e.length;for(r=0;r<c;r++){const u=e[r];if(u!==0){if(i=n[n.length-1],e[i]<u){t[r]=i,n.push(r);continue}for(a=0,s=n.length-1;a<s;)o=a+s>>1,e[n[o]]<u?a=o+1:s=o;u<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,s=n[a-1];a-- >0;)n[a]=s,s=t[s];return n}const Tp=e=>e.__isTeleport,Ht=Symbol(void 0),Mc=Symbol(void 0),pn=Symbol(void 0),ba=Symbol(void 0),ii=[];let jt=null;function Ec(e=!1){ii.push(jt=e?null:[])}function Sp(){ii.pop(),jt=ii[ii.length-1]||null}let vi=1;function pu(e){vi+=e}function cf(e){return e.dynamicChildren=vi>0?jt||mr:null,Sp(),vi>0&&jt&&jt.push(e),e}function uf(e,t,n,r,i,a){return cf(ff(e,t,n,r,i,a,!0))}function Ap(e,t,n,r,i){return cf(wt(e,t,n,r,i,!0))}function ho(e){return e?e.__v_isVNode===!0:!1}function qn(e,t){return e.type===t.type&&e.key===t.key}const Ps="__vInternal",lf=({key:e})=>e!=null?e:null,wa=({ref:e,ref_key:t,ref_for:n})=>e!=null?pt(e)||ht(e)||Ne(e)?{i:Xt,r:e,k:t,f:!!n}:e:null;function ff(e,t=null,n=null,r=0,i=null,a=e===Ht?0:1,s=!1,o=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&lf(t),ref:t&&wa(t),scopeId:Wl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return o?(Tc(c,n),a&128&&e.normalize(c)):n&&(c.shapeFlag|=pt(n)?8:16),vi>0&&!s&&jt&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&jt.push(c),c}const wt=Rp;function Rp(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===op)&&(e=pn),ho(e)){const o=Bn(e,t,!0);return n&&Tc(o,n),vi>0&&!a&&jt&&(o.shapeFlag&6?jt[jt.indexOf(e)]=o:jt.push(o)),o.patchFlag|=-2,o}if(kp(e)&&(e=e.__vccOpts),t){t=Pp(t);let{class:o,style:c}=t;o&&!pt(o)&&(t.class=sc(o)),rt(c)&&(Ll(c)&&!De(c)&&(c=dt({},c)),t.style=ac(c))}const s=pt(e)?1:Wd(e)?128:Tp(e)?64:rt(e)?4:Ne(e)?2:0;return ff(e,t,n,r,i,s,a,!0)}function Pp(e){return e?Ll(e)||Ps in e?dt({},e):e:null}function Bn(e,t,n=!1){const{props:r,ref:i,patchFlag:a,children:s}=e,o=t?Ip(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&lf(o),ref:t&&t.ref?n&&i?De(i)?i.concat(wa(t)):[i,wa(t)]:wa(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ht?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Bn(e.ssContent),ssFallback:e.ssFallback&&Bn(e.ssFallback),el:e.el,anchor:e.anchor}}function Lp(e=" ",t=0){return wt(Mc,null,e,t)}function Cp(e,t){const n=wt(ba,null,e);return n.staticCount=t,n}function Qt(e){return e==null||typeof e=="boolean"?wt(pn):De(e)?wt(Ht,null,e.slice()):typeof e=="object"?Rn(e):wt(Mc,null,String(e))}function Rn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Bn(e)}function Tc(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(De(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Tc(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Ps in t)?t._ctx=Xt:i===3&&Xt&&(Xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ne(t)?(t={default:t,_ctx:Xt},n=32):(t=String(t),r&64?(n=16,t=[Lp(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ip(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=sc([t.class,r.class]));else if(i==="style")t.style=ac([t.style,r.style]);else if(xs(i)){const a=t[i],s=r[i];s&&a!==s&&!(De(a)&&a.includes(s))&&(t[i]=a?[].concat(a,s):s)}else i!==""&&(t[i]=r[i])}return t}function Jt(e,t,n,r=null){Bt(e,t,7,[n,r])}const Op=sf();let Dp=0;function Fp(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Op,a={uid:Dp++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new ed(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tf(r,i),emitsOptions:Vl(r,i),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:r.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Bd.bind(null,a),e.ce&&e.ce(a),a}let ot=null;const Np=()=>ot||Xt,wr=e=>{ot=e,e.scope.on()},Qn=()=>{ot&&ot.scope.off(),ot=null};function hf(e){return e.vnode.shapeFlag&4}let mi=!1;function Up(e,t=!1){mi=t;const{props:n,children:r}=e.vnode,i=hf(e);vp(e,n,i,t),yp(e,r);const a=i?Bp(e,t):void 0;return mi=!1,a}function Bp(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Cl(new Proxy(e.ctx,up));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?Gp(e):null;wr(e),Wr();const a=Dn(r,e,0,[e.props,i]);if(Xr(),Qn(),yl(a)){if(a.then(Qn,Qn),t)return a.then(s=>{vu(e,s,t)}).catch(s=>{Es(s,e,0)});e.asyncDep=a}else vu(e,a,t)}else df(e,t)}function vu(e,t,n){Ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:rt(t)&&(e.setupState=Nl(t)),df(e,n)}let mu;function df(e,t,n){const r=e.type;if(!e.render){if(!t&&mu&&!r.render){const i=r.template||bc(e).template;if(i){const{isCustomElement:a,compilerOptions:s}=e.appContext.config,{delimiters:o,compilerOptions:c}=r,u=dt(dt({isCustomElement:a,delimiters:o},s),c);r.render=mu(i,u)}}e.render=r.render||Yt}wr(e),Wr(),lp(e),Xr(),Qn()}function zp(e){return new Proxy(e.attrs,{get(t,n){return At(e,"get","$attrs"),t[n]}})}function Gp(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=zp(e))},slots:e.slots,emit:e.emit,expose:t}}function Sc(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Nl(Cl(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Aa)return Aa[n](e)}}))}function Hp(e,t=!0){return Ne(e)?e.displayName||e.name:e.name||t&&e.__name}function kp(e){return Ne(e)&&"__vccOpts"in e}const en=(e,t)=>Id(e,t,mi);function pf(e,t,n){const r=arguments.length;return r===2?rt(t)&&!De(t)?ho(t)?wt(e,null,[t]):wt(e,t):wt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ho(n)&&(n=[n]),wt(e,t,n))}const Vp="3.2.40",Wp="http://www.w3.org/2000/svg",Zn=typeof document<"u"?document:null,gu=Zn&&Zn.createElement("template"),Xp={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?Zn.createElementNS(Wp,e):Zn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Zn.createTextNode(e),createComment:e=>Zn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Zn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,a){const s=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{gu.innerHTML=r?`<svg>${e}</svg>`:e;const o=gu.content;if(r){const c=o.firstChild;for(;c.firstChild;)o.appendChild(c.firstChild);o.removeChild(c)}t.insertBefore(o,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function jp(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Yp(e,t,n){const r=e.style,i=pt(n);if(n&&!i){for(const a in n)po(r,a,n[a]);if(t&&!pt(t))for(const a in t)n[a]==null&&po(r,a,"")}else{const a=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=a)}}const yu=/\s*!important$/;function po(e,t,n){if(De(n))n.forEach(r=>po(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=qp(e,t);yu.test(n)?e.setProperty(Vr(r),n.replace(yu,""),"important"):e[r]=n}}const xu=["Webkit","Moz","ms"],Hs={};function qp(e,t){const n=Hs[t];if(n)return n;let r=nn(t);if(r!=="filter"&&r in e)return Hs[t]=r;r=ws(r);for(let i=0;i<xu.length;i++){const a=xu[i]+r;if(a in e)return Hs[t]=a}return t}const _u="http://www.w3.org/1999/xlink";function Zp(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(_u,t.slice(6,t.length)):e.setAttributeNS(_u,t,n);else{const a=zh(t);n==null||a&&!gl(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}function Jp(e,t,n,r,i,a,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,i,a),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const c=n==null?"":n;(e.value!==c||e.tagName==="OPTION")&&(e.value=c),n==null&&e.removeAttribute(t);return}let o=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=gl(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(t)}const[vf,Kp]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let vo=0;const Qp=Promise.resolve(),$p=()=>{vo=0},ev=()=>vo||(Qp.then($p),vo=vf());function tv(e,t,n,r){e.addEventListener(t,n,r)}function nv(e,t,n,r){e.removeEventListener(t,n,r)}function rv(e,t,n,r,i=null){const a=e._vei||(e._vei={}),s=a[t];if(r&&s)s.value=r;else{const[o,c]=iv(t);if(r){const u=a[t]=av(r,i);tv(e,o,u,c)}else s&&(nv(e,o,s,c),a[t]=void 0)}}const bu=/(?:Once|Passive|Capture)$/;function iv(e){let t;if(bu.test(e)){t={};let r;for(;r=e.match(bu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vr(e.slice(2)),t]}function av(e,t){const n=r=>{const i=r.timeStamp||vf();(Kp||i>=n.attached-1)&&Bt(sv(r,n.value),t,5,[r])};return n.value=e,n.attached=ev(),n}function sv(e,t){if(De(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const wu=/^on[a-z]/,ov=(e,t,n,r,i=!1,a,s,o,c)=>{t==="class"?jp(e,r,i):t==="style"?Yp(e,n,r):xs(t)?oc(t)||rv(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):cv(e,t,r,i))?Jp(e,t,r,a,s,o,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Zp(e,t,r,i))};function cv(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&wu.test(t)&&Ne(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||wu.test(t)&&pt(n)?!1:t in e}const uv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Zd.props;const lv=dt({patchProp:ov},Xp);let Mu;function fv(){return Mu||(Mu=wp(lv))}const hv=(...e)=>{const t=fv().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=dv(r);if(!i)return;const a=t._component;!Ne(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function dv(e){return pt(e)?document.querySelector(e):e}/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const mf=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",jr=e=>mf?Symbol(e):"_vr_"+e,pv=jr("rvlm"),Eu=jr("rvd"),Ac=jr("r"),gf=jr("rl"),mo=jr("rvl"),dr=typeof window<"u";function vv(e){return e.__esModule||mf&&e[Symbol.toStringTag]==="Module"}const Xe=Object.assign;function ks(e,t){const n={};for(const r in t){const i=t[r];n[r]=Array.isArray(i)?i.map(e):e(i)}return n}const ai=()=>{},mv=/\/$/,gv=e=>e.replace(mv,"");function Vs(e,t,n="/"){let r,i={},a="",s="";const o=t.indexOf("?"),c=t.indexOf("#",o>-1?o:0);return o>-1&&(r=t.slice(0,o),a=t.slice(o+1,c>-1?c:t.length),i=e(a)),c>-1&&(r=r||t.slice(0,c),s=t.slice(c,t.length)),r=bv(r!=null?r:t,n),{fullPath:r+(a&&"?")+a+s,path:r,query:i,hash:s}}function yv(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Tu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function xv(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Mr(t.matched[r],n.matched[i])&&yf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Mr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function yf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!_v(e[n],t[n]))return!1;return!0}function _v(e,t){return Array.isArray(e)?Su(e,t):Array.isArray(t)?Su(t,e):e===t}function Su(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function bv(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,a,s;for(a=0;a<r.length;a++)if(s=r[a],!(i===1||s==="."))if(s==="..")i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var gi;(function(e){e.pop="pop",e.push="push"})(gi||(gi={}));var si;(function(e){e.back="back",e.forward="forward",e.unknown=""})(si||(si={}));function wv(e){if(!e)if(dr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),gv(e)}const Mv=/^[^#]+#/;function Ev(e,t){return e.replace(Mv,"#")+t}function Tv(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Ls=()=>({left:window.pageXOffset,top:window.pageYOffset});function Sv(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Tv(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Au(e,t){return(history.state?history.state.position-t:-1)+e}const go=new Map;function Av(e,t){go.set(e,t)}function Rv(e){const t=go.get(e);return go.delete(e),t}let Pv=()=>location.protocol+"//"+location.host;function xf(e,t){const{pathname:n,search:r,hash:i}=t,a=e.indexOf("#");if(a>-1){let o=i.includes(e.slice(a))?e.slice(a).length:1,c=i.slice(o);return c[0]!=="/"&&(c="/"+c),Tu(c,"")}return Tu(n,e)+r+i}function Lv(e,t,n,r){let i=[],a=[],s=null;const o=({state:h})=>{const d=xf(e,location),p=n.value,v=t.value;let g=0;if(h){if(n.value=d,t.value=h,s&&s===p){s=null;return}g=v?h.position-v.position:0}else r(d);i.forEach(m=>{m(n.value,p,{delta:g,type:gi.pop,direction:g?g>0?si.forward:si.back:si.unknown})})};function c(){s=n.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return a.push(d),d}function l(){const{history:h}=window;!h.state||h.replaceState(Xe({},h.state,{scroll:Ls()}),"")}function f(){for(const h of a)h();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",l),{pauseListeners:c,listen:u,destroy:f}}function Ru(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Ls():null}}function Cv(e){const{history:t,location:n}=window,r={value:xf(e,n)},i={value:t.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(c,u,l){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:Pv()+e+c;try{t[l?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),n[l?"replace":"assign"](h)}}function s(c,u){const l=Xe({},t.state,Ru(i.value.back,c,i.value.forward,!0),u,{position:i.value.position});a(c,l,!0),r.value=c}function o(c,u){const l=Xe({},i.value,t.state,{forward:c,scroll:Ls()});a(l.current,l,!0);const f=Xe({},Ru(r.value,c,null),{position:l.position+1},u);a(c,f,!1),r.value=c}return{location:r,state:i,push:o,replace:s}}function Iv(e){e=wv(e);const t=Cv(e),n=Lv(e,t.state,t.location,t.replace);function r(a,s=!0){s||n.pauseListeners(),history.go(a)}const i=Xe({location:"",base:e,go:r,createHref:Ev.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Ov(e){return typeof e=="string"||e&&typeof e=="object"}function _f(e){return typeof e=="string"||typeof e=="symbol"}const Sn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},bf=jr("nf");var Pu;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Pu||(Pu={}));function Er(e,t){return Xe(new Error,{type:e,[bf]:!0},t)}function An(e,t){return e instanceof Error&&bf in e&&(t==null||!!(e.type&t))}const Lu="[^/]+?",Dv={sensitive:!1,strict:!1,start:!0,end:!0},Fv=/[.+*?^${}()[\]/\\]/g;function Nv(e,t){const n=Xe({},Dv,t),r=[];let i=n.start?"^":"";const a=[];for(const u of e){const l=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(Fv,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=h;a.push({name:p,repeatable:v,optional:g});const y=m||Lu;if(y!==Lu){d+=10;try{new RegExp(`(${y})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+x.message)}}let _=v?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;f||(_=g&&u.length<2?`(?:/${_})`:"/"+_),g&&(_+="?"),i+=_,d+=20,g&&(d+=-8),v&&(d+=-20),y===".*"&&(d+=-50)}l.push(d)}r.push(l)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function o(u){const l=u.match(s),f={};if(!l)return null;for(let h=1;h<l.length;h++){const d=l[h]||"",p=a[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function c(u){let l="",f=!1;for(const h of e){(!f||!l.endsWith("/"))&&(l+="/"),f=!1;for(const d of h)if(d.type===0)l+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,m=p in u?u[p]:"";if(Array.isArray(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Array.isArray(m)?m.join("/"):m;if(!y)if(g)h.length<2&&(l.endsWith("/")?l=l.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);l+=y}}return l}return{re:s,score:r,keys:a,parse:o,stringify:c}}function Uv(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Bv(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const a=Uv(r[n],i[n]);if(a)return a;n++}return i.length-r.length}const zv={type:0,value:""},Gv=/[a-zA-Z0-9_]/;function Hv(e){if(!e)return[[]];if(e==="/")return[[zv]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${u}": ${d}`)}let n=0,r=n;const i=[];let a;function s(){a&&i.push(a),a=[]}let o=0,c,u="",l="";function f(){!u||(n===0?a.push({type:0,value:u}):n===1||n===2||n===3?(a.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=c}for(;o<e.length;){if(c=e[o++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&f(),s()):c===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:c==="("?n=2:Gv.test(c)?h():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:n=3:l+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&o--,l="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),s(),i}function kv(e,t,n){const r=Nv(Hv(e.path),n),i=Xe(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Vv(e,t){const n=[],r=new Map;t=Iu({strict:!1,end:!0,sensitive:!1},t);function i(l){return r.get(l)}function a(l,f,h){const d=!h,p=Xv(l);p.aliasOf=h&&h.record;const v=Iu(t,l),g=[p];if("alias"in l){const _=typeof l.alias=="string"?[l.alias]:l.alias;for(const x of _)g.push(Xe({},p,{components:h?h.record.components:p.components,path:x,aliasOf:h?h.record:p}))}let m,y;for(const _ of g){const{path:x}=_;if(f&&x[0]!=="/"){const E=f.record.path,T=E[E.length-1]==="/"?"":"/";_.path=f.record.path+(x&&T+x)}if(m=kv(_,f,v),h?h.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),d&&l.name&&!Cu(m)&&s(l.name)),"children"in p){const E=p.children;for(let T=0;T<E.length;T++)a(E[T],m,h&&h.children[T])}h=h||m,c(m)}return y?()=>{s(y)}:ai}function s(l){if(_f(l)){const f=r.get(l);f&&(r.delete(l),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(l);f>-1&&(n.splice(f,1),l.record.name&&r.delete(l.record.name),l.children.forEach(s),l.alias.forEach(s))}}function o(){return n}function c(l){let f=0;for(;f<n.length&&Bv(l,n[f])>=0&&(l.record.path!==n[f].record.path||!wf(l,n[f]));)f++;n.splice(f,0,l),l.record.name&&!Cu(l)&&r.set(l.record.name,l)}function u(l,f){let h,d={},p,v;if("name"in l&&l.name){if(h=r.get(l.name),!h)throw Er(1,{location:l});v=h.record.name,d=Xe(Wv(f.params,h.keys.filter(y=>!y.optional).map(y=>y.name)),l.params),p=h.stringify(d)}else if("path"in l)p=l.path,h=n.find(y=>y.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?r.get(f.name):n.find(y=>y.re.test(f.path)),!h)throw Er(1,{location:l,currentLocation:f});v=h.record.name,d=Xe({},f.params,l.params),p=h.stringify(d)}const g=[];let m=h;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:d,matched:g,meta:Yv(g)}}return e.forEach(l=>a(l)),{addRoute:a,resolve:u,removeRoute:s,getRoutes:o,getRecordMatcher:i}}function Wv(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Xv(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:jv(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function jv(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function Cu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Yv(e){return e.reduce((t,n)=>Xe(t,n.meta),{})}function Iu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function wf(e,t){return t.children.some(n=>n===e||wf(e,n))}const Mf=/#/g,qv=/&/g,Zv=/\//g,Jv=/=/g,Kv=/\?/g,Ef=/\+/g,Qv=/%5B/g,$v=/%5D/g,Tf=/%5E/g,em=/%60/g,Sf=/%7B/g,tm=/%7C/g,Af=/%7D/g,nm=/%20/g;function Rc(e){return encodeURI(""+e).replace(tm,"|").replace(Qv,"[").replace($v,"]")}function rm(e){return Rc(e).replace(Sf,"{").replace(Af,"}").replace(Tf,"^")}function yo(e){return Rc(e).replace(Ef,"%2B").replace(nm,"+").replace(Mf,"%23").replace(qv,"%26").replace(em,"`").replace(Sf,"{").replace(Af,"}").replace(Tf,"^")}function im(e){return yo(e).replace(Jv,"%3D")}function am(e){return Rc(e).replace(Mf,"%23").replace(Kv,"%3F")}function sm(e){return e==null?"":am(e).replace(Zv,"%2F")}function Pa(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function om(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const a=r[i].replace(Ef," "),s=a.indexOf("="),o=Pa(s<0?a:a.slice(0,s)),c=s<0?null:Pa(a.slice(s+1));if(o in t){let u=t[o];Array.isArray(u)||(u=t[o]=[u]),u.push(c)}else t[o]=c}return t}function Ou(e){let t="";for(let n in e){const r=e[n];if(n=im(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(r)?r.map(a=>a&&yo(a)):[r&&yo(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function cm(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Array.isArray(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}function $r(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Pn(e,t,n,r,i){const a=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,o)=>{const c=f=>{f===!1?o(Er(4,{from:n,to:t})):f instanceof Error?o(f):Ov(f)?o(Er(2,{from:t,to:f})):(a&&r.enterCallbacks[i]===a&&typeof f=="function"&&a.push(f),s())},u=e.call(r&&r.instances[i],t,n,c);let l=Promise.resolve(u);e.length<3&&(l=l.then(c)),l.catch(f=>o(f))})}function Ws(e,t,n,r){const i=[];for(const a of e)for(const s in a.components){let o=a.components[s];if(!(t!=="beforeRouteEnter"&&!a.instances[s]))if(um(o)){const u=(o.__vccOpts||o)[t];u&&i.push(Pn(u,n,r,a,s))}else{let c=o();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${a.path}"`));const l=vv(u)?u.default:u;a.components[s]=l;const h=(l.__vccOpts||l)[t];return h&&Pn(h,n,r,a,s)()}))}}return i}function um(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Du(e){const t=Fn(Ac),n=Fn(gf),r=en(()=>t.resolve(ri(e.to))),i=en(()=>{const{matched:c}=r.value,{length:u}=c,l=c[u-1],f=n.matched;if(!l||!f.length)return-1;const h=f.findIndex(Mr.bind(null,l));if(h>-1)return h;const d=Fu(c[u-2]);return u>1&&Fu(l)===d&&f[f.length-1].path!==d?f.findIndex(Mr.bind(null,c[u-2])):h}),a=en(()=>i.value>-1&&dm(n.params,r.value.params)),s=en(()=>i.value>-1&&i.value===n.matched.length-1&&yf(n.params,r.value.params));function o(c={}){return hm(c)?t[ri(e.replace)?"replace":"push"](ri(e.to)).catch(ai):Promise.resolve()}return{route:r,href:en(()=>r.value.href),isActive:a,isExactActive:s,navigate:o}}const lm=Ss({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Du,setup(e,{slots:t}){const n=aa(Du(e)),{options:r}=Fn(Ac),i=en(()=>({[Nu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Nu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&t.default(n);return e.custom?a:pf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},a)}}}),fm=lm;function hm(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function dm(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((a,s)=>a!==i[s]))return!1}return!0}function Fu(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Nu=(e,t,n)=>e!=null?e:t!=null?t:n,pm=Ss({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const r=Fn(mo),i=en(()=>e.route||r.value),a=Fn(Eu,0),s=en(()=>i.value.matched[a]);ya(Eu,a+1),ya(pv,s),ya(mo,i);const o=Dl();return xa(()=>[o.value,s.value,e.name],([c,u,l],[f,h,d])=>{u&&(u.instances[l]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Mr(u,h)||!f)&&(u.enterCallbacks[l]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=i.value,u=s.value,l=u&&u.components[e.name],f=e.name;if(!l)return Uu(n.default,{Component:l,route:c});const h=u.props[e.name],d=h?h===!0?c.params:typeof h=="function"?h(c):h:null,v=pf(l,Xe({},d,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(u.instances[f]=null)},ref:o}));return Uu(n.default,{Component:v,route:c})||v}}});function Uu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const vm=pm;function mm(e){const t=Vv(e.routes,e),n=e.parseQuery||om,r=e.stringifyQuery||Ou,i=e.history,a=$r(),s=$r(),o=$r(),c=Rd(Sn);let u=Sn;dr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=ks.bind(null,k=>""+k),f=ks.bind(null,sm),h=ks.bind(null,Pa);function d(k,I){let G,K;return _f(k)?(G=t.getRecordMatcher(k),K=I):K=k,t.addRoute(K,G)}function p(k){const I=t.getRecordMatcher(k);I&&t.removeRoute(I)}function v(){return t.getRoutes().map(k=>k.record)}function g(k){return!!t.getRecordMatcher(k)}function m(k,I){if(I=Xe({},I||c.value),typeof k=="string"){const w=Vs(n,k,I.path),D=t.resolve({path:w.path},I),V=i.createHref(w.fullPath);return Xe(w,D,{params:h(D.params),hash:Pa(w.hash),redirectedFrom:void 0,href:V})}let G;if("path"in k)G=Xe({},k,{path:Vs(n,k.path,I.path).path});else{const w=Xe({},k.params);for(const D in w)w[D]==null&&delete w[D];G=Xe({},k,{params:f(k.params)}),I.params=f(I.params)}const K=t.resolve(G,I),xe=k.hash||"";K.params=l(h(K.params));const le=yv(r,Xe({},k,{hash:rm(xe),path:K.path})),ge=i.createHref(le);return Xe({fullPath:le,hash:xe,query:r===Ou?cm(k.query):k.query||{}},K,{redirectedFrom:void 0,href:ge})}function y(k){return typeof k=="string"?Vs(n,k,c.value.path):Xe({},k)}function _(k,I){if(u!==k)return Er(8,{from:I,to:k})}function x(k){return S(k)}function E(k){return x(Xe(y(k),{replace:!0}))}function T(k){const I=k.matched[k.matched.length-1];if(I&&I.redirect){const{redirect:G}=I;let K=typeof G=="function"?G(k):G;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=y(K):{path:K},K.params={}),Xe({query:k.query,hash:k.hash,params:k.params},K)}}function S(k,I){const G=u=m(k),K=c.value,xe=k.state,le=k.force,ge=k.replace===!0,w=T(G);if(w)return S(Xe(y(w),{state:xe,force:le,replace:ge}),I||G);const D=G;D.redirectedFrom=I;let V;return!le&&xv(r,K,G)&&(V=Er(16,{to:D,from:K}),J(K,K,!0,!1)),(V?Promise.resolve(V):R(D,K)).catch(W=>An(W)?An(W,2)?W:Q(W):H(W,D,K)).then(W=>{if(W){if(An(W,2))return S(Xe(y(W.to),{state:xe,force:le,replace:ge}),I||D)}else W=z(D,K,!0,ge,xe);return F(D,K,W),W})}function C(k,I){const G=_(k,I);return G?Promise.reject(G):Promise.resolve()}function R(k,I){let G;const[K,xe,le]=gm(k,I);G=Ws(K.reverse(),"beforeRouteLeave",k,I);for(const w of K)w.leaveGuards.forEach(D=>{G.push(Pn(D,k,I))});const ge=C.bind(null,k,I);return G.push(ge),hr(G).then(()=>{G=[];for(const w of a.list())G.push(Pn(w,k,I));return G.push(ge),hr(G)}).then(()=>{G=Ws(xe,"beforeRouteUpdate",k,I);for(const w of xe)w.updateGuards.forEach(D=>{G.push(Pn(D,k,I))});return G.push(ge),hr(G)}).then(()=>{G=[];for(const w of k.matched)if(w.beforeEnter&&!I.matched.includes(w))if(Array.isArray(w.beforeEnter))for(const D of w.beforeEnter)G.push(Pn(D,k,I));else G.push(Pn(w.beforeEnter,k,I));return G.push(ge),hr(G)}).then(()=>(k.matched.forEach(w=>w.enterCallbacks={}),G=Ws(le,"beforeRouteEnter",k,I),G.push(ge),hr(G))).then(()=>{G=[];for(const w of s.list())G.push(Pn(w,k,I));return G.push(ge),hr(G)}).catch(w=>An(w,8)?w:Promise.reject(w))}function F(k,I,G){for(const K of o.list())K(k,I,G)}function z(k,I,G,K,xe){const le=_(k,I);if(le)return le;const ge=I===Sn,w=dr?history.state:{};G&&(K||ge?i.replace(k.fullPath,Xe({scroll:ge&&w&&w.scroll},xe)):i.push(k.fullPath,xe)),c.value=k,J(k,I,G,ge),Q()}let q;function $(){q=i.listen((k,I,G)=>{const K=m(k),xe=T(K);if(xe){S(Xe(xe,{replace:!0}),K).catch(ai);return}u=K;const le=c.value;dr&&Av(Au(le.fullPath,G.delta),Ls()),R(K,le).catch(ge=>An(ge,12)?ge:An(ge,2)?(S(ge.to,K).then(w=>{An(w,20)&&!G.delta&&G.type===gi.pop&&i.go(-1,!1)}).catch(ai),Promise.reject()):(G.delta&&i.go(-G.delta,!1),H(ge,K,le))).then(ge=>{ge=ge||z(K,le,!1),ge&&(G.delta?i.go(-G.delta,!1):G.type===gi.pop&&An(ge,20)&&i.go(-1,!1)),F(K,le,ge)}).catch(ai)})}let te=$r(),L=$r(),A;function H(k,I,G){Q(k);const K=L.list();return K.length?K.forEach(xe=>xe(k,I,G)):console.error(k),Promise.reject(k)}function B(){return A&&c.value!==Sn?Promise.resolve():new Promise((k,I)=>{te.add([k,I])})}function Q(k){return A||(A=!k,$(),te.list().forEach(([I,G])=>k?G(k):I()),te.reset()),k}function J(k,I,G,K){const{scrollBehavior:xe}=e;if(!dr||!xe)return Promise.resolve();const le=!G&&Rv(Au(k.fullPath,0))||(K||!G)&&history.state&&history.state.scroll||null;return zl().then(()=>xe(k,I,le)).then(ge=>ge&&Sv(ge)).catch(ge=>H(ge,k,I))}const Z=k=>i.go(k);let ue;const de=new Set;return{currentRoute:c,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:x,replace:E,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:L.add,isReady:B,install(k){const I=this;k.component("RouterLink",fm),k.component("RouterView",vm),k.config.globalProperties.$router=I,Object.defineProperty(k.config.globalProperties,"$route",{enumerable:!0,get:()=>ri(c)}),dr&&!ue&&c.value===Sn&&(ue=!0,x(i.location).catch(xe=>{}));const G={};for(const xe in Sn)G[xe]=en(()=>c.value[xe]);k.provide(Ac,I),k.provide(gf,aa(G)),k.provide(mo,c);const K=k.unmount;de.add(k),k.unmount=function(){de.delete(k),de.size<1&&(u=Sn,q&&q(),c.value=Sn,ue=!1,A=!1),K()}}}}function hr(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function gm(e,t){const n=[],r=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const o=t.matched[s];o&&(e.matched.find(u=>Mr(u,o))?r.push(o):n.push(o));const c=e.matched[s];c&&(t.matched.find(u=>Mr(u,c))||i.push(c))}return[n,r,i]}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&function(){Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}}();function bn(){}Object.assign(bn.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners!==void 0){var n=this._listeners,r=n[e];if(r!==void 0){var i=r.indexOf(t);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(e){if(this._listeners!==void 0){var t=this._listeners,n=t[e.type];if(n!==void 0){e.target=this;for(var r=n.slice(0),i=0,a=r.length;i<a;i++)r[i].call(this,e)}}}});var ym="89",Xs={LEFT:0,MIDDLE:1,RIGHT:2},xm=0,La=1,Rf=2,_m=0,Pf=1,bm=2,oi=0,tr=1,Yr=2,Lf=1,Pc=0,Cf=1,qr=2,xo=0,sa=1,If=2,Of=3,Df=4,Ff=5,Nf=100,wm=101,Mm=102,Bu=103,zu=104,Em=200,Tm=201,Sm=202,Am=203,Uf=204,Bf=205,Rm=206,Pm=207,Lm=208,Cm=209,Im=210,Om=0,Dm=1,Fm=2,_o=3,Nm=4,Um=5,Bm=6,zm=7,Cs=0,Gm=1,Hm=2,js=0,zf=1,km=2,Vm=3,Wm=4,Lc=300,Cc=301,bo=302,Gf=303,wo=304,Hf=305,Ic=306,Oc=307,Ln=1e3,Nt=1001,Tr=1002,Ut=1003,Dc=1004,Fc=1005,St=1006,kf=1007,Is=1008,Nc=1009,Xm=1010,jm=1011,Ca=1012,Ym=1013,Vf=1014,yi=1015,Uc=1016,qm=1017,Zm=1018,Jm=1019,Ia=1020,Km=1021,xi=1022,zn=1023,Qm=1024,$m=1025,xr=1026,_i=1027,Gu=2001,Hu=2002,ku=2003,Vu=2004,Wu=2100,Xu=2101,ju=2102,Yu=2103,eg=2151,tg=2200,ng=2201,rg=2202,Oa=2300,Ma=2301,Ys=2302,Sr=2400,vr=2401,Da=2402,Wf=0,ig=1,ag=2,Fa=3e3,sg=3001,Xf=3007,og=3002,cg=3004,ug=3005,lg=3006,fg=3200,hg=3201,Ce={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var n=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0,a=Math.random()*4294967295|0;return e[n&255]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]+"-"+e[r&255]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[i&63|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[a&255]+e[a>>8&255]+e[a>>16&255]+e[a>>24&255]}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Ce.DEG2RAD},radToDeg:function(e){return e*Ce.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function se(e,t){this.x=e||0,this.y=t||0}Object.defineProperties(se.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(se.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new se,t=new se;return function(r,i){return e.set(r,r),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}});function Le(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Le.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,s,o,c,u,l,f,h,d,p,v){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=s,g[13]=o,g[2]=c,g[6]=u,g[10]=l,g[14]=f,g[3]=h,g[7]=d,g[11]=p,g[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Le().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new M;return function(n){var r=this.elements,i=n.elements,a=1/e.setFromMatrixColumn(n,0).length(),s=1/e.setFromMatrixColumn(n,1).length(),o=1/e.setFromMatrixColumn(n,2).length();return r[0]=i[0]*a,r[1]=i[1]*a,r[2]=i[2]*a,r[4]=i[4]*s,r[5]=i[5]*s,r[6]=i[6]*s,r[8]=i[8]*o,r[9]=i[9]*o,r[10]=i[10]*o,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if(e.order==="XYZ"){var f=a*u,h=a*l,d=s*u,p=s*l;t[0]=o*u,t[4]=-o*l,t[8]=c,t[1]=h+d*c,t[5]=f-p*c,t[9]=-s*o,t[2]=p-f*c,t[6]=d+h*c,t[10]=a*o}else if(e.order==="YXZ"){var v=o*u,g=o*l,m=c*u,y=c*l;t[0]=v+y*s,t[4]=m*s-g,t[8]=a*c,t[1]=a*l,t[5]=a*u,t[9]=-s,t[2]=g*s-m,t[6]=y+v*s,t[10]=a*o}else if(e.order==="ZXY"){var v=o*u,g=o*l,m=c*u,y=c*l;t[0]=v-y*s,t[4]=-a*l,t[8]=m+g*s,t[1]=g+m*s,t[5]=a*u,t[9]=y-v*s,t[2]=-a*c,t[6]=s,t[10]=a*o}else if(e.order==="ZYX"){var f=a*u,h=a*l,d=s*u,p=s*l;t[0]=o*u,t[4]=d*c-h,t[8]=f*c+p,t[1]=o*l,t[5]=p*c+f,t[9]=h*c-d,t[2]=-c,t[6]=s*o,t[10]=a*o}else if(e.order==="YZX"){var _=a*o,x=a*c,E=s*o,T=s*c;t[0]=o*u,t[4]=T-_*l,t[8]=E*l+x,t[1]=l,t[5]=a*u,t[9]=-s*u,t[2]=-c*u,t[6]=x*l+E,t[10]=_-T*l}else if(e.order==="XZY"){var _=a*o,x=a*c,E=s*o,T=s*c;t[0]=o*u,t[4]=-l,t[8]=c*u,t[1]=_*l+T,t[5]=a*u,t[9]=x*l-E,t[2]=E*l-x,t[6]=s*u,t[10]=T*l+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,i=e._z,a=e._w,s=n+n,o=r+r,c=i+i,u=n*s,l=n*o,f=n*c,h=r*o,d=r*c,p=i*c,v=a*s,g=a*o,m=a*c;return t[0]=1-(h+p),t[4]=l-m,t[8]=f+g,t[1]=l+m,t[5]=1-(u+p),t[9]=d-v,t[2]=f-g,t[6]=d+v,t[10]=1-(u+h),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new M,t=new M,n=new M;return function(i,a,s){var o=this.elements;return n.subVectors(i,a),n.lengthSq()===0&&(n.z=1),n.normalize(),e.crossVectors(s,n),e.lengthSq()===0&&(Math.abs(s.z)===1?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(s,n)),e.normalize(),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[4],o=n[8],c=n[12],u=n[1],l=n[5],f=n[9],h=n[13],d=n[2],p=n[6],v=n[10],g=n[14],m=n[3],y=n[7],_=n[11],x=n[15],E=r[0],T=r[4],S=r[8],C=r[12],R=r[1],F=r[5],z=r[9],q=r[13],$=r[2],te=r[6],L=r[10],A=r[14],H=r[3],B=r[7],Q=r[11],J=r[15];return i[0]=a*E+s*R+o*$+c*H,i[4]=a*T+s*F+o*te+c*B,i[8]=a*S+s*z+o*L+c*Q,i[12]=a*C+s*q+o*A+c*J,i[1]=u*E+l*R+f*$+h*H,i[5]=u*T+l*F+f*te+h*B,i[9]=u*S+l*z+f*L+h*Q,i[13]=u*C+l*q+f*A+h*J,i[2]=d*E+p*R+v*$+g*H,i[6]=d*T+p*F+v*te+g*B,i[10]=d*S+p*z+v*L+g*Q,i[14]=d*C+p*q+v*A+g*J,i[3]=m*E+y*R+_*$+x*H,i[7]=m*T+y*F+_*te+x*B,i[11]=m*S+y*z+_*L+x*Q,i[15]=m*C+y*q+_*A+x*J,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new M;return function(n){for(var r=0,i=n.count;r<i;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.applyMatrix4(this),n.setXYZ(r,e.x,e.y,e.z);return n}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],s=e[5],o=e[9],c=e[13],u=e[2],l=e[6],f=e[10],h=e[14],d=e[3],p=e[7],v=e[11],g=e[15];return d*(+i*o*l-r*c*l-i*s*f+n*c*f+r*s*h-n*o*h)+p*(+t*o*h-t*c*f+i*a*f-r*a*h+r*c*u-i*o*u)+v*(+t*c*l-t*s*h-i*a*l+n*a*h+i*s*u-n*c*u)+g*(-r*s*u-t*o*l+t*s*f+r*a*l-n*a*f+n*o*u)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[1],s=r[2],o=r[3],c=r[4],u=r[5],l=r[6],f=r[7],h=r[8],d=r[9],p=r[10],v=r[11],g=r[12],m=r[13],y=r[14],_=r[15],x=d*y*f-m*p*f+m*l*v-u*y*v-d*l*_+u*p*_,E=g*p*f-h*y*f-g*l*v+c*y*v+h*l*_-c*p*_,T=h*m*f-g*d*f+g*u*v-c*m*v-h*u*_+c*d*_,S=g*d*l-h*m*l-g*u*p+c*m*p+h*u*y-c*d*y,C=i*x+a*E+s*T+o*S;if(C===0){var R="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(R);return console.warn(R),this.identity()}var F=1/C;return n[0]=x*F,n[1]=(m*p*o-d*y*o-m*s*v+a*y*v+d*s*_-a*p*_)*F,n[2]=(u*y*o-m*l*o+m*s*f-a*y*f-u*s*_+a*l*_)*F,n[3]=(d*l*o-u*p*o-d*s*f+a*p*f+u*s*v-a*l*v)*F,n[4]=E*F,n[5]=(h*y*o-g*p*o+g*s*v-i*y*v-h*s*_+i*p*_)*F,n[6]=(g*l*o-c*y*o-g*s*f+i*y*f+c*s*_-i*l*_)*F,n[7]=(c*p*o-h*l*o+h*s*f-i*p*f-c*s*v+i*l*v)*F,n[8]=T*F,n[9]=(g*d*o-h*m*o-g*a*v+i*m*v+h*a*_-i*d*_)*F,n[10]=(c*m*o-g*u*o+g*a*f-i*m*f-c*a*_+i*u*_)*F,n[11]=(h*u*o-c*d*o-h*a*f+i*d*f+c*a*v-i*u*v)*F,n[12]=S*F,n[13]=(h*m*s-g*d*s+g*a*p-i*m*p-h*a*y+i*d*y)*F,n[14]=(g*u*s-c*m*s-g*a*l+i*m*l+c*a*y-i*u*y)*F,n[15]=(c*d*s-h*u*s+h*a*l-i*d*l-c*a*p+i*u*p)*F,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,s=e.y,o=e.z,c=i*a,u=i*s;return this.set(c*a+n,c*s-r*o,c*o+r*s,0,c*s+r*o,u*s+n,u*o-r*a,0,c*o-r*s,u*o+r*a,i*o*o+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new M,t=new Le;return function(r,i,a){var s=this.elements,o=e.set(s[0],s[1],s[2]).length(),c=e.set(s[4],s[5],s[6]).length(),u=e.set(s[8],s[9],s[10]).length(),l=this.determinant();l<0&&(o=-o),r.x=s[12],r.y=s[13],r.z=s[14],t.copy(this);var f=1/o,h=1/c,d=1/u;return t.elements[0]*=f,t.elements[1]*=f,t.elements[2]*=f,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,i.setFromRotationMatrix(t),a.x=o,a.y=c,a.z=u,this}}(),makePerspective:function(e,t,n,r,i,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,o=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return s[0]=o,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=l,s[13]=0,s[2]=0,s[6]=0,s[10]=f,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var s=this.elements,o=1/(t-e),c=1/(n-r),u=1/(a-i),l=(t+e)*o,f=(n+r)*c,h=(a+i)*u;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-f,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});function tt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=r!==void 0?r:1}Object.assign(tt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,s){var o=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(l!==p||o!==f||c!==h||u!==d){var v=1-s,g=o*f+c*h+u*d+l*p,m=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,g*m);v=Math.sin(v*x)/_,s=Math.sin(s*x)/_}var E=s*m;if(o=o*v+f*E,c=c*v+h*E,u=u*v+d*E,l=l*v+p*E,v===1-s){var T=1/Math.sqrt(o*o+c*c+u*u+l*l);o*=T,c*=T,u*=T,l*=T}}e[t]=o,e[t+1]=c,e[t+2]=u,e[t+3]=l}});Object.defineProperties(tt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}});Object.assign(tt.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,s=Math.cos,o=Math.sin,c=s(n/2),u=s(r/2),l=s(i/2),f=o(n/2),h=o(r/2),d=o(i/2);return a==="XYZ"?(this._x=f*u*l+c*h*d,this._y=c*h*l-f*u*d,this._z=c*u*d+f*h*l,this._w=c*u*l-f*h*d):a==="YXZ"?(this._x=f*u*l+c*h*d,this._y=c*h*l-f*u*d,this._z=c*u*d-f*h*l,this._w=c*u*l+f*h*d):a==="ZXY"?(this._x=f*u*l-c*h*d,this._y=c*h*l+f*u*d,this._z=c*u*d+f*h*l,this._w=c*u*l-f*h*d):a==="ZYX"?(this._x=f*u*l-c*h*d,this._y=c*h*l+f*u*d,this._z=c*u*d-f*h*l,this._w=c*u*l+f*h*d):a==="YZX"?(this._x=f*u*l+c*h*d,this._y=c*h*l+f*u*d,this._z=c*u*d-f*h*l,this._w=c*u*l-f*h*d):a==="XZY"&&(this._x=f*u*l-c*h*d,this._y=c*h*l-f*u*d,this._z=c*u*d+f*h*l,this._w=c*u*l+f*h*d),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],s=t[5],o=t[9],c=t[2],u=t[6],l=t[10],f=n+s+l,h;return f>0?(h=.5/Math.sqrt(f+1),this._w=.25/h,this._x=(u-o)*h,this._y=(i-c)*h,this._z=(a-r)*h):n>s&&n>l?(h=2*Math.sqrt(1+n-s-l),this._w=(u-o)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(i+c)/h):s>l?(h=2*Math.sqrt(1+s-n-l),this._w=(i-c)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(o+u)/h):(h=2*Math.sqrt(1+l-n-s),this._w=(a-r)/h,this._x=(i+c)/h,this._y=(o+u)/h,this._z=.25*h),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new M,t,n=1e-6;return function(i,a){return e===void 0&&(e=new M),t=i.dot(a)+1,t<n?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,a),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,s=t._x,o=t._y,c=t._z,u=t._w;return this._x=n*u+a*s+r*c-i*o,this._y=r*u+a*o+i*s-n*c,this._z=i*u+a*c+n*o-r*s,this._w=a*u-n*s-r*o-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,s=a*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var o=Math.sqrt(1-s*s);if(Math.abs(o)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var c=Math.atan2(o,s),u=Math.sin((1-t)*c)/o,l=Math.sin(t*c)/o;return this._w=a*u+this._w*l,this._x=n*u+this._x*l,this._y=r*u+this._y*l,this._z=i*u+this._z*l,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function M(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}Object.assign(M.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new tt;return function(n){return n&&n.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(n))}}(),applyAxisAngle:function(){var e=new tt;return function(n,r){return this.applyQuaternion(e.setFromAxisAngle(n,r))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,s=e.z,o=e.w,c=o*t+a*r-s*n,u=o*n+s*t-i*r,l=o*r+i*n-a*t,f=-i*t-a*n-s*r;return this.x=c*o+f*-i+u*-s-l*-a,this.y=u*o+f*-a+l*-i-c*-s,this.z=l*o+f*-s+c*-a-u*-i,this},project:function(){var e=new Le;return function(n){return e.multiplyMatrices(n.projectionMatrix,e.getInverse(n.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Le;return function(n){return e.multiplyMatrices(n.matrixWorld,e.getInverse(n.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new M,t=new M;return function(r,i){return e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-i*s,this.y=i*a-n*o,this.z=n*s-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new M;return function(n){return e.copy(this).projectOnVector(n),this.sub(e)}}(),reflect:function(){var e=new M;return function(n){return this.sub(e.copy(n).multiplyScalar(2*this.dot(n)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Ce.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});function Rt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Rt.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,s,o,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=s,u[3]=t,u[4]=i,u[5]=o,u[6]=n,u[7]=a,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new M;return function(n){for(var r=0,i=n.count;r<i;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.applyMatrix3(this),n.setXYZ(r,e.x,e.y,e.z);return n}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],s=n[3],o=n[6],c=n[1],u=n[4],l=n[7],f=n[2],h=n[5],d=n[8],p=r[0],v=r[3],g=r[6],m=r[1],y=r[4],_=r[7],x=r[2],E=r[5],T=r[8];return i[0]=a*p+s*m+o*x,i[3]=a*v+s*y+o*E,i[6]=a*g+s*_+o*T,i[1]=c*p+u*m+l*x,i[4]=c*v+u*y+l*E,i[7]=c*g+u*_+l*T,i[2]=f*p+h*m+d*x,i[5]=f*v+h*y+d*E,i[8]=f*g+h*_+d*T,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],o=e[6],c=e[7],u=e[8];return t*a*u-t*s*c-n*i*u+n*s*o+r*i*c-r*a*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],s=n[2],o=n[3],c=n[4],u=n[5],l=n[6],f=n[7],h=n[8],d=h*c-u*f,p=u*l-h*o,v=f*o-c*l,g=i*d+a*p+s*v;if(g===0){var m="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(t===!0)throw new Error(m);return console.warn(m),this.identity()}var y=1/g;return r[0]=d*y,r[1]=(s*f-h*a)*y,r[2]=(u*a-s*c)*y,r[3]=p*y,r[4]=(h*i-s*l)*y,r[5]=(s*o-u*i)*y,r[6]=v*y,r[7]=(a*l-f*i)*y,r[8]=(c*i-a*o)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,s){var o=Math.cos(i),c=Math.sin(i);this.set(n*o,n*c,-n*(o*a+c*s)+a+e,-r*c,r*o,-r*(-c*a+o*s)+s+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],s=r[6],o=r[1],c=r[4],u=r[7];return r[0]=t*i+n*o,r[3]=t*a+n*c,r[6]=t*s+n*u,r[1]=-n*i+t*o,r[4]=-n*a+t*c,r[7]=-n*s+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var dg=0;function Je(e,t,n,r,i,a,s,o,c,u){Object.defineProperty(this,"id",{value:dg++}),this.uuid=Ce.generateUUID(),this.name="",this.image=e!==void 0?e:Je.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:Je.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:Nt,this.wrapT=r!==void 0?r:Nt,this.magFilter=i!==void 0?i:St,this.minFilter=a!==void 0?a:Is,this.anisotropy=c!==void 0?c:1,this.format=s!==void 0?s:zn,this.type=o!==void 0?o:Nc,this.offset=new se(0,0),this.repeat=new se(1,1),this.center=new se(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u!==void 0?u:Fa,this.version=0,this.onUpdate=null}Je.DEFAULT_IMAGE=void 0;Je.DEFAULT_MAPPING=Lc;Je.prototype=Object.assign(Object.create(bn.prototype),{constructor:Je,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];function n(a){var s;if(a instanceof HTMLCanvasElement)s=a;else{s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),s.width=a.width,s.height=a.height;var o=s.getContext("2d");a instanceof ImageData?o.putImageData(a,0,0):o.drawImage(a,0,0,a.width,a.height)}return s.width>2048||s.height>2048?s.toDataURL("image/jpeg",.6):s.toDataURL("image/png")}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(this.image!==void 0){var i=this.image;i.uuid===void 0&&(i.uuid=Ce.generateUUID()),!t&&e.images[i.uuid]===void 0&&(e.images[i.uuid]={uuid:i.uuid,url:n(i)}),r.image=i.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===Lc){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ln:e.x=e.x-Math.floor(e.x);break;case Nt:e.x=e.x<0?0:1;break;case Tr:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ln:e.y=e.y-Math.floor(e.y);break;case Nt:e.y=e.y<0?0:1;break;case Tr:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}this.flipY&&(e.y=1-e.y)}}});Object.defineProperty(Je.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function qe(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=r!==void 0?r:1}Object.assign(qe.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=.01,s=.1,o=e.elements,c=o[0],u=o[4],l=o[8],f=o[1],h=o[5],d=o[9],p=o[2],v=o[6],g=o[10];if(Math.abs(u-f)<a&&Math.abs(l-p)<a&&Math.abs(d-v)<a){if(Math.abs(u+f)<s&&Math.abs(l+p)<s&&Math.abs(d+v)<s&&Math.abs(c+h+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;var m=(c+1)/2,y=(h+1)/2,_=(g+1)/2,x=(u+f)/4,E=(l+p)/4,T=(d+v)/4;return m>y&&m>_?m<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=x/n,i=E/n):y>_?y<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=x/r,i=T/r):_<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=E/i,r=T/i),this.set(n,r,i,t),this}var S=Math.sqrt((v-d)*(v-d)+(l-p)*(l-p)+(f-u)*(f-u));return Math.abs(S)<.001&&(S=1),this.x=(v-d)/S,this.y=(l-p)/S,this.z=(f-u)/S,this.w=Math.acos((c+h+g-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,i){return e===void 0&&(e=new qe,t=new qe),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}});function Ar(e,t,n){this.uuid=Ce.generateUUID(),this.width=e,this.height=t,this.scissor=new qe(0,0,e,t),this.scissorTest=!1,this.viewport=new qe(0,0,e,t),n=n||{},n.minFilter===void 0&&(n.minFilter=St),this.texture=new Je(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}Ar.prototype=Object.assign(Object.create(bn.prototype),{constructor:Ar,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function bi(e,t,n){Ar.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}bi.prototype=Object.create(Ar.prototype);bi.prototype.constructor=bi;bi.prototype.isWebGLRenderTargetCube=!0;function Rr(e,t,n,r,i,a,s,o,c,u,l,f){Je.call(this,null,a,s,o,c,u,r,i,l,f),this.image={data:e,width:t,height:n},this.magFilter=c!==void 0?c:Ut,this.minFilter=u!==void 0?u:Ut,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}Rr.prototype=Object.create(Je.prototype);Rr.prototype.constructor=Rr;Rr.prototype.isDataTexture=!0;function nr(e,t,n,r,i,a,s,o,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Cc,Je.call(this,e,t,n,r,i,a,s,o,c,u),this.flipY=!1}nr.prototype=Object.create(Je.prototype);nr.prototype.constructor=nr;nr.prototype.isCubeTexture=!0;Object.defineProperty(nr.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var jf=new Je,Yf=new nr;function qf(){this.seq=[],this.map={}}var qu=[],Zu=[],Ju=new Float32Array(16),Ku=new Float32Array(9);function Zr(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=qu[i];if(a===void 0&&(a=new Float32Array(i),qu[i]=a),t!==0){r.toArray(a,0);for(var s=1,o=0;s!==t;++s)o+=n,e[s].toArray(a,o)}return a}function Zf(e,t){var n=Zu[t];n===void 0&&(n=new Int32Array(t),Zu[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function pg(e,t){e.uniform1f(this.addr,t)}function vg(e,t){e.uniform1i(this.addr,t)}function mg(e,t){t.x===void 0?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function gg(e,t){t.x!==void 0?e.uniform3f(this.addr,t.x,t.y,t.z):t.r!==void 0?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function yg(e,t){t.x===void 0?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function xg(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function _g(e,t){t.elements===void 0?e.uniformMatrix3fv(this.addr,!1,t):(Ku.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Ku))}function bg(e,t){t.elements===void 0?e.uniformMatrix4fv(this.addr,!1,t):(Ju.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Ju))}function wg(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||jf,r)}function Mg(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||Yf,r)}function Jf(e,t){e.uniform2iv(this.addr,t)}function Kf(e,t){e.uniform3iv(this.addr,t)}function Qf(e,t){e.uniform4iv(this.addr,t)}function Eg(e){switch(e){case 5126:return pg;case 35664:return mg;case 35665:return gg;case 35666:return yg;case 35674:return xg;case 35675:return _g;case 35676:return bg;case 35678:case 36198:return wg;case 35680:return Mg;case 5124:case 35670:return vg;case 35667:case 35671:return Jf;case 35668:case 35672:return Kf;case 35669:case 35673:return Qf}}function Tg(e,t){e.uniform1fv(this.addr,t)}function Sg(e,t){e.uniform1iv(this.addr,t)}function Ag(e,t){e.uniform2fv(this.addr,Zr(t,this.size,2))}function Rg(e,t){e.uniform3fv(this.addr,Zr(t,this.size,3))}function Pg(e,t){e.uniform4fv(this.addr,Zr(t,this.size,4))}function Lg(e,t){e.uniformMatrix2fv(this.addr,!1,Zr(t,this.size,4))}function Cg(e,t){e.uniformMatrix3fv(this.addr,!1,Zr(t,this.size,9))}function Ig(e,t){e.uniformMatrix4fv(this.addr,!1,Zr(t,this.size,16))}function Og(e,t,n){var r=t.length,i=Zf(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2D(t[a]||jf,i[a])}function Dg(e,t,n){var r=t.length,i=Zf(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTextureCube(t[a]||Yf,i[a])}function Fg(e){switch(e){case 5126:return Tg;case 35664:return Ag;case 35665:return Rg;case 35666:return Pg;case 35674:return Lg;case 35675:return Cg;case 35676:return Ig;case 35678:return Og;case 35680:return Dg;case 5124:case 35670:return Sg;case 35667:case 35671:return Jf;case 35668:case 35672:return Kf;case 35669:case 35673:return Qf}}function Ng(e,t,n){this.id=e,this.addr=n,this.setValue=Eg(t.type)}function Ug(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=Fg(t.type)}function $f(e){this.id=e,qf.call(this)}$f.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var a=n[r];a.setValue(e,t[a.id])}};var qs=/([\w\d_]+)(\])?(\[|\.)?/g;function Qu(e,t){e.seq.push(t),e.map[t.id]=t}function Bg(e,t,n){var r=e.name,i=r.length;for(qs.lastIndex=0;;){var a=qs.exec(r),s=qs.lastIndex,o=a[1],c=a[2]==="]",u=a[3];if(c&&(o=o|0),u===void 0||u==="["&&s+2===i){Qu(n,u===void 0?new Ng(o,e,t):new Ug(o,e,t));break}else{var l=n.map,f=l[o];f===void 0&&(f=new $f(o),Qu(n,f)),n=f}}}function rr(e,t,n){qf.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=e.getActiveUniform(t,i),s=a.name,o=e.getUniformLocation(t,s);Bg(a,o,this)}}rr.prototype.setValue=function(e,t,n){var r=this.map[t];r!==void 0&&r.setValue(e,n,this.renderer)};rr.prototype.setOptional=function(e,t,n){var r=t[n];r!==void 0&&this.setValue(e,n,r)};rr.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var s=t[i],o=n[s.id];o.needsUpdate!==!1&&s.setValue(e,o.value,r)}};rr.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var zg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function we(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}Object.assign(we.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(n-t)*6*r:r<1/2?n:r<2/3?t+(n-t)*6*(2/3-r):t}return function(n,r,i){if(n=Ce.euclideanModulo(n,1),r=Ce.clamp(r,0,1),i=Ce.clamp(i,0,1),r===0)this.r=this.g=this.b=i;else{var a=i<=.5?i*(1+r):i+r-i*r,s=2*i-a;this.r=e(s,a,n+1/3),this.g=e(s,a,n),this.b=e(s,a,n-1/3)}return this}}(),setStyle:function(e){function t(f){f!==void 0&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(s,o,c)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=n[1],l=u.length;if(l===3)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(l===6)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=zg[e];u!==void 0?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,r=this.g,i=this.b,a=Math.max(n,r,i),s=Math.min(n,r,i),o,c,u=(s+a)/2;if(s===a)o=0,c=0;else{var l=a-s;switch(c=u<=.5?l/(a+s):l/(2-a-s),a){case n:o=(r-i)/l+(r<i?6:0);break;case r:o=(i-n)/l+2;break;case i:o=(n-r)/l+4;break}o/=6}return t.h=o,t.s=c,t.l=u,t},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var Te={common:{diffuse:{value:new we(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Rt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new se(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new we(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new we(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Rt}}},Tt={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e){t[n]={};for(var r in e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}},Gg=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif
`,Hg=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif
`,kg=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif
`,Vg=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif
`,Wg=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Xg=`
vec3 transformed = vec3( position );
`,jg=`
vec3 objectNormal = vec3( normal );
`,Yg=`float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	if( decayExponent > 0.0 ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		return distanceFalloff * maxDistanceCutoffFactor;
#else
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
#endif
	}
	return 1.0;
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float theta = acos( dot( N, V ) );
	vec2 uv = vec2(
		sqrt( saturate( roughness ) ),
		saturate( theta / ( 0.5 * PI ) ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.86267 + (0.49788 + 0.01436 * y ) * y;
	float b = 3.45068 + (4.18814 + y) * y;
	float v = a / b;
	float theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	vec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );
	return result;
}
vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
	return specularColor * AB.x + AB.y;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
`,qg=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif
`,Zg=`#if NUM_CLIPPING_PLANES > 0
	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
		vec4 plane = clippingPlanes[ i ];
		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
	}
		
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
			vec4 plane = clippingPlanes[ i ];
			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
		}
		if ( clipped ) discard;
	
	#endif
#endif
`,Jg=`#if NUM_CLIPPING_PLANES > 0
	#if ! defined( PHYSICAL ) && ! defined( PHONG )
		varying vec3 vViewPosition;
	#endif
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif
`,Kg=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	varying vec3 vViewPosition;
#endif
`,Qg=`#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )
	vViewPosition = - mvPosition.xyz;
#endif
`,$g=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,ey=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif
`,ty=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,ny=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,ry=`#define PI 3.14159265359
#define PI2 6.28318530718
#define PI_HALF 1.5707963267949
#define RECIPROCAL_PI 0.31830988618
#define RECIPROCAL_PI2 0.15915494
#define LOG2 1.442695
#define EPSILON 1e-6
#define saturate(a) clamp( a, 0.0, 1.0 )
#define whiteCompliment(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
`,iy=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_textureSize (1024.0)
int getFaceFromDirection(vec3 direction) {
	vec3 absDirection = abs(direction);
	int face = -1;
	if( absDirection.x > absDirection.z ) {
		if(absDirection.x > absDirection.y )
			face = direction.x > 0.0 ? 0 : 3;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	else {
		if(absDirection.z > absDirection.y )
			face = direction.z > 0.0 ? 2 : 5;
		else
			face = direction.y > 0.0 ? 1 : 4;
	}
	return face;
}
#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
	float dxRoughness = dFdx(roughness);
	float dyRoughness = dFdy(roughness);
	vec3 dx = dFdx( vec * scale * dxRoughness );
	vec3 dy = dFdy( vec * scale * dyRoughness );
	float d = max( dot( dx, dx ), dot( dy, dy ) );
	d = clamp(d, 1.0, cubeUV_rangeClamp);
	float mipLevel = 0.5 * log2(d);
	return vec2(floor(mipLevel), fract(mipLevel));
}
#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
	float a = 16.0 * cubeUV_rcpTextureSize;
	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
	float powScale = exp2_packed.x * exp2_packed.y;
	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
	bool bRes = mipLevel == 0.0;
	scale =  bRes && (scale < a) ? a : scale;
	vec3 r;
	vec2 offset;
	int face = getFaceFromDirection(direction);
	float rcpPowScale = 1.0 / powScale;
	if( face == 0) {
		r = vec3(direction.x, -direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 1) {
		r = vec3(direction.y, direction.x, direction.z);
		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 2) {
		r = vec3(direction.z, direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
	}
	else if( face == 3) {
		r = vec3(direction.x, direction.z, direction.y);
		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else if( face == 4) {
		r = vec3(direction.y, direction.x, -direction.z);
		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	else {
		r = vec3(direction.z, -direction.x, direction.y);
		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
	}
	r = normalize(r);
	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
	vec2 base = offset + vec2( texelOffset );
	return base + s * ( scale - 2.0 * texelOffset );
}
#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
	float roughnessVal = roughness* cubeUV_maxLods3;
	float r1 = floor(roughnessVal);
	float r2 = r1 + 1.0;
	float t = fract(roughnessVal);
	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
	float s = mipInfo.y;
	float level0 = mipInfo.x;
	float level1 = level0 + 1.0;
	level1 = level1 > 5.0 ? 5.0 : level1;
	level0 += min( floor( s + 0.5 ), 5.0 );
	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
	vec4 result = mix(color10, color20, t);
	return vec4(result.rgb, 1.0);
}
#endif
`,ay=`vec3 transformedNormal = normalMatrix * objectNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
`,sy=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif
`,oy=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );
#endif
`,cy=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif
`,uy=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif
`,ly=`  gl_FragColor = linearToOutputTexel( gl_FragColor );
`,fy=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.xyz * value.w * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M            = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.x, max( value.g, value.b ) );
	float D      = max( maxRange / maxRGB, 1.0 );
	D            = min( floor( D ) / 255.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract(Le);
	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
	return vec4( max(vRGB, 0.0), 1.0 );
}
`,hy=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToVertex, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		vec2 sampleUV;
		reflectVec = normalize( reflectVec );
		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
		vec4 envColor = texture2D( envMap, sampleUV );
	#elif defined( ENVMAP_TYPE_SPHERE )
		reflectVec = normalize( reflectVec );
		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );
		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	envColor = envMapTexelToLinear( envColor );
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif
`,dy=`#if defined( USE_ENVMAP ) || defined( PHYSICAL )
	uniform float reflectivity;
	uniform float envMapIntensity;
#endif
#ifdef USE_ENVMAP
	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
		varying vec3 vWorldPosition;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	uniform float flipEnvMap;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif
`,py=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif
`,vy=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif
`,my=`
#ifdef USE_FOG
fogDepth = -mvPosition.z;
#endif`,gy=`#ifdef USE_FOG
  varying float fogDepth;
#endif
`,yy=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif
`,xy=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif
`,_y=`#ifdef TOON
	uniform sampler2D gradientMap;
	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
		float dotNL = dot( normal, lightDirection );
		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
		#ifdef USE_GRADIENTMAP
			return texture2D( gradientMap, coord ).rgb;
		#else
			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
		#endif
	}
#endif
`,by=`#ifdef USE_LIGHTMAP
	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
#endif
`,wy=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,My=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
#endif
#if NUM_HEMI_LIGHTS > 0
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
#endif
`,Ey=`uniform vec3 ambientLightColor;
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
		float shadowCameraNear;
		float shadowCameraFar;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
		int shadow;
		float shadowBias;
		float shadowRadius;
		vec2 shadowMapSize;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif
#if defined( USE_ENVMAP ) && defined( PHYSICAL )
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
		#else
			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV;
			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_SPHERE )
			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif
`,Ty=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;
`,Sy=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	#ifdef TOON
		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#else
		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
		vec3 irradiance = dotNL * directLight.color;
	#endif
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)
`,Ay=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
#ifdef STANDARD
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
#endif
`,Ry=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
	#ifndef STANDARD
		float clearCoat;
		float clearCoatRoughness;
	#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		float norm = texture2D( ltcMag, uv ).a;
		vec4 t = texture2D( ltcMat, uv );
		mat3 mInv = mat3(
			vec3(   1,   0, t.y ),
			vec3(   0, t.z,   0 ),
			vec3( t.w,   0, t.x )
		);
		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifndef STANDARD
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	#ifndef STANDARD
		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	#ifndef STANDARD
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		float dotNL = dotNV;
		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
	#else
		float clearCoatDHR = 0.0;
	#endif
	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
	#ifndef STANDARD
		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
	#endif
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}
`,Py=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = normalize( vViewPosition );
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#ifdef USE_SHADOWMAP
		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
#endif
#if defined( RE_IndirectDiffuse )
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#ifdef USE_LIGHTMAP
		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
	#endif
	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
	#endif
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
	#ifndef STANDARD
		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
	#else
		vec3 clearCoatRadiance = vec3( 0.0 );
	#endif
	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
#endif
`,Ly=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cy=`#ifdef USE_LOGDEPTHBUF
	uniform float logDepthBufFC;
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
#endif
`,Iy=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
	#endif
	uniform float logDepthBufFC;
#endif`,Oy=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
	#else
		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
		gl_Position.z *= gl_Position.w;
	#endif
#endif
`,Dy=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif
`,Fy=`#ifdef USE_MAP
	uniform sampler2D map;
#endif
`,Ny=`#ifdef USE_MAP
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
`,Uy=`#ifdef USE_MAP
	uniform mat3 uvTransform;
	uniform sampler2D map;
#endif
`,By=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif
`,zy=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Gy=`#ifdef USE_MORPHNORMALS
	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];
	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];
	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];
	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];
#endif
`,Hy=`#ifdef USE_MORPHTARGETS
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,ky=`#ifdef USE_MORPHTARGETS
	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];
	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];
	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];
	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];
	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];
	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];
	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];
	#endif
#endif
`,Vy=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
#endif
#ifdef USE_NORMALMAP
	normal = perturbNormal2Arb( -vViewPosition, normal );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif
`,Wy=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
		vec3 N = normalize( surf_norm );
		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
		mapN.xy = normalScale * mapN.xy;
		mat3 tsn = mat3( S, T, N );
		return normalize( tsn * mapN );
	}
#endif
`,Xy=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}
`,jy=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif
`,Yy=`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
gl_Position = projectionMatrix * mvPosition;
`,qy=`#if defined( DITHERING )
  gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif
`,Zy=`#if defined( DITHERING )
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif
`,Jy=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif
`,Ky=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qy=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
		const vec2 offset = vec2( 0.0, 1.0 );
		vec2 texelSize = vec2( 1.0 ) / size;
		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
		vec2 f = fract( uv * size + 0.5 );
		float a = mix( lb, lt, f.y );
		float b = mix( rb, rt, f.y );
		float c = mix( a, b, f.x );
		return c;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			shadow = (
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 9.0 );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif
`,$y=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];
	#endif
	#if NUM_SPOT_LIGHTS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];
	#endif
	#if NUM_POINT_LIGHTS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];
	#endif
#endif
`,e0=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;
	}
	#endif
#endif
`,t0=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHTS > 0
	DirectionalLight directionalLight;
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_SPOT_LIGHTS > 0
	SpotLight spotLight;
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#endif
	#if NUM_POINT_LIGHTS > 0
	PointLight pointLight;
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#endif
	#endif
	return shadow;
}
`,n0=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,r0=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif
`,i0=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif
`,a0=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
#endif
`,s0=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,o0=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,c0=`#if defined( TONE_MAPPING )
  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif
`,u0=`#ifndef saturate
	#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
uniform float toneMappingWhitePoint;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
vec3 Uncharted2ToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
`,l0=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
#endif`,f0=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
`,h0=`#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,d0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,p0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
#endif`,v0=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = uv2;
#endif`,m0=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
#endif
`,g0=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldPosition;
void main() {
	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );
	gl_FragColor.a *= opacity;
}
`,y0=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}
`,x0=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );
	#endif
}
`,_0=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
}
`,b0=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}
`,w0=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}
`,M0=`uniform sampler2D tEquirect;
varying vec3 vWorldPosition;
#include <common>
void main() {
	vec3 direction = normalize( vWorldPosition );
	vec2 sampleUV;
	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;
	gl_FragColor = texture2D( tEquirect, sampleUV );
}
`,E0=`varying vec3 vWorldPosition;
#include <common>
void main() {
	vWorldPosition = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}
`,T0=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,S0=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	vLineDistance = scale * lineDistance;
	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}
`,A0=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,R0=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}
`,P0=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,L0=`#define LAMBERT
varying vec3 vLightFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,C0=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,I0=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,O0=`#define PHYSICAL
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifndef STANDARD
	uniform float clearCoat;
	uniform float clearCoatRoughness;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <lights_pars>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_template>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`,D0=`#define PHYSICAL
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,F0=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	#include <normal_fragment>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}
`,N0=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}
`,U0=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <packing>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <premultiplied_alpha_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}
`,B0=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <project_vertex>
	#ifdef USE_SIZEATTENUATION
		gl_PointSize = size * ( scale / - mvPosition.z );
	#else
		gl_PointSize = size;
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,z0=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <fog_fragment>
}
`,G0=`#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,We={alphamap_fragment:Gg,alphamap_pars_fragment:Hg,alphatest_fragment:kg,aomap_fragment:Vg,aomap_pars_fragment:Wg,begin_vertex:Xg,beginnormal_vertex:jg,bsdfs:Yg,bumpmap_pars_fragment:qg,clipping_planes_fragment:Zg,clipping_planes_pars_fragment:Jg,clipping_planes_pars_vertex:Kg,clipping_planes_vertex:Qg,color_fragment:$g,color_pars_fragment:ey,color_pars_vertex:ty,color_vertex:ny,common:ry,cube_uv_reflection_fragment:iy,defaultnormal_vertex:ay,displacementmap_pars_vertex:sy,displacementmap_vertex:oy,emissivemap_fragment:cy,emissivemap_pars_fragment:uy,encodings_fragment:ly,encodings_pars_fragment:fy,envmap_fragment:hy,envmap_pars_fragment:dy,envmap_pars_vertex:py,envmap_vertex:vy,fog_vertex:my,fog_pars_vertex:gy,fog_fragment:yy,fog_pars_fragment:xy,gradientmap_pars_fragment:_y,lightmap_fragment:by,lightmap_pars_fragment:wy,lights_lambert_vertex:My,lights_pars:Ey,lights_phong_fragment:Ty,lights_phong_pars_fragment:Sy,lights_physical_fragment:Ay,lights_physical_pars_fragment:Ry,lights_template:Py,logdepthbuf_fragment:Ly,logdepthbuf_pars_fragment:Cy,logdepthbuf_pars_vertex:Iy,logdepthbuf_vertex:Oy,map_fragment:Dy,map_pars_fragment:Fy,map_particle_fragment:Ny,map_particle_pars_fragment:Uy,metalnessmap_fragment:By,metalnessmap_pars_fragment:zy,morphnormal_vertex:Gy,morphtarget_pars_vertex:Hy,morphtarget_vertex:ky,normal_fragment:Vy,normalmap_pars_fragment:Wy,packing:Xy,premultiplied_alpha_fragment:jy,project_vertex:Yy,dithering_fragment:qy,dithering_pars_fragment:Zy,roughnessmap_fragment:Jy,roughnessmap_pars_fragment:Ky,shadowmap_pars_fragment:Qy,shadowmap_pars_vertex:$y,shadowmap_vertex:e0,shadowmask_pars_fragment:t0,skinbase_vertex:n0,skinning_pars_vertex:r0,skinning_vertex:i0,skinnormal_vertex:a0,specularmap_fragment:s0,specularmap_pars_fragment:o0,tonemapping_fragment:c0,tonemapping_pars_fragment:u0,uv_pars_fragment:l0,uv_pars_vertex:f0,uv_vertex:h0,uv2_pars_fragment:d0,uv2_pars_vertex:p0,uv2_vertex:v0,worldpos_vertex:m0,cube_frag:g0,cube_vert:y0,depth_frag:x0,depth_vert:_0,distanceRGBA_frag:b0,distanceRGBA_vert:w0,equirect_frag:M0,equirect_vert:E0,linedashed_frag:T0,linedashed_vert:S0,meshbasic_frag:A0,meshbasic_vert:R0,meshlambert_frag:P0,meshlambert_vert:L0,meshphong_frag:C0,meshphong_vert:I0,meshphysical_frag:O0,meshphysical_vert:D0,normal_frag:F0,normal_vert:N0,points_frag:U0,points_vert:B0,shadow_frag:z0,shadow_vert:G0},_r={basic:{uniforms:Tt.merge([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.fog]),vertexShader:We.meshbasic_vert,fragmentShader:We.meshbasic_frag},lambert:{uniforms:Tt.merge([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.fog,Te.lights,{emissive:{value:new we(0)}}]),vertexShader:We.meshlambert_vert,fragmentShader:We.meshlambert_frag},phong:{uniforms:Tt.merge([Te.common,Te.specularmap,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.gradientmap,Te.fog,Te.lights,{emissive:{value:new we(0)},specular:{value:new we(1118481)},shininess:{value:30}}]),vertexShader:We.meshphong_vert,fragmentShader:We.meshphong_frag},standard:{uniforms:Tt.merge([Te.common,Te.envmap,Te.aomap,Te.lightmap,Te.emissivemap,Te.bumpmap,Te.normalmap,Te.displacementmap,Te.roughnessmap,Te.metalnessmap,Te.fog,Te.lights,{emissive:{value:new we(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:We.meshphysical_vert,fragmentShader:We.meshphysical_frag},points:{uniforms:Tt.merge([Te.points,Te.fog]),vertexShader:We.points_vert,fragmentShader:We.points_frag},dashed:{uniforms:Tt.merge([Te.common,Te.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:We.linedashed_vert,fragmentShader:We.linedashed_frag},depth:{uniforms:Tt.merge([Te.common,Te.displacementmap]),vertexShader:We.depth_vert,fragmentShader:We.depth_frag},normal:{uniforms:Tt.merge([Te.common,Te.bumpmap,Te.normalmap,Te.displacementmap,{opacity:{value:1}}]),vertexShader:We.normal_vert,fragmentShader:We.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:We.cube_vert,fragmentShader:We.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:We.equirect_vert,fragmentShader:We.equirect_frag},distanceRGBA:{uniforms:Tt.merge([Te.common,Te.displacementmap,{referencePosition:{value:new M},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:We.distanceRGBA_vert,fragmentShader:We.distanceRGBA_frag},shadow:{uniforms:Tt.merge([Te.lights,Te.fog,{color:{value:new we(0)},opacity:{value:1}}]),vertexShader:We.shadow_vert,fragmentShader:We.shadow_frag}};_r.physical={uniforms:Tt.merge([_r.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:We.meshphysical_vert,fragmentShader:We.meshphysical_frag};function Bc(e,t){this.min=e!==void 0?e:new se(1/0,1/0),this.max=t!==void 0?t:new se(-1/0,-1/0)}Object.assign(Bc.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new se;return function(n,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(i),this.max.copy(n).add(i),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new se;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new se;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var n=t||new se;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var n=t||new se;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new se;return function(n){var r=e.copy(n).clamp(this.min,this.max);return r.sub(n).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function H0(e,t,n,r,i){var a,s,o,c,u,l,f,h;function d(){var v=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),g=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,v,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,g,t.STATIC_DRAW),f=t.createTexture(),h=t.createTexture(),n.bindTexture(t.TEXTURE_2D,f),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),n.bindTexture(t.TEXTURE_2D,h),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),o={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","	vUV = uv;","	vec2 pos = position;","	if ( renderType == 2 ) {","		vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","		visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","		visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","		visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","		visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","		visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","		visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","		visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","		visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","		vVisibility =        visibility.r / 9.0;","		vVisibility *= 1.0 - visibility.g / 9.0;","		vVisibility *=       visibility.b / 9.0;","		vVisibility *= 1.0 - visibility.a / 9.0;","		pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","		pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","	}","	gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join(`
`),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","	if ( renderType == 0 ) {","		gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","	} else if ( renderType == 1 ) {","		gl_FragColor = texture2D( map, vUV );","	} else {","		vec4 texture = texture2D( map, vUV );","		texture.a *= opacity * vVisibility;","		gl_FragColor = texture;","		gl_FragColor.rgb *= color;","	}","}"].join(`
`)},c=p(o),u={vertex:t.getAttribLocation(c,"position"),uv:t.getAttribLocation(c,"uv")},l={renderType:t.getUniformLocation(c,"renderType"),map:t.getUniformLocation(c,"map"),occlusionMap:t.getUniformLocation(c,"occlusionMap"),opacity:t.getUniformLocation(c,"opacity"),color:t.getUniformLocation(c,"color"),scale:t.getUniformLocation(c,"scale"),rotation:t.getUniformLocation(c,"rotation"),screenPosition:t.getUniformLocation(c,"screenPosition")}}this.render=function(v,g,m,y){if(v.length!==0){var _=new M,x=y.w/y.z,E=y.z*.5,T=y.w*.5,S=16/y.w,C=new se(S*x,S),R=new M(1,1,0),F=new se(1,1),z=new Bc;z.min.set(y.x,y.y),z.max.set(y.x+(y.z-16),y.y+(y.w-16)),c===void 0&&d(),n.useProgram(c),n.initAttributes(),n.enableAttribute(u.vertex),n.enableAttribute(u.uv),n.disableUnusedAttributes(),t.uniform1i(l.occlusionMap,0),t.uniform1i(l.map,1),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(u.vertex,2,t.FLOAT,!1,2*8,0),t.vertexAttribPointer(u.uv,2,t.FLOAT,!1,2*8,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),n.disable(t.CULL_FACE),n.buffers.depth.setMask(!1);for(var q=0,$=v.length;q<$;q++){S=16/y.w,C.set(S*x,S);var te=v[q];if(_.set(te.matrixWorld.elements[12],te.matrixWorld.elements[13],te.matrixWorld.elements[14]),_.applyMatrix4(m.matrixWorldInverse),_.applyMatrix4(m.projectionMatrix),R.copy(_),F.x=y.x+R.x*E+E-8,F.y=y.y+R.y*T+T-8,z.containsPoint(F)===!0){n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,null),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,f),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,F.x,F.y,16,16,0),t.uniform1i(l.renderType,0),t.uniform2f(l.scale,C.x,C.y),t.uniform3f(l.screenPosition,R.x,R.y,R.z),n.disable(t.BLEND),n.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,h),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,F.x,F.y,16,16,0),t.uniform1i(l.renderType,1),n.disable(t.DEPTH_TEST),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,f),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),te.positionScreen.copy(R),te.customUpdateCallback?te.customUpdateCallback(te):te.updateLensFlares(),t.uniform1i(l.renderType,2),n.enable(t.BLEND);for(var L=0,A=te.lensFlares.length;L<A;L++){var H=te.lensFlares[L];H.opacity>.001&&H.scale>.001&&(R.x=H.x,R.y=H.y,R.z=H.z,S=H.size*H.scale/y.w,C.x=S*x,C.y=S,t.uniform3f(l.screenPosition,R.x,R.y,R.z),t.uniform2f(l.scale,C.x,C.y),t.uniform1f(l.rotation,H.rotation),t.uniform1f(l.opacity,H.opacity),t.uniform3f(l.color,H.color.r,H.color.g,H.color.b),n.setBlending(H.blending,H.blendEquation,H.blendSrc,H.blendDst),r.setTexture2D(H.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}}n.enable(t.CULL_FACE),n.enable(t.DEPTH_TEST),n.buffers.depth.setMask(!0),n.reset()}};function p(v){var g=t.createProgram(),m=t.createShader(t.FRAGMENT_SHADER),y=t.createShader(t.VERTEX_SHADER),_="precision "+i.precision+` float;
`;return t.shaderSource(m,_+v.fragmentShader),t.shaderSource(y,_+v.vertexShader),t.compileShader(m),t.compileShader(y),t.attachShader(g,m),t.attachShader(g,y),t.linkProgram(g),g}}function Na(e,t,n,r,i,a,s,o,c){Je.call(this,e,t,n,r,i,a,s,o,c),this.needsUpdate=!0}Na.prototype=Object.create(Je.prototype);Na.prototype.constructor=Na;function k0(e,t,n,r,i){var a,s,o,c,u,l,f=new M,h=new tt,d=new M;function p(){var m=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),y=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,m,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,y,t.STATIC_DRAW),o=v(),c={position:t.getAttribLocation(o,"position"),uv:t.getAttribLocation(o,"uv")},u={uvOffset:t.getUniformLocation(o,"uvOffset"),uvScale:t.getUniformLocation(o,"uvScale"),rotation:t.getUniformLocation(o,"rotation"),scale:t.getUniformLocation(o,"scale"),color:t.getUniformLocation(o,"color"),map:t.getUniformLocation(o,"map"),opacity:t.getUniformLocation(o,"opacity"),modelViewMatrix:t.getUniformLocation(o,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(o,"projectionMatrix"),fogType:t.getUniformLocation(o,"fogType"),fogDensity:t.getUniformLocation(o,"fogDensity"),fogNear:t.getUniformLocation(o,"fogNear"),fogFar:t.getUniformLocation(o,"fogFar"),fogColor:t.getUniformLocation(o,"fogColor"),fogDepth:t.getUniformLocation(o,"fogDepth"),alphaTest:t.getUniformLocation(o,"alphaTest")};var _=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");_.width=8,_.height=8;var x=_.getContext("2d");x.fillStyle="white",x.fillRect(0,0,8,8),l=new Na(_)}this.render=function(m,y,_){if(m.length!==0){o===void 0&&p(),n.useProgram(o),n.initAttributes(),n.enableAttribute(c.position),n.enableAttribute(c.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(c.position,2,t.FLOAT,!1,2*8,0),t.vertexAttribPointer(c.uv,2,t.FLOAT,!1,2*8,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.uniformMatrix4fv(u.projectionMatrix,!1,_.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(u.map,0);var x=0,E=0,T=y.fog;T?(t.uniform3f(u.fogColor,T.color.r,T.color.g,T.color.b),T.isFog?(t.uniform1f(u.fogNear,T.near),t.uniform1f(u.fogFar,T.far),t.uniform1i(u.fogType,1),x=1,E=1):T.isFogExp2&&(t.uniform1f(u.fogDensity,T.density),t.uniform1i(u.fogType,2),x=2,E=2)):(t.uniform1i(u.fogType,0),x=0,E=0);for(var S=0,C=m.length;S<C;S++){var R=m[S];R.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,R.matrixWorld),R.z=-R.modelViewMatrix.elements[14]}m.sort(g);for(var F=[],S=0,C=m.length;S<C;S++){var R=m[S],z=R.material;if(z.visible!==!1){R.onBeforeRender(e,y,_,void 0,z,void 0),t.uniform1f(u.alphaTest,z.alphaTest),t.uniformMatrix4fv(u.modelViewMatrix,!1,R.modelViewMatrix.elements),R.matrixWorld.decompose(f,h,d),F[0]=d.x,F[1]=d.y;var q=0;y.fog&&z.fog&&(q=E),x!==q&&(t.uniform1i(u.fogType,q),x=q),z.map!==null?(t.uniform2f(u.uvOffset,z.map.offset.x,z.map.offset.y),t.uniform2f(u.uvScale,z.map.repeat.x,z.map.repeat.y)):(t.uniform2f(u.uvOffset,0,0),t.uniform2f(u.uvScale,1,1)),t.uniform1f(u.opacity,z.opacity),t.uniform3f(u.color,z.color.r,z.color.g,z.color.b),t.uniform1f(u.rotation,z.rotation),t.uniform2fv(u.scale,F),n.setBlending(z.blending,z.blendEquation,z.blendSrc,z.blendDst,z.blendEquationAlpha,z.blendSrcAlpha,z.blendDstAlpha,z.premultipliedAlpha),n.buffers.depth.setTest(z.depthTest),n.buffers.depth.setMask(z.depthWrite),n.buffers.color.setMask(z.colorWrite),r.setTexture2D(z.map||l,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),R.onAfterRender(e,y,_,void 0,z,void 0)}}n.enable(t.CULL_FACE),n.reset()}};function v(){var m=t.createProgram(),y=t.createShader(t.VERTEX_SHADER),_=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(y,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","	vUV = uvOffset + uv * uvScale;","	vec2 alignedPosition = position * scale;","	vec2 rotatedPosition;","	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","	vec4 mvPosition;","	mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","	mvPosition.xy += rotatedPosition;","	gl_Position = projectionMatrix * mvPosition;","	fogDepth = - mvPosition.z;","}"].join(`
`)),t.shaderSource(_,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","	vec4 texture = texture2D( map, vUV );","	gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","	if ( gl_FragColor.a < alphaTest ) discard;","	if ( fogType > 0 ) {","		float fogFactor = 0.0;","		if ( fogType == 1 ) {","			fogFactor = smoothstep( fogNear, fogFar, fogDepth );","		} else {","			const float LOG2 = 1.442695;","			fogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","			fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","		}","		gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","	}","}"].join(`
`)),t.compileShader(y),t.compileShader(_),t.attachShader(m,y),t.attachShader(m,_),t.linkProgram(m),m}function g(m,y){return m.renderOrder!==y.renderOrder?m.renderOrder-y.renderOrder:m.z!==y.z?y.z-m.z:y.id-m.id}}var V0=0;function Fe(){Object.defineProperty(this,"id",{value:V0++}),this.uuid=Ce.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=sa,this.side=oi,this.flatShading=!1,this.vertexColors=Pc,this.opacity=1,this.transparent=!1,this.blendSrc=Uf,this.blendDst=Bf,this.blendEquation=Nf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=_o,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}Fe.prototype=Object.assign(Object.create(bn.prototype),{constructor:Fe,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(e!==void 0)for(var t in e){var n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Lf;continue}var r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):t==="overdraw"?this[t]=Number(n):this[t]=n}},toJSON:function(e){var t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearCoat!==void 0&&(n.clearCoat=this.clearCoat),this.clearCoatRoughness!==void 0&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==sa&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==oi&&(n.side=this.side),this.vertexColors!==Pc&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.rotation!==0&&(n.rotation=this.rotation),this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(s){var o=[];for(var c in s){var u=s[c];delete u.metadata,o.push(u)}return o}if(t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(t!==null){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function ir(e){Fe.call(this),this.type="MeshDepthMaterial",this.depthPacking=fg,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}ir.prototype=Object.create(Fe.prototype);ir.prototype.constructor=ir;ir.prototype.isMeshDepthMaterial=!0;ir.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function ar(e){Fe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new M,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}ar.prototype=Object.create(Fe.prototype);ar.prototype.constructor=ar;ar.prototype.isMeshDistanceMaterial=!0;ar.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};function Gn(e,t){this.min=e!==void 0?e:new M(1/0,1/0,1/0),this.max=t!==void 0?t:new M(-1/0,-1/0,-1/0)}Object.assign(Gn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0,o=0,c=e.length;o<c;o+=3){var u=e[o],l=e[o+1],f=e[o+2];u<t&&(t=u),l<n&&(n=l),f<r&&(r=f),u>i&&(i=u),l>a&&(a=l),f>s&&(s=f)}return this.min.set(t,n,r),this.max.set(i,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,s=-1/0,o=0,c=e.count;o<c;o++){var u=e.getX(o),l=e.getY(o),f=e.getZ(o);u<t&&(t=u),l<n&&(n=l),f<r&&(r=f),u>i&&(i=u),l>a&&(a=l),f>s&&(s=f)}return this.min.set(t,n,r),this.max.set(i,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new M;return function(n,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(n).sub(i),this.max.copy(n).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new M;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new M;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new M;function i(a){var s=a.geometry;if(s!==void 0){if(s.isGeometry){var o=s.vertices;for(t=0,n=o.length;t<n;t++)r.copy(o[t]),r.applyMatrix4(a.matrixWorld),e.expandByPoint(r)}else if(s.isBufferGeometry){var c=s.attributes.position;if(c!==void 0)for(t=0,n=c.count;t<n;t++)r.fromBufferAttribute(c,t).applyMatrix4(a.matrixWorld),e.expandByPoint(r)}}}return function(s){return e=this,s.updateMatrixWorld(!0),s.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new M;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new M;return function(n){return this.clampPoint(n.center,e),e.distanceToSquared(n.center)<=n.radius*n.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new M;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new M;return function(n){var r=e.copy(n).clamp(this.min,this.max);return r.sub(n).length()}}(),getBoundingSphere:function(){var e=new M;return function(n){var r=n||new rn;return this.getCenter(r.center),r.radius=this.getSize(e).length()*.5,r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new M,new M,new M,new M,new M,new M,new M,new M];return function(n){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function rn(e,t){this.center=e!==void 0?e:new M,this.radius=t!==void 0?t:0}Object.assign(rn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Gn;return function(n,r){var i=this.center;r!==void 0?i.copy(r):e.setFromPoints(n).getCenter(i);for(var a=0,s=0,o=n.length;s<o;s++)a=Math.max(a,i.distanceToSquared(n[s]));return this.radius=Math.sqrt(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new M;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new Gn;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});function kt(e,t){this.normal=e!==void 0?e:new M(1,0,0),this.constant=t!==void 0?t:0}Object.assign(kt.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new M,t=new M;return function(r,i,a){var s=e.subVectors(a,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var n=t||new M;return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new M;return function(n,r){var i=r||new M,a=n.delta(e),s=this.normal.dot(a);if(s===0)return this.distanceToPoint(n.start)===0?i.copy(n.start):void 0;var o=-(n.start.dot(this.normal)+this.constant)/s;if(!(o<0||o>1))return i.copy(a).multiplyScalar(o).add(n.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new M;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new M,t=new Rt;return function(r,i){var a=i||t.getNormalMatrix(r),s=this.coplanarPoint(e).applyMatrix4(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-s.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});function zc(e,t,n,r,i,a){this.planes=[e!==void 0?e:new kt,t!==void 0?t:new kt,n!==void 0?n:new kt,r!==void 0?r:new kt,i!==void 0?i:new kt,a!==void 0?a:new kt]}Object.assign(zc.prototype,{set:function(e,t,n,r,i,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(a),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],c=n[5],u=n[6],l=n[7],f=n[8],h=n[9],d=n[10],p=n[11],v=n[12],g=n[13],m=n[14],y=n[15];return t[0].setComponents(s-r,l-o,p-f,y-v).normalize(),t[1].setComponents(s+r,l+o,p+f,y+v).normalize(),t[2].setComponents(s+i,l+c,p+h,y+g).normalize(),t[3].setComponents(s-i,l-c,p-h,y-g).normalize(),t[4].setComponents(s-a,l-u,p-d,y-m).normalize(),t[5].setComponents(s+a,l+u,p+d,y+m).normalize(),this},intersectsObject:function(){var e=new rn;return function(n){var r=n.geometry;return r.boundingSphere===null&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new rn;return function(n){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(n.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){var a=t[i].distanceToPoint(n);if(a<r)return!1}return!0},intersectsBox:function(){var e=new M,t=new M;return function(r){for(var i=this.planes,a=0;a<6;a++){var s=i[a];e.x=s.normal.x>0?r.min.x:r.max.x,t.x=s.normal.x>0?r.max.x:r.min.x,e.y=s.normal.y>0?r.min.y:r.max.y,t.y=s.normal.y>0?r.max.y:r.min.y,e.z=s.normal.z>0?r.min.z:r.max.z,t.z=s.normal.z>0?r.max.z:r.min.z;var o=s.distanceToPoint(e),c=s.distanceToPoint(t);if(o<0&&c<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});function eh(e,t,n){for(var r=new zc,i=new Le,a=new se,s=new se(n,n),o=new M,c=new M,u=1,l=2,f=(u|l)+1,h=new Array(f),d=new Array(f),p={},v=[new M(1,0,0),new M(-1,0,0),new M(0,0,1),new M(0,0,-1),new M(0,1,0),new M(0,-1,0)],g=[new M(0,1,0),new M(0,1,0),new M(0,1,0),new M(0,1,0),new M(0,0,1),new M(0,0,-1)],m=[new qe,new qe,new qe,new qe,new qe,new qe],y=0;y!==f;++y){var _=(y&u)!==0,x=(y&l)!==0,E=new ir({depthPacking:hg,morphTargets:_,skinning:x});h[y]=E;var T=new ar({morphTargets:_,skinning:x});d[y]=T}var S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Pf,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(F,z,q){if(S.enabled!==!1&&!(S.autoUpdate===!1&&S.needsUpdate===!1)&&F.length!==0){var $=e.context,te=e.state;te.disable($.BLEND),te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);for(var L,A=0,H=F.length;A<H;A++){var B=F[A],Q=B.shadow,J=B&&B.isPointLight;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}var Z=Q.camera;if(a.copy(Q.mapSize),a.min(s),J){var ue=a.x,de=a.y;m[0].set(ue*2,de,ue,de),m[1].set(0,de,ue,de),m[2].set(ue*3,de,ue,de),m[3].set(ue,de,ue,de),m[4].set(ue*3,0,ue,de),m[5].set(ue,0,ue,de),a.x*=4,a.y*=2}if(Q.map===null){var _e={minFilter:Ut,magFilter:Ut,format:zn};Q.map=new Ar(a.x,a.y,_e),Q.map.texture.name=B.name+".shadowMap",Z.updateProjectionMatrix()}Q.isSpotLightShadow&&Q.update(B);var k=Q.map,I=Q.matrix;c.setFromMatrixPosition(B.matrixWorld),Z.position.copy(c),J?(L=6,I.makeTranslation(-c.x,-c.y,-c.z)):(L=1,o.setFromMatrixPosition(B.target.matrixWorld),Z.lookAt(o),Z.updateMatrixWorld(),I.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),I.multiply(Z.projectionMatrix),I.multiply(Z.matrixWorldInverse)),e.setRenderTarget(k),e.clear();for(var G=0;G<L;G++){if(J){o.copy(Z.position),o.add(v[G]),Z.up.copy(g[G]),Z.lookAt(o),Z.updateMatrixWorld();var K=m[G];te.viewport(K)}i.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),r.setFromMatrix(i),R(z,q,Z,J)}}S.needsUpdate=!1}};function C(F,z,q,$,te,L){var A=F.geometry,H=null,B=h,Q=F.customDepthMaterial;if(q&&(B=d,Q=F.customDistanceMaterial),Q)H=Q;else{var J=!1;z.morphTargets&&(A&&A.isBufferGeometry?J=A.morphAttributes&&A.morphAttributes.position&&A.morphAttributes.position.length>0:A&&A.isGeometry&&(J=A.morphTargets&&A.morphTargets.length>0)),F.isSkinnedMesh&&z.skinning===!1&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",F);var Z=F.isSkinnedMesh&&z.skinning,ue=0;J&&(ue|=u),Z&&(ue|=l),H=B[ue]}if(e.localClippingEnabled&&z.clipShadows===!0&&z.clippingPlanes.length!==0){var de=H.uuid,_e=z.uuid,k=p[de];k===void 0&&(k={},p[de]=k);var I=k[_e];I===void 0&&(I=H.clone(),k[_e]=I),H=I}H.visible=z.visible,H.wireframe=z.wireframe;var G=z.side;return S.renderSingleSided&&G==Yr&&(G=oi),S.renderReverseSided&&(G===oi?G=tr:G===tr&&(G=oi)),H.side=G,H.clipShadows=z.clipShadows,H.clippingPlanes=z.clippingPlanes,H.clipIntersection=z.clipIntersection,H.wireframeLinewidth=z.wireframeLinewidth,H.linewidth=z.linewidth,q&&H.isMeshDistanceMaterial&&(H.referencePosition.copy($),H.nearDistance=te,H.farDistance=L),H}function R(F,z,q,$){if(F.visible!==!1){var te=F.layers.test(z.layers);if(te&&(F.isMesh||F.isLine||F.isPoints)&&F.castShadow&&(!F.frustumCulled||r.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,F.matrixWorld);var L=t.update(F),A=F.material;if(Array.isArray(A))for(var H=L.groups,B=0,Q=H.length;B<Q;B++){var J=H[B],Z=A[J.materialIndex];if(Z&&Z.visible){var ue=C(F,Z,$,c,q.near,q.far);e.renderBufferDirect(q,null,L,ue,F,J)}}else if(A.visible){var ue=C(F,A,$,c,q.near,q.far);e.renderBufferDirect(q,null,L,ue,F,null)}}for(var de=F.children,_e=0,k=de.length;_e<k;_e++)R(de[_e],z,q,$)}}}function W0(e){var t={};function n(o,c){var u=o.array,l=o.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,f=e.createBuffer();e.bindBuffer(c,f),e.bufferData(c,u,l),o.onUploadCallback();var h=e.FLOAT;return u instanceof Float32Array?h=e.FLOAT:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?h=e.UNSIGNED_SHORT:u instanceof Int16Array?h=e.SHORT:u instanceof Uint32Array?h=e.UNSIGNED_INT:u instanceof Int32Array?h=e.INT:u instanceof Int8Array?h=e.BYTE:u instanceof Uint8Array&&(h=e.UNSIGNED_BYTE),{buffer:f,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version}}function r(o,c,u){var l=c.array,f=c.updateRange;e.bindBuffer(u,o),c.dynamic===!1?e.bufferData(u,l,e.STATIC_DRAW):f.count===-1?e.bufferSubData(u,0,l):f.count===0?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(u,f.offset*l.BYTES_PER_ELEMENT,l.subarray(f.offset,f.offset+f.count)),f.count=-1)}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),t[o.uuid]}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);var c=t[o.uuid];c&&(e.deleteBuffer(c.buffer),delete t[o.uuid])}function s(o,c){o.isInterleavedBufferAttribute&&(o=o.data);var u=t[o.uuid];u===void 0?t[o.uuid]=n(o,c):u.version<o.version&&(r(u.buffer,o,c),u.version=o.version)}return{get:i,remove:a,update:s}}function ur(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ur.DefaultOrder}ur.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];ur.DefaultOrder="XYZ";Object.defineProperties(ur.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}});Object.assign(ur.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Ce.clamp,i=e.elements,a=i[0],s=i[4],o=i[8],c=i[1],u=i[5],l=i[9],f=i[2],h=i[6],d=i[10];return t=t||this._order,t==="XYZ"?(this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(h,u),this._z=0)):t==="YXZ"?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(o,d),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,a),this._z=0)):t==="ZXY"?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,a))):t==="ZYX"?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(h,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-s,u))):t==="YZX"?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(o,d))):t==="XZY"?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-l,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,n!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Le;return function(n,r,i){return e.makeRotationFromQuaternion(n),this.setFromRotationMatrix(e,r,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new tt;return function(n){return e.setFromEuler(this),this.setFromQuaternion(e,n)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new M(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}});function th(){this.mask=1}Object.assign(th.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return(this.mask&e.mask)!==0}});var X0=0;function ve(){Object.defineProperty(this,"id",{value:X0++}),this.uuid=Ce.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ve.DefaultUp.clone();var e=new M,t=new ur,n=new tt,r=new M(1,1,1);function i(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t.onChange(i),n.onChange(a),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Le},normalMatrix:{value:new Rt}}),this.matrix=new Le,this.matrixWorld=new Le,this.matrixAutoUpdate=ve.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new th,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}ve.DefaultUp=new M(0,1,0);ve.DefaultMatrixAutoUpdate=!0;ve.prototype=Object.assign(Object.create(bn.prototype),{constructor:ve,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new tt;return function(n,r){return e.setFromAxisAngle(n,r),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new tt;return function(n,r){return e.setFromAxisAngle(n,r),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new M(1,0,0);return function(n){return this.rotateOnAxis(e,n)}}(),rotateY:function(){var e=new M(0,1,0);return function(n){return this.rotateOnAxis(e,n)}}(),rotateZ:function(){var e=new M(0,0,1);return function(n){return this.rotateOnAxis(e,n)}}(),translateOnAxis:function(){var e=new M;return function(n,r){return e.copy(n).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new M(1,0,0);return function(n){return this.translateOnAxis(e,n)}}(),translateY:function(){var e=new M(0,1,0);return function(n){return this.translateOnAxis(e,n)}}(),translateZ:function(){var e=new M(0,0,1);return function(n){return this.translateOnAxis(e,n)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Le;return function(n){return n.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Le,t=new M;return function(r,i,a){r.isVector3?t.copy(r):t.set(r,i,a),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return n!==-1&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],a=i.getObjectByProperty(e,t);if(a!==void 0)return a}},getWorldPosition:function(e){var t=e||new M;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new M,t=new M;return function(r){var i=r||new tt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new tt;return function(n){var r=n||new ur;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new M,t=new tt;return function(r){var i=r||new M;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new tt;return function(n){var r=n||new M;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.matrix=this.matrix.toArray();function i(g,m){return g[m.uuid]===void 0&&(g[m.uuid]=m.toJSON(e)),m.uuid}if(this.geometry!==void 0){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){var s=a.shapes;if(Array.isArray(s))for(var o=0,c=s.length;o<c;o++){var u=s[o];i(e.shapes,u)}else i(e.shapes,s)}}if(this.material!==void 0)if(Array.isArray(this.material)){for(var l=[],o=0,c=this.material.length;o<c;o++)l.push(i(e.materials,this.material[o]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(t){var f=v(e.geometries),h=v(e.materials),d=v(e.textures),p=v(e.images),s=v(e.shapes);f.length>0&&(n.geometries=f),h.length>0&&(n.materials=h),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),s.length>0&&(n.shapes=s)}return n.object=r,n;function v(g){var m=[];for(var y in g){var _=g[y];delete _.metadata,m.push(_)}return m}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});function mn(){ve.call(this),this.type="Camera",this.matrixWorldInverse=new Le,this.projectionMatrix=new Le}mn.prototype=Object.assign(Object.create(ve.prototype),{constructor:mn,isCamera:!0,copy:function(e,t){return ve.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new tt;return function(n){var r=n||new M;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){ve.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function wi(e,t,n,r,i,a){mn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i!==void 0?i:.1,this.far=a!==void 0?a:2e3,this.updateProjectionMatrix()}wi.prototype=Object.assign(Object.create(mn.prototype),{constructor:wi,isOrthographicCamera:!0,copy:function(e,t){return mn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,s=r+t,o=r-t;if(this.view!==null&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/c),a=i+l*(this.view.width/c),s-=f*(this.view.offsetY/u),o=s-f*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,a,s,o,this.near,this.far)},toJSON:function(e){var t=ve.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function $n(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new M,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new we,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=a!==void 0?a:0}Object.assign($n.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var j0=0;function Pe(){Object.defineProperty(this,"id",{value:j0+=2}),this.uuid=Ce.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Pe.prototype=Object.assign(Object.create(bn.prototype),{constructor:Pe,isGeometry:!0,applyMatrix:function(e){for(var t=new Rt().getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(e)}for(var n=0,r=this.faces.length;n<r;n++){var a=this.faces[n];a.normal.applyMatrix3(t).normalize();for(var s=0,o=a.vertexNormals.length;s<o;s++)a.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Le;return function(n){return e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Le;return function(n){return e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Le;return function(n){return e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e=new Le;return function(n,r,i){return e.makeTranslation(n,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Le;return function(n,r,i){return e.makeScale(n,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ve;return function(n){e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=e.index!==null?e.index.array:void 0,r=e.attributes,i=r.position.array,a=r.normal!==void 0?r.normal.array:void 0,s=r.color!==void 0?r.color.array:void 0,o=r.uv!==void 0?r.uv.array:void 0,c=r.uv2!==void 0?r.uv2.array:void 0;c!==void 0&&(this.faceVertexUvs[1]=[]);for(var u=[],l=[],f=[],h=0,d=0;h<i.length;h+=3,d+=2)t.vertices.push(new M(i[h],i[h+1],i[h+2])),a!==void 0&&u.push(new M(a[h],a[h+1],a[h+2])),s!==void 0&&t.colors.push(new we(s[h],s[h+1],s[h+2])),o!==void 0&&l.push(new se(o[d],o[d+1])),c!==void 0&&f.push(new se(c[d],c[d+1]));function p(x,E,T,S){var C=a!==void 0?[u[x].clone(),u[E].clone(),u[T].clone()]:[],R=s!==void 0?[t.colors[x].clone(),t.colors[E].clone(),t.colors[T].clone()]:[],F=new $n(x,E,T,C,R,S);t.faces.push(F),o!==void 0&&t.faceVertexUvs[0].push([l[x].clone(),l[E].clone(),l[T].clone()]),c!==void 0&&t.faceVertexUvs[1].push([f[x].clone(),f[E].clone(),f[T].clone()])}var v=e.groups;if(v.length>0)for(var h=0;h<v.length;h++)for(var g=v[h],m=g.start,y=g.count,d=m,_=m+y;d<_;d+=3)n!==void 0?p(n[d],n[d+1],n[d+2],g.materialIndex):p(d,d+1,d+2,g.materialIndex);else if(n!==void 0)for(var h=0;h<n.length;h+=3)p(n[h],n[h+1],n[h+2]);else for(var h=0;h<i.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new Le;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new M,t=new M,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],s=this.vertices[i.b],o=this.vertices[i.c];e.subVectors(o,s),t.subVectors(a,s),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var t,n,r,i,a,s;for(s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new M;if(e){var o,c,u,l=new M,f=new M;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],o=this.vertices[a.a],c=this.vertices[a.b],u=this.vertices[a.c],l.subVectors(u,c),f.subVectors(o,c),l.cross(f),s[a.a].add(l),s[a.b].add(l),s[a.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s[a.a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(r=0,i=this.faces.length;r<i;r++){a=this.faces[r];var h=a.vertexNormals;h.length===3?(h[0].copy(s[a.a]),h[1].copy(s[a.b]),h[2].copy(s[a.c])):(h[0]=s[a.a].clone(),h[1]=s[a.b].clone(),h[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new Pe;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals,u,l;for(n=0,r=this.faces.length;n<r;n++)u=new M,l={a:new M,b:new M,c:new M},s.push(u),o.push(l)}var c=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var u,l;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=c.faceNormals[n],l=c.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Gn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new rn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}var r,i=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],f=this.colors,h=e.colors;n===void 0&&(n=0),t!==void 0&&(r=new Rt().getNormalMatrix(t));for(var d=0,p=s.length;d<p;d++){var v=s[d],g=v.clone();t!==void 0&&g.applyMatrix4(t),a.push(g)}for(var d=0,p=h.length;d<p;d++)f.push(h[d].clone());for(d=0,p=c.length;d<p;d++){var m=c[d],y,_,x,E=m.vertexNormals,T=m.vertexColors;y=new $n(m.a+i,m.b+i,m.c+i),y.normal.copy(m.normal),r!==void 0&&y.normal.applyMatrix3(r).normalize();for(var S=0,C=E.length;S<C;S++)_=E[S].clone(),r!==void 0&&_.applyMatrix3(r).normalize(),y.vertexNormals.push(_);y.color.copy(m.color);for(var S=0,C=T.length;S<C;S++)x=T[S],y.vertexColors.push(x.clone());y.materialIndex=m.materialIndex+n,o.push(y)}for(d=0,p=l.length;d<p;d++){var R=l[d],F=[];if(R!==void 0){for(var S=0,C=R.length;S<C;S++)F.push(R[S].clone());u.push(F)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e={},t=[],n=[],r,i,a=4,s=Math.pow(10,a),o,c,u,l,f,h;for(o=0,c=this.vertices.length;o<c;o++)r=this.vertices[o],i=Math.round(r.x*s)+"_"+Math.round(r.y*s)+"_"+Math.round(r.z*s),e[i]===void 0?(e[i]=o,t.push(this.vertices[o]),n[o]=t.length-1):n[o]=n[e[i]];var d=[];for(o=0,c=this.faces.length;o<c;o++){u=this.faces[o],u.a=n[u.a],u.b=n[u.b],u.c=n[u.c],l=[u.a,u.b,u.c];for(var p=0;p<3;p++)if(l[p]===l[(p+1)%3]){d.push(o);break}}for(o=d.length-1;o>=0;o--){var v=d[o];for(this.faces.splice(v,1),f=0,h=this.faceVertexUvs.length;f<h;f++)this.faceVertexUvs[f].splice(v,1)}var g=this.vertices.length-t.length;return this.vertices=t,g},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new M(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;function r(u,l){return u.materialIndex-l.materialIndex}e.sort(r);var i=this.faceVertexUvs[0],a=this.faceVertexUvs[1],s,o;i&&i.length===t&&(s=[]),a&&a.length===t&&(o=[]);for(var n=0;n<t;n++){var c=e[n]._id;s&&s.push(i[c]),o&&o.push(a[c])}s&&(this.faceVertexUvs[0]=s),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}for(var s=[],o=[],c={},u=[],l={},f=[],h={},i=0;i<this.faces.length;i++){var d=this.faces[i],p=!0,v=!1,g=this.faceVertexUvs[0][i]!==void 0,m=d.normal.length()>0,y=d.vertexNormals.length>0,_=d.color.r!==1||d.color.g!==1||d.color.b!==1,x=d.vertexColors.length>0,E=0;if(E=R(E,0,0),E=R(E,1,p),E=R(E,2,v),E=R(E,3,g),E=R(E,4,m),E=R(E,5,y),E=R(E,6,_),E=R(E,7,x),s.push(E),s.push(d.a,d.b,d.c),s.push(d.materialIndex),g){var T=this.faceVertexUvs[0][i];s.push(q(T[0]),q(T[1]),q(T[2]))}if(m&&s.push(F(d.normal)),y){var S=d.vertexNormals;s.push(F(S[0]),F(S[1]),F(S[2]))}if(_&&s.push(z(d.color)),x){var C=d.vertexColors;s.push(z(C[0]),z(C[1]),z(C[2]))}}function R($,te,L){return L?$|1<<te:$&~(1<<te)}function F($){var te=$.x.toString()+$.y.toString()+$.z.toString();return c[te]!==void 0||(c[te]=o.length/3,o.push($.x,$.y,$.z)),c[te]}function z($){var te=$.r.toString()+$.g.toString()+$.b.toString();return l[te]!==void 0||(l[te]=u.length,u.push($.getHex())),l[te]}function q($){var te=$.x.toString()+$.y.toString();return h[te]!==void 0||(h[te]=f.length/2,f.push($.x,$.y)),h[te]}return e.data={},e.data.vertices=r,e.data.normals=o,u.length>0&&(e.data.colors=u),f.length>0&&(e.data.uvs=[f]),e.data.faces=s,e},clone:function(){return new Pe().copy(this)},copy:function(e){var t,n,r,i,a,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.vertices;for(t=0,n=o.length;t<n;t++)this.vertices.push(o[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(this.faceVertexUvs[t]===void 0&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var f=l[r],h=[];for(a=0,s=f.length;a<s;a++){var d=f[a];h.push(d.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var v={};if(v.name=p[t].name,p[t].vertices!==void 0)for(v.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)v.vertices.push(p[t].vertices[r].clone());if(p[t].normals!==void 0)for(v.normals=[],r=0,i=p[t].normals.length;r<i;r++)v.normals.push(p[t].normals[r].clone());this.morphTargets.push(v)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var m={};if(g[t].vertexNormals!==void 0)for(m.vertexNormals=[],r=0,i=g[t].vertexNormals.length;r<i;r++){var y=g[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),m.vertexNormals.push(_)}if(g[t].faceNormals!==void 0)for(m.faceNormals=[],r=0,i=g[t].faceNormals.length;r<i;r++)m.faceNormals.push(g[t].faceNormals[r].clone());this.morphNormals.push(m)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var E=e.skinIndices;for(t=0,n=E.length;t<n;t++)this.skinIndices.push(E[t].clone());var T=e.lineDistances;for(t=0,n=T.length;t<n;t++)this.lineDistances.push(T[t]);var S=e.boundingBox;S!==null&&(this.boundingBox=S.clone());var C=e.boundingSphere;return C!==null&&(this.boundingSphere=C.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Oe(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Ce.generateUUID(),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(Oe.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Oe.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new we),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];t[n++]=a.a,t[n++]=a.b,t[n++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new se),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new M),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new qe),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}});function Mo(e,t,n){Oe.call(this,new Int8Array(e),t,n)}Mo.prototype=Object.create(Oe.prototype);Mo.prototype.constructor=Mo;function Eo(e,t,n){Oe.call(this,new Uint8Array(e),t,n)}Eo.prototype=Object.create(Oe.prototype);Eo.prototype.constructor=Eo;function To(e,t,n){Oe.call(this,new Uint8ClampedArray(e),t,n)}To.prototype=Object.create(Oe.prototype);To.prototype.constructor=To;function So(e,t,n){Oe.call(this,new Int16Array(e),t,n)}So.prototype=Object.create(Oe.prototype);So.prototype.constructor=So;function Mi(e,t,n){Oe.call(this,new Uint16Array(e),t,n)}Mi.prototype=Object.create(Oe.prototype);Mi.prototype.constructor=Mi;function Ao(e,t,n){Oe.call(this,new Int32Array(e),t,n)}Ao.prototype=Object.create(Oe.prototype);Ao.prototype.constructor=Ao;function Ei(e,t,n){Oe.call(this,new Uint32Array(e),t,n)}Ei.prototype=Object.create(Oe.prototype);Ei.prototype.constructor=Ei;function pe(e,t,n){Oe.call(this,new Float32Array(e),t,n)}pe.prototype=Object.create(Oe.prototype);pe.prototype.constructor=pe;function Ro(e,t,n){Oe.call(this,new Float64Array(e),t,n)}Ro.prototype=Object.create(Oe.prototype);Ro.prototype.constructor=Ro;function nh(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(nh.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var s=i[a];s.materialIndex!==r&&(r=s.materialIndex,t!==void 0&&(t.count=a*3-t.start,n.push(t)),t={start:a*3,materialIndex:r})}t!==void 0&&(t.count=a*3-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=e.morphTargets,o=s.length,c;if(o>0){c=[];for(var u=0;u<o;u++)c[u]=[];this.morphTargets.position=c}var l=e.morphNormals,f=l.length,h;if(f>0){h=[];for(var u=0;u<f;u++)h[u]=[];this.morphTargets.normal=h}for(var d=e.skinIndices,p=e.skinWeights,v=d.length===n.length,g=p.length===n.length,u=0;u<t.length;u++){var m=t[u];this.vertices.push(n[m.a],n[m.b],n[m.c]);var y=m.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{var _=m.normal;this.normals.push(_,_,_)}var x=m.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{var E=m.color;this.colors.push(E,E,E)}if(i===!0){var T=r[0][u];T!==void 0?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new se,new se,new se))}if(a===!0){var T=r[1][u];T!==void 0?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new se,new se,new se))}for(var S=0;S<o;S++){var C=s[S].vertices;c[S].push(C[m.a],C[m.b],C[m.c])}for(var S=0;S<f;S++){var R=l[S].vertexNormals[u];h[S].push(R.a,R.b,R.c)}v&&this.skinIndices.push(d[m.a],d[m.b],d[m.c]),g&&this.skinWeights.push(p[m.a],p[m.b],p[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});function Po(e){if(e.length===0)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}var Y0=1;function ye(){Object.defineProperty(this,"id",{value:Y0+=2}),this.uuid=Ce.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}ye.prototype=Object.assign(Object.create(bn.prototype),{constructor:ye,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Po(e)>65535?Ei:Mi)(e,1):this.index=e},addAttribute:function(e,t){if(!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)){console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Oe(arguments[1],arguments[2]));return}if(e==="index"){console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t);return}return this.attributes[e]=t,this},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;t!==void 0&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(n!==void 0){var r=new Rt().getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Le;return function(n){return e.makeRotationX(n),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Le;return function(n){return e.makeRotationY(n),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Le;return function(n){return e.makeRotationZ(n),this.applyMatrix(e),this}}(),translate:function(){var e=new Le;return function(n,r,i){return e.makeTranslation(n,r,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Le;return function(n,r,i){return e.makeScale(n,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ve;return function(n){e.lookAt(n),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new pe(t.vertices.length*3,3),r=new pe(t.colors.length*3,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new pe(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new pe(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return t.verticesNeedUpdate===!0&&(r=this.attributes.position,r!==void 0&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(r=this.attributes.normal,r!==void 0&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(r=this.attributes.color,r!==void 0&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,r!==void 0&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,r!==void 0&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new nh().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(e.vertices.length*3);if(this.addAttribute("position",new Oe(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(e.normals.length*3);this.addAttribute("normal",new Oe(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(e.colors.length*3);this.addAttribute("color",new Oe(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(e.uvs.length*2);this.addAttribute("uv",new Oe(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(e.uvs2.length*2);this.addAttribute("uv2",new Oe(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=Po(e.indices)>65535?Uint32Array:Uint16Array,o=new s(e.indices.length*3);this.setIndex(new Oe(o,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var c in e.morphTargets){for(var u=[],l=e.morphTargets[c],f=0,h=l.length;f<h;f++){var d=l[f],p=new pe(d.length*3,3);u.push(p.copyVector3sArray(d))}this.morphAttributes[c]=u}if(e.skinIndices.length>0){var v=new pe(e.skinIndices.length*4,4);this.addAttribute("skinIndex",v.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var g=new pe(e.skinWeights.length*4,4);this.addAttribute("skinWeight",g.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Gn);var e=this.attributes.position;e!==void 0?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Gn,t=new M;return function(){this.boundingSphere===null&&(this.boundingSphere=new rn);var r=this.attributes.position;if(r){var i=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(i);for(var a=0,s=0,o=r.count;s<o;s++)t.x=r.getX(s),t.y=r.getY(s),t.z=r.getZ(s),a=Math.max(a,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(t.normal===void 0)this.addAttribute("normal",new Oe(new Float32Array(r.length),3));else for(var i=t.normal.array,a=0,s=i.length;a<s;a++)i[a]=0;var o=t.normal.array,c,u,l,f=new M,h=new M,d=new M,p=new M,v=new M;if(e){var g=e.array;n.length===0&&this.addGroup(0,g.length);for(var m=0,y=n.length;m<y;++m)for(var _=n[m],x=_.start,E=_.count,a=x,s=x+E;a<s;a+=3)c=g[a+0]*3,u=g[a+1]*3,l=g[a+2]*3,f.fromArray(r,c),h.fromArray(r,u),d.fromArray(r,l),p.subVectors(d,h),v.subVectors(f,h),p.cross(v),o[c]+=p.x,o[c+1]+=p.y,o[c+2]+=p.z,o[u]+=p.x,o[u+1]+=p.y,o[u+2]+=p.z,o[l]+=p.x,o[l+1]+=p.y,o[l+2]+=p.z}else for(var a=0,s=r.length;a<s;a+=9)f.fromArray(r,a),h.fromArray(r,a+3),d.fromArray(r,a+6),p.subVectors(d,h),v.subVectors(f,h),p.cross(v),o[a]=p.x,o[a+1]=p.y,o[a+2]=p.z,o[a+3]=p.x,o[a+4]=p.y,o[a+5]=p.z,o[a+6]=p.x,o[a+7]=p.y,o[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0);var n=this.attributes;for(var r in n)if(e.attributes[r]!==void 0)for(var i=n[r],a=i.array,s=e.attributes[r],o=s.array,c=s.itemSize,u=0,l=c*t;u<o.length;u++,l++)a[l]=o[u];return this},normalizeNormals:function(){var e=new M;return function(){for(var n=this.attributes.normal,r=0,i=n.count;r<i;r++)e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.normalize(),n.setXYZ(r,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new ye,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,s=i.itemSize,o=new a.constructor(t.length*s),c=0,u=0,l=0,f=t.length;l<f;l++){c=t[l]*s;for(var h=0;h<s;h++)o[u++]=a[c++]}e.addAttribute(r,new Oe(o,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){var t=this.parameters;for(var n in t)t[n]!==void 0&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(r!==null){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var a=this.attributes;for(var n in a){var s=a[n],i=Array.prototype.slice.call(s.array);e.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:i,normalized:s.normalized}}var o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));var c=this.boundingSphere;return c!==null&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return new ye().copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;i!==null&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var s=a[t];this.addAttribute(t,s.clone())}var o=e.morphAttributes;for(t in o){var c=[],u=o[t];for(n=0,r=u.length;n<r;n++)c.push(u[n].clone());this.morphAttributes[t]=c}var l=e.groups;for(n=0,r=l.length;n<r;n++){var f=l[n];this.addGroup(f.start,f.count,f.materialIndex)}var h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());var d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function Ua(e,t,n,r,i,a){Pe.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Pr(e,t,n,r,i,a)),this.mergeVertices()}Ua.prototype=Object.create(Pe.prototype);Ua.prototype.constructor=Ua;function Pr(e,t,n,r,i,a){ye.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var s=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var o=[],c=[],u=[],l=[],f=0,h=0;d("z","y","x",-1,-1,n,t,e,a,i,0),d("z","y","x",1,-1,n,t,-e,a,i,1),d("x","z","y",1,1,e,n,t,r,a,2),d("x","z","y",1,-1,e,n,-t,r,a,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.addAttribute("position",new pe(c,3)),this.addAttribute("normal",new pe(u,3)),this.addAttribute("uv",new pe(l,2));function d(p,v,g,m,y,_,x,E,T,S,C){var R=_/T,F=x/S,z=_/2,q=x/2,$=E/2,te=T+1,L=S+1,A=0,H=0,B,Q,J=new M;for(Q=0;Q<L;Q++){var Z=Q*F-q;for(B=0;B<te;B++){var ue=B*R-z;J[p]=ue*m,J[v]=Z*y,J[g]=$,c.push(J.x,J.y,J.z),J[p]=0,J[v]=0,J[g]=E>0?1:-1,u.push(J.x,J.y,J.z),l.push(B/T),l.push(1-Q/S),A+=1}}for(Q=0;Q<S;Q++)for(B=0;B<T;B++){var de=f+B+te*Q,_e=f+B+te*(Q+1),k=f+(B+1)+te*(Q+1),I=f+(B+1)+te*Q;o.push(de,_e,I),o.push(_e,k,I),H+=6}s.addGroup(h,H,C),h+=H,f+=A}}Pr.prototype=Object.create(ye.prototype);Pr.prototype.constructor=Pr;function Ba(e,t,n,r){Pe.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Lr(e,t,n,r)),this.mergeVertices()}Ba.prototype=Object.create(Pe.prototype);Ba.prototype.constructor=Ba;function Lr(e,t,n,r){ye.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;var i=e/2,a=t/2,s=Math.floor(n)||1,o=Math.floor(r)||1,c=s+1,u=o+1,l=e/s,f=t/o,h,d,p=[],v=[],g=[],m=[];for(d=0;d<u;d++){var y=d*f-a;for(h=0;h<c;h++){var _=h*l-i;v.push(_,-y,0),g.push(0,0,1),m.push(h/s),m.push(1-d/o)}}for(d=0;d<o;d++)for(h=0;h<s;h++){var x=h+c*d,E=h+c*(d+1),T=h+1+c*(d+1),S=h+1+c*d;p.push(x,E,S),p.push(E,T,S)}this.setIndex(p),this.addAttribute("position",new pe(v,3)),this.addAttribute("normal",new pe(g,3)),this.addAttribute("uv",new pe(m,2))}Lr.prototype=Object.create(ye.prototype);Lr.prototype.constructor=Lr;function Pt(e){Fe.call(this),this.type="MeshBasicMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}Pt.prototype=Object.create(Fe.prototype);Pt.prototype.constructor=Pt;Pt.prototype.isMeshBasicMaterial=!0;Pt.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};function qt(e){Fe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,this.fragmentShader=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}qt.prototype=Object.create(Fe.prototype);qt.prototype.constructor=qt;qt.prototype.isShaderMaterial=!0;qt.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tt.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this};qt.prototype.toJSON=function(e){var t=Fe.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t};function Jr(e,t){this.origin=e!==void 0?e:new M,this.direction=t!==void 0?t:new M}Object.assign(Jr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new M;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new M;return function(n){return this.origin.copy(this.at(n,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new M;n.subVectors(e,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new M;return function(n){var r=e.subVectors(n,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(n):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(n))}}(),distanceSqToSegment:function(){var e=new M,t=new M,n=new M;return function(i,a,s,o){e.copy(i).add(a).multiplyScalar(.5),t.copy(a).sub(i).normalize(),n.copy(this.origin).sub(e);var c=i.distanceTo(a)*.5,u=-this.direction.dot(t),l=n.dot(this.direction),f=-n.dot(t),h=n.lengthSq(),d=Math.abs(1-u*u),p,v,g,m;if(d>0)if(p=u*f-l,v=u*l-f,m=c*d,p>=0)if(v>=-m)if(v<=m){var y=1/d;p*=y,v*=y,g=p*(p+u*v+2*l)+v*(u*p+v+2*f)+h}else v=c,p=Math.max(0,-(u*v+l)),g=-p*p+v*(v+2*f)+h;else v=-c,p=Math.max(0,-(u*v+l)),g=-p*p+v*(v+2*f)+h;else v<=-m?(p=Math.max(0,-(-u*c+l)),v=p>0?-c:Math.min(Math.max(-c,-f),c),g=-p*p+v*(v+2*f)+h):v<=m?(p=0,v=Math.min(Math.max(-c,-f),c),g=v*(v+2*f)+h):(p=Math.max(0,-(u*c+l)),v=p>0?c:Math.min(Math.max(-c,-f),c),g=-p*p+v*(v+2*f)+h);else v=u>0?-c:c,p=Math.max(0,-(u*v+l)),g=-p*p+v*(v+2*f)+h;return s&&s.copy(this.direction).multiplyScalar(p).add(this.origin),o&&o.copy(t).multiplyScalar(v).add(e),g}}(),intersectSphere:function(){var e=new M;return function(n,r){e.subVectors(n.center,this.origin);var i=e.dot(this.direction),a=e.dot(e)-i*i,s=n.radius*n.radius;if(a>s)return null;var o=Math.sqrt(s-a),c=i-o,u=i+o;return c<0&&u<0?null:c<0?this.at(u,r):this.at(c,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(t===0)return!0;var n=e.normal.dot(this.direction);return n*t<0},intersectBox:function(e,t){var n,r,i,a,s,o,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,f=this.origin;return c>=0?(n=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(n=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(i=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),n>a||i>r||((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),l>=0?(s=(e.min.z-f.z)*l,o=(e.max.z-f.z)*l):(s=(e.max.z-f.z)*l,o=(e.min.z-f.z)*l),n>o||s>r)||((s>n||n!==n)&&(n=s),(o<r||r!==r)&&(r=o),r<0)?null:this.at(n>=0?n:r,t)},intersectsBox:function(){var e=new M;return function(n){return this.intersectBox(n,e)!==null}}(),intersectTriangle:function(){var e=new M,t=new M,n=new M,r=new M;return function(a,s,o,c,u){t.subVectors(s,a),n.subVectors(o,a),r.crossVectors(t,n);var l=this.direction.dot(r),f;if(l>0){if(c)return null;f=1}else if(l<0)f=-1,l=-l;else return null;e.subVectors(this.origin,a);var h=f*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=f*this.direction.dot(t.cross(e));if(d<0||h+d>l)return null;var p=-f*e.dot(r);return p<0?null:this.at(p/l,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});function ci(e,t){this.start=e!==void 0?e:new M,this.end=t!==void 0?t:new M}Object.assign(ci.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new M;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new M;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new M;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new M,t=new M;return function(r,i){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var a=t.dot(t),s=t.dot(e),o=s/a;return i&&(o=Ce.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t),i=n||new M;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function Cn(e,t,n){this.a=e!==void 0?e:new M,this.b=t!==void 0?t:new M,this.c=n!==void 0?n:new M}Object.assign(Cn,{normal:function(){var e=new M;return function(n,r,i,a){var s=a||new M;s.subVectors(i,r),e.subVectors(n,r),s.cross(e);var o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new M,t=new M,n=new M;return function(i,a,s,o,c){e.subVectors(o,a),t.subVectors(s,a),n.subVectors(i,a);var u=e.dot(e),l=e.dot(t),f=e.dot(n),h=t.dot(t),d=t.dot(n),p=u*h-l*l,v=c||new M;if(p===0)return v.set(-2,-1,-1);var g=1/p,m=(h*f-l*d)*g,y=(u*d-l*f)*g;return v.set(1-m-y,y,m)}}(),containsPoint:function(){var e=new M;return function(n,r,i,a){var s=Cn.barycoordFromPoint(n,r,i,a,e);return s.x>=0&&s.y>=0&&s.x+s.y<=1}}()});Object.assign(Cn.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new M,t=new M;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),e.cross(t).length()*.5}}(),midpoint:function(e){var t=e||new M;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Cn.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new kt;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Cn.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Cn.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new kt,t=[new ci,new ci,new ci],n=new M,r=new M;return function(a,s){var o=s||new M,c=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(a,n),this.containsPoint(n)===!0)o.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(n,!0,r);var l=n.distanceToSquared(r);l<c&&(c=l,o.copy(r))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});function Mt(e,t){ve.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new ye,this.material=t!==void 0?t:new Pt({color:Math.random()*16777215}),this.drawMode=Wf,this.updateMorphTargets()}Mt.prototype=Object.assign(Object.create(ve.prototype),{constructor:Mt,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ve.prototype.copy.call(this,e),this.drawMode=e.drawMode,e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry,t,n,r;if(e.isBufferGeometry){var i=e.morphAttributes,a=Object.keys(i);if(a.length>0){var s=i[a[0]];if(s!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=s.length;t<n;t++)r=s[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var o=e.morphTargets;if(o!==void 0&&o.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,n=o.length;t<n;t++)r=o[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}},raycast:function(){var e=new Le,t=new Jr,n=new rn,r=new M,i=new M,a=new M,s=new M,o=new M,c=new M,u=new se,l=new se,f=new se,h=new M,d=new M,p=new M;function v(y,_,x,E,T,S,C){return Cn.barycoordFromPoint(y,_,x,E,h),T.multiplyScalar(h.x),S.multiplyScalar(h.y),C.multiplyScalar(h.z),T.add(S).add(C),T.clone()}function g(y,_,x,E,T,S,C,R){var F;if(_.side===tr?F=E.intersectTriangle(C,S,T,!0,R):F=E.intersectTriangle(T,S,C,_.side!==Yr,R),F===null)return null;p.copy(R),p.applyMatrix4(y.matrixWorld);var z=x.ray.origin.distanceTo(p);return z<x.near||z>x.far?null:{distance:z,point:p.clone(),object:y}}function m(y,_,x,E,T,S,C,R){r.fromBufferAttribute(E,S),i.fromBufferAttribute(E,C),a.fromBufferAttribute(E,R);var F=g(y,y.material,_,x,r,i,a,d);return F&&(T&&(u.fromBufferAttribute(T,S),l.fromBufferAttribute(T,C),f.fromBufferAttribute(T,R),F.uv=v(d,r,i,a,u,l,f)),F.face=new $n(S,C,R,Cn.normal(r,i,a)),F.faceIndex=S),F}return function(_,x){var E=this.geometry,T=this.material,S=this.matrixWorld;if(T!==void 0&&(E.boundingSphere===null&&E.computeBoundingSphere(),n.copy(E.boundingSphere),n.applyMatrix4(S),_.ray.intersectsSphere(n)!==!1&&(e.getInverse(S),t.copy(_.ray).applyMatrix4(e),!(E.boundingBox!==null&&t.intersectsBox(E.boundingBox)===!1)))){var C;if(E.isBufferGeometry){var R,F,z,q=E.index,$=E.attributes.position,te=E.attributes.uv,L,A;if(q!==null)for(L=0,A=q.count;L<A;L+=3)R=q.getX(L),F=q.getX(L+1),z=q.getX(L+2),C=m(this,_,t,$,te,R,F,z),C&&(C.faceIndex=Math.floor(L/3),x.push(C));else if($!==void 0)for(L=0,A=$.count;L<A;L+=3)R=L,F=L+1,z=L+2,C=m(this,_,t,$,te,R,F,z),C&&(C.index=R,x.push(C))}else if(E.isGeometry){var H,B,Q,J=Array.isArray(T),Z=E.vertices,ue=E.faces,de,_e=E.faceVertexUvs[0];_e.length>0&&(de=_e);for(var k=0,I=ue.length;k<I;k++){var G=ue[k],K=J?T[G.materialIndex]:T;if(K!==void 0){if(H=Z[G.a],B=Z[G.b],Q=Z[G.c],K.morphTargets===!0){var xe=E.morphTargets,le=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var ge=0,w=xe.length;ge<w;ge++){var D=le[ge];if(D!==0){var V=xe[ge].vertices;r.addScaledVector(s.subVectors(V[G.a],H),D),i.addScaledVector(o.subVectors(V[G.b],B),D),a.addScaledVector(c.subVectors(V[G.c],Q),D)}}r.add(H),i.add(B),a.add(Q),H=r,B=i,Q=a}if(C=g(this,K,_,t,H,B,Q,d),C){if(de&&de[k]){var W=de[k];u.copy(W[0]),l.copy(W[1]),f.copy(W[2]),C.uv=v(d,H,B,Q,u,l,f)}C.face=G,C.faceIndex=k,x.push(C)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function q0(e,t,n,r){var i=new we(0),a=0,s,o,c;function u(f,h,d,p){var v=h.background;v===null?l(i,a):v&&v.isColor&&(l(v,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&v.isCubeTexture?(c===void 0&&(c=new Mt(new Pr(1,1,1),new qt({uniforms:_r.cube.uniforms,vertexShader:_r.cube.vertexShader,fragmentShader:_r.cube.fragmentShader,side:tr,depthTest:!0,depthWrite:!1,fog:!1})),c.geometry.removeAttribute("normal"),c.geometry.removeAttribute("uv"),c.onBeforeRender=function(g,m,y){this.matrixWorld.copyPosition(y.matrixWorld)},n.update(c.geometry)),c.material.uniforms.tCube.value=v,f.push(c,c.geometry,c.material,0,null)):v&&v.isTexture&&(s===void 0&&(s=new wi(-1,1,1,-1,0,1),o=new Mt(new Lr(2,2),new Pt({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o.geometry)),o.material.map=v,e.renderBufferDirect(s,null,o.geometry,o.material,o,null))}function l(f,h){t.buffers.color.setClear(f.r,f.g,f.b,h,r)}return{getClearColor:function(){return i},setClearColor:function(f,h){i.set(f),a=h!==void 0?h:1,l(i,a)},getClearAlpha:function(){return a},setClearAlpha:function(f){a=f,l(i,a)},render:u}}function Z0(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function J0(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function K0(){var e=[],t=0,n=[],r=[];function i(){t=0,n.length=0,r.length=0}function a(o,c,u,l,f){var h=e[t];h===void 0?(h={id:o.id,object:o,geometry:c,material:u,program:u.program,renderOrder:o.renderOrder,z:l,group:f},e[t]=h):(h.id=o.id,h.object=o,h.geometry=c,h.material=u,h.program=u.program,h.renderOrder=o.renderOrder,h.z=l,h.group=f),(u.transparent===!0?r:n).push(h),t++}function s(){n.length>1&&n.sort(Z0),r.length>1&&r.sort(J0)}return{opaque:n,transparent:r,init:i,push:a,sort:s}}function Q0(){var e={};function t(r,i){var a=r.id+","+i.id,s=e[a];return s===void 0&&(s=new K0,e[a]=s),s}function n(){e={}}return{get:t,dispose:n}}function $0(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ex(e){var t={},n=new Float32Array(8);function r(i,a,s,o){var c=i.morphTargetInfluences,u=c.length,l=t[a.id];if(l===void 0){l=[];for(var f=0;f<u;f++)l[f]=[f,0];t[a.id]=l}for(var h=s.morphTargets&&a.morphAttributes.position,d=s.morphNormals&&a.morphAttributes.normal,f=0;f<u;f++){var p=l[f];p[1]!==0&&(h&&a.removeAttribute("morphTarget"+f),d&&a.removeAttribute("morphNormal"+f))}for(var f=0;f<u;f++){var p=l[f];p[0]=f,p[1]=c[f]}l.sort($0);for(var f=0;f<8;f++){var p=l[f];if(p){var v=p[0],g=p[1];if(g){h&&a.addAttribute("morphTarget"+f,h[v]),d&&a.addAttribute("morphNormal"+f,d[v]),n[f]=g;continue}}n[f]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function tx(e,t,n){var r;function i(l){r=l}var a,s;function o(l){a=l.type,s=l.bytesPerElement}function c(l,f){e.drawElements(r,f,a,l*s),n.calls++,n.vertices+=f,r===e.TRIANGLES?n.faces+=f/3:r===e.POINTS&&(n.points+=f)}function u(l,f,h){var d=t.get("ANGLE_instanced_arrays");if(d===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d.drawElementsInstancedANGLE(r,h,a,f*s,l.maxInstancedCount),n.calls++,n.vertices+=h*l.maxInstancedCount,r===e.TRIANGLES?n.faces+=l.maxInstancedCount*h/3:r===e.POINTS&&(n.points+=l.maxInstancedCount*h)}this.setMode=i,this.setIndex=o,this.render=c,this.renderInstances=u}function nx(e,t,n){var r;function i(o){r=o}function a(o,c){e.drawArrays(r,o,c),n.calls++,n.vertices+=c,r===e.TRIANGLES?n.faces+=c/3:r===e.POINTS&&(n.points+=c)}function s(o,c,u){var l=t.get("ANGLE_instanced_arrays");if(l===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}var f=o.attributes.position;f.isInterleavedBufferAttribute?(u=f.data.count,l.drawArraysInstancedANGLE(r,0,u,o.maxInstancedCount)):l.drawArraysInstancedANGLE(r,c,u,o.maxInstancedCount),n.calls++,n.vertices+=u*o.maxInstancedCount,r===e.TRIANGLES?n.faces+=o.maxInstancedCount*u/3:r===e.POINTS&&(n.points+=o.maxInstancedCount*u)}this.setMode=i,this.render=a,this.renderInstances=s}function rx(e,t,n){var r={},i={};function a(u){var l=u.target,f=r[l.id];f.index!==null&&t.remove(f.index);for(var h in f.attributes)t.remove(f.attributes[h]);l.removeEventListener("dispose",a),delete r[l.id];var d=i[l.id];d&&(t.remove(d),delete i[l.id]),d=i[f.id],d&&(t.remove(d),delete i[f.id]),n.geometries--}function s(u,l){var f=r[l.id];return f||(l.addEventListener("dispose",a),l.isBufferGeometry?f=l:l.isGeometry&&(l._bufferGeometry===void 0&&(l._bufferGeometry=new ye().setFromObject(u)),f=l._bufferGeometry),r[l.id]=f,n.geometries++,f)}function o(u){var l=u.index,f=u.attributes;l!==null&&t.update(l,e.ELEMENT_ARRAY_BUFFER);for(var h in f)t.update(f[h],e.ARRAY_BUFFER);var d=u.morphAttributes;for(var h in d)for(var p=d[h],v=0,g=p.length;v<g;v++)t.update(p[v],e.ARRAY_BUFFER)}function c(u){var l=i[u.id];if(l)return l;var f=[],h=u.index,d=u.attributes;if(h!==null)for(var p=h.array,v=0,g=p.length;v<g;v+=3){var m=p[v+0],y=p[v+1],_=p[v+2];f.push(m,y,y,_,_,m)}else for(var p=d.position.array,v=0,g=p.length/3-1;v<g;v+=3){var m=v+0,y=v+1,_=v+2;f.push(m,y,y,_,_,m)}return l=new(Po(f)>65535?Ei:Mi)(f,1),t.update(l,e.ELEMENT_ARRAY_BUFFER),i[u.id]=l,l}return{get:s,update:o,getWireframeAttribute:c}}function ix(){var e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new M,color:new we,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new se};break;case"SpotLight":n={position:new M,direction:new M,color:new we,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new se};break;case"PointLight":n={position:new M,color:new we,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new se,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new M,skyColor:new we,groundColor:new we};break;case"RectAreaLight":n={color:new we,position:new M,halfWidth:new M,halfHeight:new M};break}return e[t.id]=n,n}}}function ax(){var e=new ix,t={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new M,r=new Le,i=new Le;function a(s,o,c){for(var u=0,l=0,f=0,h=0,d=0,p=0,v=0,g=0,m=c.matrixWorldInverse,y=0,_=s.length;y<_;y++){var x=s[y],E=x.color,T=x.intensity,S=x.distance,C=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)u+=E.r*T,l+=E.g*T,f+=E.b*T;else if(x.isDirectionalLight){var R=e.get(x);if(R.color.copy(x.color).multiplyScalar(x.intensity),R.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),R.direction.sub(n),R.direction.transformDirection(m),R.shadow=x.castShadow,x.castShadow){var F=x.shadow;R.shadowBias=F.bias,R.shadowRadius=F.radius,R.shadowMapSize=F.mapSize}t.directionalShadowMap[h]=C,t.directionalShadowMatrix[h]=x.shadow.matrix,t.directional[h]=R,h++}else if(x.isSpotLight){var R=e.get(x);if(R.position.setFromMatrixPosition(x.matrixWorld),R.position.applyMatrix4(m),R.color.copy(E).multiplyScalar(T),R.distance=S,R.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),R.direction.sub(n),R.direction.transformDirection(m),R.coneCos=Math.cos(x.angle),R.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),R.decay=x.distance===0?0:x.decay,R.shadow=x.castShadow,x.castShadow){var F=x.shadow;R.shadowBias=F.bias,R.shadowRadius=F.radius,R.shadowMapSize=F.mapSize}t.spotShadowMap[p]=C,t.spotShadowMatrix[p]=x.shadow.matrix,t.spot[p]=R,p++}else if(x.isRectAreaLight){var R=e.get(x);R.color.copy(E).multiplyScalar(T/(x.width*x.height)),R.position.setFromMatrixPosition(x.matrixWorld),R.position.applyMatrix4(m),i.identity(),r.copy(x.matrixWorld),r.premultiply(m),i.extractRotation(r),R.halfWidth.set(x.width*.5,0,0),R.halfHeight.set(0,x.height*.5,0),R.halfWidth.applyMatrix4(i),R.halfHeight.applyMatrix4(i),t.rectArea[v]=R,v++}else if(x.isPointLight){var R=e.get(x);if(R.position.setFromMatrixPosition(x.matrixWorld),R.position.applyMatrix4(m),R.color.copy(x.color).multiplyScalar(x.intensity),R.distance=x.distance,R.decay=x.distance===0?0:x.decay,R.shadow=x.castShadow,x.castShadow){var F=x.shadow;R.shadowBias=F.bias,R.shadowRadius=F.radius,R.shadowMapSize=F.mapSize,R.shadowCameraNear=F.camera.near,R.shadowCameraFar=F.camera.far}t.pointShadowMap[d]=C,t.pointShadowMatrix[d]=x.shadow.matrix,t.point[d]=R,d++}else if(x.isHemisphereLight){var R=e.get(x);R.direction.setFromMatrixPosition(x.matrixWorld),R.direction.transformDirection(m),R.direction.normalize(),R.skyColor.copy(x.color).multiplyScalar(T),R.groundColor.copy(x.groundColor).multiplyScalar(T),t.hemi[g]=R,g++}}t.ambient[0]=u,t.ambient[1]=l,t.ambient[2]=f,t.directional.length=h,t.spot.length=p,t.rectArea.length=v,t.point.length=d,t.hemi.length=g,t.hash=h+","+d+","+p+","+v+","+g+","+o.length}return{setup:a,state:t}}function sx(e,t){var n={};function r(a){var s=t.frame,o=a.geometry,c=e.get(a,o);return n[c.id]!==s&&(o.isGeometry&&c.updateFromObject(a),e.update(c),n[c.id]=s),c}function i(){n={}}return{update:r,clear:i}}function ox(e){for(var t=e.split(`
`),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function $u(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),e.getShaderInfoLog(r)!==""&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),ox(n)),r}var cx=0;function rh(e){switch(e){case Fa:return["Linear","( value )"];case sg:return["sRGB","( value )"];case og:return["RGBE","( value )"];case cg:return["RGBM","( value, 7.0 )"];case ug:return["RGBM","( value, 16.0 )"];case lg:return["RGBD","( value, 256.0 )"];case Xf:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Zs(e,t){var n=rh(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ux(e,t){var n=rh(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function lx(e,t){var n;switch(t){case zf:n="Linear";break;case km:n="Reinhard";break;case Vm:n="Uncharted2";break;case Wm:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function fx(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(ti).join(`
`)}function hx(e){var t=[];for(var n in e){var r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function dx(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),s=a.name;n[s]=e.getAttribLocation(t,s)}return n}function ti(e){return e!==""}function el(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Lo(e){var t=/^[ \t]*#include +<([\w\d.]+)>/gm;function n(r,i){var a=We[i];if(a===void 0)throw new Error("Can not resolve #include <"+i+">");return Lo(a)}return e.replace(t,n)}function tl(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function n(r,i,a,s){for(var o="",c=parseInt(i);c<parseInt(a);c++)o+=s.replace(/\[ i \]/g,"[ "+c+" ]");return o}return e.replace(t,n)}function px(e,t,n,r,i,a){var s=e.context,o=r.defines,c=i.vertexShader,u=i.fragmentShader,l="SHADOWMAP_TYPE_BASIC";a.shadowMapType===Pf?l="SHADOWMAP_TYPE_PCF":a.shadowMapType===bm&&(l="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case Cc:case bo:f="ENVMAP_TYPE_CUBE";break;case Ic:case Oc:f="ENVMAP_TYPE_CUBE_UV";break;case Gf:case wo:f="ENVMAP_TYPE_EQUIREC";break;case Hf:f="ENVMAP_TYPE_SPHERE";break}switch(r.envMap.mapping){case bo:case wo:h="ENVMAP_MODE_REFRACTION";break}switch(r.combine){case Cs:d="ENVMAP_BLENDING_MULTIPLY";break;case Gm:d="ENVMAP_BLENDING_MIX";break;case Hm:d="ENVMAP_BLENDING_ADD";break}}var p=e.gammaFactor>0?e.gammaFactor:1,v=fx(r.extensions,a,t),g=hx(o),m=s.createProgram(),y,_;r.isRawShaderMaterial?(y=[g].filter(ti).join(`
`),y.length>0&&(y+=`
`),_=[v,g].filter(ti).join(`
`),_.length>0&&(_+=`
`)):(y=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,g,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+p,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&a.flatShading===!1?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+l:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ti).join(`
`),_=[v,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,g,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+p,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.envMap?"#define "+h:"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+a.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(a.numClippingPlanes-a.numClipIntersection),a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+l:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==js?"#define TONE_MAPPING":"",a.toneMapping!==js?We.tonemapping_pars_fragment:"",a.toneMapping!==js?lx("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?We.encodings_pars_fragment:"",a.mapEncoding?Zs("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Zs("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Zs("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?ux("linearToOutputTexel",a.outputEncoding):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(ti).join(`
`)),c=Lo(c),c=el(c,a),u=Lo(u),u=el(u,a),r.isShaderMaterial||(c=tl(c),u=tl(u));var x=y+c,E=_+u,T=$u(s,s.VERTEX_SHADER,x),S=$u(s,s.FRAGMENT_SHADER,E);s.attachShader(m,T),s.attachShader(m,S),r.index0AttributeName!==void 0?s.bindAttribLocation(m,0,r.index0AttributeName):a.morphTargets===!0&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m);var C=s.getProgramInfoLog(m),R=s.getShaderInfoLog(T),F=s.getShaderInfoLog(S),z=!0,q=!0;s.getProgramParameter(m,s.LINK_STATUS)===!1?(z=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(m,s.VALIDATE_STATUS),"gl.getProgramInfoLog",C,R,F)):C!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):(R===""||F==="")&&(q=!1),q&&(this.diagnostics={runnable:z,material:r,programLog:C,vertexShader:{log:R,prefix:y},fragmentShader:{log:F,prefix:_}}),s.deleteShader(T),s.deleteShader(S);var $;this.getUniforms=function(){return $===void 0&&($=new rr(s,m,e)),$};var te;return this.getAttributes=function(){return te===void 0&&(te=dx(s,m)),te},this.destroy=function(){s.deleteProgram(m),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=cx++,this.code=n,this.usedTimes=1,this.program=m,this.vertexShader=T,this.fragmentShader=S,this}function vx(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(c){var u=c.skeleton,l=u.bones;if(n.floatVertexTextures)return 1024;var f=n.maxVertexUniforms,h=Math.floor((f-20)/4),d=Math.min(h,l.length);return d<l.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+l.length+" bones. This GPU supports "+d+"."),0):d}function o(c,u){var l;return c?c.isTexture?l=c.encoding:c.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),l=c.texture.encoding):l=Fa,l===Fa&&u&&(l=Xf),l}this.getParameters=function(c,u,l,f,h,d,p){var v=i[c.type],g=p.isSkinnedMesh?s(p):0,m=n.precision;c.precision!==null&&(m=n.getMaxPrecision(c.precision),m!==c.precision&&console.warn("THREE.WebGLProgram.getParameters:",c.precision,"not supported, using",m,"instead."));var y=e.getRenderTarget(),_={shaderID:v,precision:m,supportsVertexTextures:n.vertexTextures,outputEncoding:o(y?y.texture:null,e.gammaOutput),map:!!c.map,mapEncoding:o(c.map,e.gammaInput),envMap:!!c.envMap,envMapMode:c.envMap&&c.envMap.mapping,envMapEncoding:o(c.envMap,e.gammaInput),envMapCubeUV:!!c.envMap&&(c.envMap.mapping===Ic||c.envMap.mapping===Oc),lightMap:!!c.lightMap,aoMap:!!c.aoMap,emissiveMap:!!c.emissiveMap,emissiveMapEncoding:o(c.emissiveMap,e.gammaInput),bumpMap:!!c.bumpMap,normalMap:!!c.normalMap,displacementMap:!!c.displacementMap,roughnessMap:!!c.roughnessMap,metalnessMap:!!c.metalnessMap,specularMap:!!c.specularMap,alphaMap:!!c.alphaMap,gradientMap:!!c.gradientMap,combine:c.combine,vertexColors:c.vertexColors,fog:!!f,useFog:c.fog,fogExp:f&&f.isFogExp2,flatShading:c.flatShading,sizeAttenuation:c.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:c.skinning&&g>0,maxBones:g,useVertexTexture:n.floatVertexTextures,morphTargets:c.morphTargets,morphNormals:c.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numClippingPlanes:h,numClipIntersection:d,dithering:c.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.receiveShadow&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:c.premultipliedAlpha,alphaTest:c.alphaTest,doubleSided:c.side===Yr,flipSided:c.side===tr,depthPacking:c.depthPacking!==void 0?c.depthPacking:!1};return _},this.getProgramCode=function(c,u){var l=[];if(u.shaderID?l.push(u.shaderID):(l.push(c.fragmentShader),l.push(c.vertexShader)),c.defines!==void 0)for(var f in c.defines)l.push(f),l.push(c.defines[f]);for(var h=0;h<a.length;h++)l.push(u[a[h]]);return l.push(c.onBeforeCompile.toString()),l.push(e.gammaOutput),l.join()},this.acquireProgram=function(c,u,l,f){for(var h,d=0,p=r.length;d<p;d++){var v=r[d];if(v.code===f){h=v,++h.usedTimes;break}}return h===void 0&&(h=new px(e,t,f,c,u,l),r.push(h)),h},this.releaseProgram=function(c){if(--c.usedTimes===0){var u=r.indexOf(c);r[u]=r[r.length-1],r.pop(),c.destroy()}},this.programs=r}function mx(e,t,n,r,i,a,s){var o=typeof WebGL2RenderingContext<"u"&&e instanceof window.WebGL2RenderingContext,c={};function u(L,A){if(L.width>A||L.height>A){var H=A/Math.max(L.width,L.height),B=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");B.width=Math.floor(L.width*H),B.height=Math.floor(L.height*H);var Q=B.getContext("2d");return Q.drawImage(L,0,0,L.width,L.height,0,0,B.width,B.height),console.warn("THREE.WebGLRenderer: image is too big ("+L.width+"x"+L.height+"). Resized to "+B.width+"x"+B.height,L),B}return L}function l(L){return Ce.isPowerOfTwo(L.width)&&Ce.isPowerOfTwo(L.height)}function f(L){if(L instanceof HTMLImageElement||L instanceof HTMLCanvasElement||L instanceof ImageBitmap){var A=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");A.width=Ce.floorPowerOfTwo(L.width),A.height=Ce.floorPowerOfTwo(L.height);var H=A.getContext("2d");return H.drawImage(L,0,0,A.width,A.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+L.width+"x"+L.height+"). Resized to "+A.width+"x"+A.height,L),A}return L}function h(L){return L.wrapS!==Nt||L.wrapT!==Nt||L.minFilter!==Ut&&L.minFilter!==St}function d(L,A){return L.generateMipmaps&&A&&L.minFilter!==Ut&&L.minFilter!==St}function p(L){return L===Ut||L===Dc||L===Fc?e.NEAREST:e.LINEAR}function v(L){var A=L.target;A.removeEventListener("dispose",v),m(A),A.isVideoTexture&&delete c[A.id],s.textures--}function g(L){var A=L.target;A.removeEventListener("dispose",g),y(A),s.textures--}function m(L){var A=r.get(L);if(L.image&&A.__image__webglTextureCube)e.deleteTexture(A.__image__webglTextureCube);else{if(A.__webglInit===void 0)return;e.deleteTexture(A.__webglTexture)}r.remove(L)}function y(L){var A=r.get(L),H=r.get(L.texture);if(!!L){if(H.__webglTexture!==void 0&&e.deleteTexture(H.__webglTexture),L.depthTexture&&L.depthTexture.dispose(),L.isWebGLRenderTargetCube)for(var B=0;B<6;B++)e.deleteFramebuffer(A.__webglFramebuffer[B]),A.__webglDepthbuffer&&e.deleteRenderbuffer(A.__webglDepthbuffer[B]);else e.deleteFramebuffer(A.__webglFramebuffer),A.__webglDepthbuffer&&e.deleteRenderbuffer(A.__webglDepthbuffer);r.remove(L.texture),r.remove(L)}}function _(L,A){var H=r.get(L);if(L.version>0&&H.__version!==L.version){var B=L.image;if(B===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",L);else if(B.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",L);else{S(H,L,A);return}}n.activeTexture(e.TEXTURE0+A),n.bindTexture(e.TEXTURE_2D,H.__webglTexture)}function x(L,A){var H=r.get(L);if(L.image.length===6)if(L.version>0&&H.__version!==L.version){H.__image__webglTextureCube||(L.addEventListener("dispose",v),H.__image__webglTextureCube=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+A),n.bindTexture(e.TEXTURE_CUBE_MAP,H.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,L.flipY);for(var B=L&&L.isCompressedTexture,Q=L.image[0]&&L.image[0].isDataTexture,J=[],Z=0;Z<6;Z++)!B&&!Q?J[Z]=u(L.image[Z],i.maxCubemapSize):J[Z]=Q?L.image[Z].image:L.image[Z];var ue=J[0],de=l(ue),_e=a.convert(L.format),k=a.convert(L.type);T(e.TEXTURE_CUBE_MAP,L,de);for(var Z=0;Z<6;Z++)if(!B)Q?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0,_e,J[Z].width,J[Z].height,0,_e,k,J[Z].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0,_e,_e,k,J[Z]);else for(var I,G=J[Z].mipmaps,K=0,xe=G.length;K<xe;K++)I=G[K],L.format!==zn&&L.format!==xi?n.getCompressedTextureFormats().indexOf(_e)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,K,_e,I.width,I.height,0,I.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+Z,K,_e,I.width,I.height,0,_e,k,I.data);d(L,de)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),H.__version=L.version,L.onUpdate&&L.onUpdate(L)}else n.activeTexture(e.TEXTURE0+A),n.bindTexture(e.TEXTURE_CUBE_MAP,H.__image__webglTextureCube)}function E(L,A){n.activeTexture(e.TEXTURE0+A),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(L).__webglTexture)}function T(L,A,H){var B;if(H?(e.texParameteri(L,e.TEXTURE_WRAP_S,a.convert(A.wrapS)),e.texParameteri(L,e.TEXTURE_WRAP_T,a.convert(A.wrapT)),e.texParameteri(L,e.TEXTURE_MAG_FILTER,a.convert(A.magFilter)),e.texParameteri(L,e.TEXTURE_MIN_FILTER,a.convert(A.minFilter))):(e.texParameteri(L,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(L,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(A.wrapS!==Nt||A.wrapT!==Nt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",A),e.texParameteri(L,e.TEXTURE_MAG_FILTER,p(A.magFilter)),e.texParameteri(L,e.TEXTURE_MIN_FILTER,p(A.minFilter)),A.minFilter!==Ut&&A.minFilter!==St&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",A)),B=t.get("EXT_texture_filter_anisotropic"),B){if(A.type===yi&&t.get("OES_texture_float_linear")===null||A.type===Uc&&t.get("OES_texture_half_float_linear")===null)return;(A.anisotropy>1||r.get(A).__currentAnisotropy)&&(e.texParameterf(L,B.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,i.getMaxAnisotropy())),r.get(A).__currentAnisotropy=A.anisotropy)}}function S(L,A,H){L.__webglInit===void 0&&(L.__webglInit=!0,A.addEventListener("dispose",v),L.__webglTexture=e.createTexture(),A.isVideoTexture&&(c[A.id]=A),s.textures++),n.activeTexture(e.TEXTURE0+H),n.bindTexture(e.TEXTURE_2D,L.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,A.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,A.unpackAlignment);var B=u(A.image,i.maxTextureSize);h(A)&&l(B)===!1&&(B=f(B));var Q=l(B),J=a.convert(A.format),Z=a.convert(A.type);T(e.TEXTURE_2D,A,Q);var ue,de=A.mipmaps;if(A.isDepthTexture){var _e=e.DEPTH_COMPONENT;if(A.type===yi){if(!o)throw new Error("Float Depth Texture only supported in WebGL2.0");_e=e.DEPTH_COMPONENT32F}else o&&(_e=e.DEPTH_COMPONENT16);A.format===xr&&_e===e.DEPTH_COMPONENT&&A.type!==Ca&&A.type!==Vf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),A.type=Ca,Z=a.convert(A.type)),A.format===_i&&(_e=e.DEPTH_STENCIL,A.type!==Ia&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),A.type=Ia,Z=a.convert(A.type))),n.texImage2D(e.TEXTURE_2D,0,_e,B.width,B.height,0,J,Z,null)}else if(A.isDataTexture)if(de.length>0&&Q){for(var k=0,I=de.length;k<I;k++)ue=de[k],n.texImage2D(e.TEXTURE_2D,k,J,ue.width,ue.height,0,J,Z,ue.data);A.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,J,B.width,B.height,0,J,Z,B.data);else if(A.isCompressedTexture)for(var k=0,I=de.length;k<I;k++)ue=de[k],A.format!==zn&&A.format!==xi?n.getCompressedTextureFormats().indexOf(J)>-1?n.compressedTexImage2D(e.TEXTURE_2D,k,J,ue.width,ue.height,0,ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,k,J,ue.width,ue.height,0,J,Z,ue.data);else if(de.length>0&&Q){for(var k=0,I=de.length;k<I;k++)ue=de[k],n.texImage2D(e.TEXTURE_2D,k,J,J,Z,ue);A.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,J,J,Z,B);d(A,Q)&&e.generateMipmap(e.TEXTURE_2D),L.__version=A.version,A.onUpdate&&A.onUpdate(A)}function C(L,A,H,B){var Q=a.convert(A.texture.format),J=a.convert(A.texture.type);n.texImage2D(B,0,Q,A.width,A.height,0,Q,J,null),e.bindFramebuffer(e.FRAMEBUFFER,L),e.framebufferTexture2D(e.FRAMEBUFFER,H,B,r.get(A.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function R(L,A){e.bindRenderbuffer(e.RENDERBUFFER,L),A.depthBuffer&&!A.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,A.width,A.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,L)):A.depthBuffer&&A.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,A.width,A.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,L)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,A.width,A.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function F(L,A){var H=A&&A.isWebGLRenderTargetCube;if(H)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,L),!(A.depthTexture&&A.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(A.depthTexture).__webglTexture||A.depthTexture.image.width!==A.width||A.depthTexture.image.height!==A.height)&&(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),_(A.depthTexture,0);var B=r.get(A.depthTexture).__webglTexture;if(A.depthTexture.format===xr)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,B,0);else if(A.depthTexture.format===_i)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,B,0);else throw new Error("Unknown depthTexture format")}function z(L){var A=r.get(L),H=L.isWebGLRenderTargetCube===!0;if(L.depthTexture){if(H)throw new Error("target.depthTexture not supported in Cube render targets");F(A.__webglFramebuffer,L)}else if(H){A.__webglDepthbuffer=[];for(var B=0;B<6;B++)e.bindFramebuffer(e.FRAMEBUFFER,A.__webglFramebuffer[B]),A.__webglDepthbuffer[B]=e.createRenderbuffer(),R(A.__webglDepthbuffer[B],L)}else e.bindFramebuffer(e.FRAMEBUFFER,A.__webglFramebuffer),A.__webglDepthbuffer=e.createRenderbuffer(),R(A.__webglDepthbuffer,L);e.bindFramebuffer(e.FRAMEBUFFER,null)}function q(L){var A=r.get(L),H=r.get(L.texture);L.addEventListener("dispose",g),H.__webglTexture=e.createTexture(),s.textures++;var B=L.isWebGLRenderTargetCube===!0,Q=l(L);if(B){A.__webglFramebuffer=[];for(var J=0;J<6;J++)A.__webglFramebuffer[J]=e.createFramebuffer()}else A.__webglFramebuffer=e.createFramebuffer();if(B){n.bindTexture(e.TEXTURE_CUBE_MAP,H.__webglTexture),T(e.TEXTURE_CUBE_MAP,L.texture,Q);for(var J=0;J<6;J++)C(A.__webglFramebuffer[J],L,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+J);d(L.texture,Q)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,H.__webglTexture),T(e.TEXTURE_2D,L.texture,Q),C(A.__webglFramebuffer,L,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(L.texture,Q)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);L.depthBuffer&&z(L)}function $(L){var A=L.texture,H=l(L);if(d(A,H)){var B=L.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,Q=r.get(A).__webglTexture;n.bindTexture(B,Q),e.generateMipmap(B),n.bindTexture(B,null)}}function te(){for(var L in c)c[L].update()}this.setTexture2D=_,this.setTextureCube=x,this.setTextureCubeDynamic=E,this.setupRenderTarget=q,this.updateRenderTargetMipmap=$,this.updateVideoTextures=te}function gx(){var e={};function t(i){var a=i.uuid,s=e[a];return s===void 0&&(s={},e[a]=s),s}function n(i){delete e[i.uuid]}function r(){e={}}return{get:t,remove:n,clear:r}}function yx(e,t,n){function r(){var O=!1,j=new qe,ae=null,he=new qe(0,0,0,0);return{setMask:function(ce){ae!==ce&&!O&&(e.colorMask(ce,ce,ce,ce),ae=ce)},setLocked:function(ce){O=ce},setClear:function(ce,Me,Ie,Ue,it){it===!0&&(ce*=Ue,Me*=Ue,Ie*=Ue),j.set(ce,Me,Ie,Ue),he.equals(j)===!1&&(e.clearColor(ce,Me,Ie,Ue),he.copy(j))},reset:function(){O=!1,ae=null,he.set(-1,0,0,0)}}}function i(){var O=!1,j=null,ae=null,he=null;return{setTest:function(ce){ce?I(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(ce){j!==ce&&!O&&(e.depthMask(ce),j=ce)},setFunc:function(ce){if(ae!==ce){if(ce)switch(ce){case Om:e.depthFunc(e.NEVER);break;case Dm:e.depthFunc(e.ALWAYS);break;case Fm:e.depthFunc(e.LESS);break;case _o:e.depthFunc(e.LEQUAL);break;case Nm:e.depthFunc(e.EQUAL);break;case Um:e.depthFunc(e.GEQUAL);break;case Bm:e.depthFunc(e.GREATER);break;case zm:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);ae=ce}},setLocked:function(ce){O=ce},setClear:function(ce){he!==ce&&(e.clearDepth(ce),he=ce)},reset:function(){O=!1,j=null,ae=null,he=null}}}function a(){var O=!1,j=null,ae=null,he=null,ce=null,Me=null,Ie=null,Ue=null,it=null;return{setTest:function(He){He?I(e.STENCIL_TEST):G(e.STENCIL_TEST)},setMask:function(He){j!==He&&!O&&(e.stencilMask(He),j=He)},setFunc:function(He,ut,je){(ae!==He||he!==ut||ce!==je)&&(e.stencilFunc(He,ut,je),ae=He,he=ut,ce=je)},setOp:function(He,ut,je){(Me!==He||Ie!==ut||Ue!==je)&&(e.stencilOp(He,ut,je),Me=He,Ie=ut,Ue=je)},setLocked:function(He){O=He},setClear:function(He){it!==He&&(e.clearStencil(He),it=He)},reset:function(){O=!1,j=null,ae=null,he=null,ce=null,Me=null,Ie=null,Ue=null,it=null}}}var s=new r,o=new i,c=new a,u=e.getParameter(e.MAX_VERTEX_ATTRIBS),l=new Uint8Array(u),f=new Uint8Array(u),h=new Uint8Array(u),d={},p=null,v=null,g=null,m=null,y=null,_=null,x=null,E=null,T=null,S=!1,C=null,R=null,F=null,z=null,q=null,$=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),te=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),L=parseFloat(te)>=1,A=null,H={},B=new qe,Q=new qe;function J(O,j,ae){var he=new Uint8Array(4),ce=e.createTexture();e.bindTexture(O,ce),e.texParameteri(O,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(O,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var Me=0;Me<ae;Me++)e.texImage2D(j+Me,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,he);return ce}var Z={};Z[e.TEXTURE_2D]=J(e.TEXTURE_2D,e.TEXTURE_2D,1),Z[e.TEXTURE_CUBE_MAP]=J(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),I(e.DEPTH_TEST),o.setFunc(_o),w(!1),D(La),I(e.CULL_FACE),I(e.BLEND),le(sa);function ue(){for(var O=0,j=l.length;O<j;O++)l[O]=0}function de(O){if(l[O]=1,f[O]===0&&(e.enableVertexAttribArray(O),f[O]=1),h[O]!==0){var j=t.get("ANGLE_instanced_arrays");j.vertexAttribDivisorANGLE(O,0),h[O]=0}}function _e(O,j){if(l[O]=1,f[O]===0&&(e.enableVertexAttribArray(O),f[O]=1),h[O]!==j){var ae=t.get("ANGLE_instanced_arrays");ae.vertexAttribDivisorANGLE(O,j),h[O]=j}}function k(){for(var O=0,j=f.length;O!==j;++O)f[O]!==l[O]&&(e.disableVertexAttribArray(O),f[O]=0)}function I(O){d[O]!==!0&&(e.enable(O),d[O]=!0)}function G(O){d[O]!==!1&&(e.disable(O),d[O]=!1)}function K(){if(p===null&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var O=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),j=0;j<O.length;j++)p.push(O[j]);return p}function xe(O){return v!==O?(e.useProgram(O),v=O,!0):!1}function le(O,j,ae,he,ce,Me,Ie,Ue){if(O!==xo?I(e.BLEND):G(e.BLEND),O!==Ff){if(O!==g||Ue!==S)switch(O){case If:Ue?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case Of:Ue?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case Df:Ue?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:Ue?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}m=null,y=null,_=null,x=null,E=null,T=null}else ce=ce||j,Me=Me||ae,Ie=Ie||he,(j!==m||ce!==x)&&(e.blendEquationSeparate(n.convert(j),n.convert(ce)),m=j,x=ce),(ae!==y||he!==_||Me!==E||Ie!==T)&&(e.blendFuncSeparate(n.convert(ae),n.convert(he),n.convert(Me),n.convert(Ie)),y=ae,_=he,E=Me,T=Ie);g=O,S=Ue}function ge(O,j){O.side===Yr?G(e.CULL_FACE):I(e.CULL_FACE);var ae=O.side===tr;j&&(ae=!ae),w(ae),O.transparent===!0?le(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.premultipliedAlpha):le(xo),o.setFunc(O.depthFunc),o.setTest(O.depthTest),o.setMask(O.depthWrite),s.setMask(O.colorWrite),W(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits)}function w(O){C!==O&&(O?e.frontFace(e.CW):e.frontFace(e.CCW),C=O)}function D(O){O!==xm?(I(e.CULL_FACE),O!==R&&(O===La?e.cullFace(e.BACK):O===Rf?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),R=O}function V(O){O!==F&&(L&&e.lineWidth(O),F=O)}function W(O,j,ae){O?(I(e.POLYGON_OFFSET_FILL),(z!==j||q!==ae)&&(e.polygonOffset(j,ae),z=j,q=ae)):G(e.POLYGON_OFFSET_FILL)}function X(O){O?I(e.SCISSOR_TEST):G(e.SCISSOR_TEST)}function ie(O){O===void 0&&(O=e.TEXTURE0+$-1),A!==O&&(e.activeTexture(O),A=O)}function oe(O,j){A===null&&ie();var ae=H[A];ae===void 0&&(ae={type:void 0,texture:void 0},H[A]=ae),(ae.type!==O||ae.texture!==j)&&(e.bindTexture(O,j||Z[O]),ae.type=O,ae.texture=j)}function N(){try{e.compressedTexImage2D.apply(e,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ne(){try{e.texImage2D.apply(e,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Y(O){B.equals(O)===!1&&(e.scissor(O.x,O.y,O.z,O.w),B.copy(O))}function fe(O){Q.equals(O)===!1&&(e.viewport(O.x,O.y,O.z,O.w),Q.copy(O))}function ee(){for(var O=0;O<f.length;O++)f[O]===1&&(e.disableVertexAttribArray(O),f[O]=0);d={},p=null,A=null,H={},v=null,g=null,C=null,R=null,s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},initAttributes:ue,enableAttribute:de,enableAttributeAndDivisor:_e,disableUnusedAttributes:k,enable:I,disable:G,getCompressedTextureFormats:K,useProgram:xe,setBlending:le,setMaterial:ge,setFlipSided:w,setCullFace:D,setLineWidth:V,setPolygonOffset:W,setScissorTest:X,activeTexture:ie,bindTexture:oe,compressedTexImage2D:N,texImage2D:ne,scissor:Y,viewport:fe,reset:ee}}function xx(e,t,n){var r;function i(){if(r!==void 0)return r;var x=t.get("EXT_texture_filter_anisotropic");return x!==null?r=e.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function a(x){if(x==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var s=n.precision!==void 0?n.precision:"highp",o=a(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);var c=n.logarithmicDepthBuffer===!0,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),m=l>0,y=!!t.get("OES_texture_float"),_=m&&y;return{getMaxAnisotropy:i,getMaxPrecision:a,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:l,maxTextureSize:f,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:m,floatFragmentTextures:y,floatVertexTextures:_}}function st(e,t,n,r){mn.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=r!==void 0?r:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}st.prototype=Object.assign(Object.create(mn.prototype),{constructor:st,isPerspectiveCamera:!0,copy:function(e,t){return mn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=Ce.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(Ce.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return Ce.RAD2DEG*2*Math.atan(Math.tan(Ce.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(Ce.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(this.view!==null&&this.view.enabled){var s=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/s,t-=a.offsetY*n/o,r*=a.width/s,n*=a.height/o}var c=this.filmOffset;c!==0&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=ve.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function Co(e){st.call(this),this.cameras=e||[]}Co.prototype=Object.assign(Object.create(st.prototype),{constructor:Co,isArrayCamera:!0});function Gc(e){var t=this,n=null,r=null,i=null;typeof window<"u"&&"VRFrameData"in window&&(r=new window.VRFrameData);var a=new Le,s=new st;s.bounds=new qe(0,0,.5,1),s.layers.enable(1);var o=new st;o.bounds=new qe(.5,0,.5,1),o.layers.enable(2);var c=new Co([s,o]);c.layers.enable(1),c.layers.enable(2);var u,l;function f(){if(n!==null&&n.isPresenting){var h=n.getEyeParameters("left"),d=h.renderWidth,p=h.renderHeight;l=e.getPixelRatio(),u=e.getSize(),e.setDrawingBufferSize(d*2,p,1)}else t.enabled&&e.setDrawingBufferSize(u.width,u.height,l)}typeof window<"u"&&window.addEventListener("vrdisplaypresentchange",f,!1),this.enabled=!1,this.getDevice=function(){return n},this.setDevice=function(h){h!==void 0&&(n=h)},this.setPoseTarget=function(h){h!==void 0&&(i=h)},this.getCamera=function(h){if(n===null)return h;n.depthNear=h.near,n.depthFar=h.far,n.getFrameData(r);var d=r.pose,p=i!==null?i:h;if(d.position!==null?p.position.fromArray(d.position):p.position.set(0,0,0),d.orientation!==null&&p.quaternion.fromArray(d.orientation),p.updateMatrixWorld(),n.isPresenting===!1)return h;s.near=h.near,o.near=h.near,s.far=h.far,o.far=h.far,c.matrixWorld.copy(h.matrixWorld),c.matrixWorldInverse.copy(h.matrixWorldInverse),s.matrixWorldInverse.fromArray(r.leftViewMatrix),o.matrixWorldInverse.fromArray(r.rightViewMatrix);var v=p.parent;v!==null&&(a.getInverse(v.matrixWorld),s.matrixWorldInverse.multiply(a),o.matrixWorldInverse.multiply(a)),s.matrixWorld.getInverse(s.matrixWorldInverse),o.matrixWorld.getInverse(o.matrixWorldInverse),s.projectionMatrix.fromArray(r.leftProjectionMatrix),o.projectionMatrix.fromArray(r.rightProjectionMatrix),c.projectionMatrix.copy(s.projectionMatrix);var g=n.getLayers();if(g.length){var m=g[0];m.leftBounds!==null&&m.leftBounds.length===4&&s.bounds.fromArray(m.leftBounds),m.rightBounds!==null&&m.rightBounds.length===4&&o.bounds.fromArray(m.rightBounds)}return c},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",f)}}function _x(e){var t={};return{get:function(n){if(t[n]!==void 0)return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=e.getExtension("WEBGL_compressed_texture_etc1");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function bx(){var e=this,t=null,n=0,r=!1,i=!1,a=new kt,s=new Rt,o={value:null,needsUpdate:!1};this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(l,f,h){var d=l.length!==0||f||n!==0||r;return r=f,t=u(l,h,0),n=l.length,d},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(l,f,h,d,p,v){if(!r||l===null||l.length===0||i&&!h)i?u(null):c();else{var g=i?0:n,m=g*4,y=p.clippingState||null;o.value=y,y=u(l,d,m,v);for(var _=0;_!==m;++_)y[_]=t[_];p.clippingState=y,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=g}};function c(){o.value!==t&&(o.value=t,o.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(l,f,h,d){var p=l!==null?l.length:0,v=null;if(p!==0){if(v=o.value,d!==!0||v===null){var g=h+p*4,m=f.matrixWorldInverse;s.getNormalMatrix(m),(v===null||v.length<g)&&(v=new Float32Array(g));for(var y=0,_=h;y!==p;++y,_+=4)a.copy(l[y]).applyMatrix4(m,s),a.normal.toArray(v,_),v[_+3]=a.constant}o.value=v,o.needsUpdate=!0}return e.numPlanes=p,v}}function wx(e,t){function n(r){var i;if(r===Ln)return e.REPEAT;if(r===Nt)return e.CLAMP_TO_EDGE;if(r===Tr)return e.MIRRORED_REPEAT;if(r===Ut)return e.NEAREST;if(r===Dc)return e.NEAREST_MIPMAP_NEAREST;if(r===Fc)return e.NEAREST_MIPMAP_LINEAR;if(r===St)return e.LINEAR;if(r===kf)return e.LINEAR_MIPMAP_NEAREST;if(r===Is)return e.LINEAR_MIPMAP_LINEAR;if(r===Nc)return e.UNSIGNED_BYTE;if(r===qm)return e.UNSIGNED_SHORT_4_4_4_4;if(r===Zm)return e.UNSIGNED_SHORT_5_5_5_1;if(r===Jm)return e.UNSIGNED_SHORT_5_6_5;if(r===Xm)return e.BYTE;if(r===jm)return e.SHORT;if(r===Ca)return e.UNSIGNED_SHORT;if(r===Ym)return e.INT;if(r===Vf)return e.UNSIGNED_INT;if(r===yi)return e.FLOAT;if(r===Uc&&(i=t.get("OES_texture_half_float"),i!==null))return i.HALF_FLOAT_OES;if(r===Km)return e.ALPHA;if(r===xi)return e.RGB;if(r===zn)return e.RGBA;if(r===Qm)return e.LUMINANCE;if(r===$m)return e.LUMINANCE_ALPHA;if(r===xr)return e.DEPTH_COMPONENT;if(r===_i)return e.DEPTH_STENCIL;if(r===Nf)return e.FUNC_ADD;if(r===wm)return e.FUNC_SUBTRACT;if(r===Mm)return e.FUNC_REVERSE_SUBTRACT;if(r===Em)return e.ZERO;if(r===Tm)return e.ONE;if(r===Sm)return e.SRC_COLOR;if(r===Am)return e.ONE_MINUS_SRC_COLOR;if(r===Uf)return e.SRC_ALPHA;if(r===Bf)return e.ONE_MINUS_SRC_ALPHA;if(r===Rm)return e.DST_ALPHA;if(r===Pm)return e.ONE_MINUS_DST_ALPHA;if(r===Lm)return e.DST_COLOR;if(r===Cm)return e.ONE_MINUS_DST_COLOR;if(r===Im)return e.SRC_ALPHA_SATURATE;if((r===Gu||r===Hu||r===ku||r===Vu)&&(i=t.get("WEBGL_compressed_texture_s3tc"),i!==null)){if(r===Gu)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Hu)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===ku)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Vu)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===Wu||r===Xu||r===ju||r===Yu)&&(i=t.get("WEBGL_compressed_texture_pvrtc"),i!==null)){if(r===Wu)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Xu)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===ju)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Yu)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===eg&&(i=t.get("WEBGL_compressed_texture_etc1"),i!==null))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===Bu||r===zu)&&(i=t.get("EXT_blend_minmax"),i!==null)){if(r===Bu)return i.MIN_EXT;if(r===zu)return i.MAX_EXT}return r===Ia&&(i=t.get("WEBGL_depth_texture"),i!==null)?i.UNSIGNED_INT_24_8_WEBGL:0}return{convert:n}}function Hc(e){console.log("THREE.WebGLRenderer",ym),e=e||{};var t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,r=e.alpha!==void 0?e.alpha:!1,i=e.depth!==void 0?e.depth:!0,a=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,o=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,c=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,u=e.powerPreference!==void 0?e.powerPreference:"default",l=[],f=[],h=null,d=[],p=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=zf,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var v=this,g=!1,m=null,y=null,_=-1,x="",E=null,T=null,S=new qe,C=new qe,R=null,F=0,z=t.width,q=t.height,$=1,te=new qe(0,0,z,q),L=new qe(0,0,z,q),A=!1,H=new zc,B=new bx,Q=!1,J=!1,Z=new Le,ue=new M,de={geometries:0,textures:0},_e={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:_e,memory:de,programs:null};function k(){return m===null?$:1}var I;try{var G={alpha:r,depth:i,stencil:a,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:c,powerPreference:u};if(t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",Ie,!1),I=n||t.getContext("webgl",G)||t.getContext("experimental-webgl",G),I===null)throw t.getContext("webgl")!==null?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");I.getShaderPrecisionFormat===void 0&&(I.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(b){console.error("THREE.WebGLRenderer: "+b.message)}var K,xe,le,ge,w,D,V,W,X,ie,oe,N,ne,Y,fe,ee,O,j;function ae(){K=new _x(I),K.get("WEBGL_depth_texture"),K.get("OES_texture_float"),K.get("OES_texture_float_linear"),K.get("OES_texture_half_float"),K.get("OES_texture_half_float_linear"),K.get("OES_standard_derivatives"),K.get("OES_element_index_uint"),K.get("ANGLE_instanced_arrays"),j=new wx(I,K),xe=new xx(I,K,e),le=new yx(I,K,j),le.scissor(C.copy(L).multiplyScalar($)),le.viewport(S.copy(te).multiplyScalar($)),ge=new gx,w=new mx(I,K,le,ge,xe,j,de),D=new W0(I),V=new rx(I,D,de),W=new sx(V,_e),ne=new ex(I),ie=new vx(v,K,xe),X=new ax,oe=new Q0,N=new q0(v,le,V,o),Y=new nx(I,K,_e),fe=new tx(I,K,_e),ee=new H0(v,I,le,w,xe),O=new k0(v,I,le,w,xe),v.info.programs=ie.programs,v.context=I,v.capabilities=xe,v.extensions=K,v.properties=ge,v.renderLists=oe,v.state=le}ae();var he=new Gc(v);this.vr=he;var ce=new eh(v,W,xe.maxTextureSize);this.shadowMap=ce,this.getContext=function(){return I},this.getContextAttributes=function(){return I.getContextAttributes()},this.forceContextLoss=function(){var b=K.get("WEBGL_lose_context");b&&b.loseContext()},this.forceContextRestore=function(){var b=K.get("WEBGL_lose_context");b&&b.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(b){b!==void 0&&($=b,this.setSize(z,q,!1))},this.getSize=function(){return{width:z,height:q}},this.setSize=function(b,P,U){var re=he.getDevice();if(re&&re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=b,q=P,t.width=b*$,t.height=P*$,U!==!1&&(t.style.width=b+"px",t.style.height=P+"px"),this.setViewport(0,0,b,P)},this.getDrawingBufferSize=function(){return{width:z*$,height:q*$}},this.setDrawingBufferSize=function(b,P,U){z=b,q=P,$=U,t.width=b*U,t.height=P*U,this.setViewport(0,0,b,P)},this.setViewport=function(b,P,U,re){te.set(b,q-P-re,U,re),le.viewport(S.copy(te).multiplyScalar($))},this.setScissor=function(b,P,U,re){L.set(b,q-P-re,U,re),le.scissor(C.copy(L).multiplyScalar($))},this.setScissorTest=function(b){le.setScissorTest(A=b)},this.getClearColor=function(){return N.getClearColor()},this.setClearColor=function(){N.setClearColor.apply(N,arguments)},this.getClearAlpha=function(){return N.getClearAlpha()},this.setClearAlpha=function(){N.setClearAlpha.apply(N,arguments)},this.clear=function(b,P,U){var re=0;(b===void 0||b)&&(re|=I.COLOR_BUFFER_BIT),(P===void 0||P)&&(re|=I.DEPTH_BUFFER_BIT),(U===void 0||U)&&(re|=I.STENCIL_BUFFER_BIT),I.clear(re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(b,P,U,re){this.setRenderTarget(b),this.clear(P,U,re)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",Ie,!1),oe.dispose(),he.dispose()};function Me(b){b.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1,ae()}function Ue(b){var P=b.target;P.removeEventListener("dispose",Ue),it(P)}function it(b){He(b),ge.remove(b)}function He(b){var P=ge.get(b).program;b.program=void 0,P!==void 0&&ie.releaseProgram(P)}function ut(b,P,U){b.render(function(re){v.renderBufferImmediate(re,P,U)})}this.renderBufferImmediate=function(b,P,U){le.initAttributes();var re=ge.get(b);b.hasPositions&&!re.position&&(re.position=I.createBuffer()),b.hasNormals&&!re.normal&&(re.normal=I.createBuffer()),b.hasUvs&&!re.uv&&(re.uv=I.createBuffer()),b.hasColors&&!re.color&&(re.color=I.createBuffer());var me=P.getAttributes();if(b.hasPositions&&(I.bindBuffer(I.ARRAY_BUFFER,re.position),I.bufferData(I.ARRAY_BUFFER,b.positionArray,I.DYNAMIC_DRAW),le.enableAttribute(me.position),I.vertexAttribPointer(me.position,3,I.FLOAT,!1,0,0)),b.hasNormals){if(I.bindBuffer(I.ARRAY_BUFFER,re.normal),!U.isMeshPhongMaterial&&!U.isMeshStandardMaterial&&!U.isMeshNormalMaterial&&U.flatShading===!0)for(var be=0,Be=b.count*3;be<Be;be+=9){var Ae=b.normalArray,ze=(Ae[be+0]+Ae[be+3]+Ae[be+6])/3,Ge=(Ae[be+1]+Ae[be+4]+Ae[be+7])/3,Re=(Ae[be+2]+Ae[be+5]+Ae[be+8])/3;Ae[be+0]=ze,Ae[be+1]=Ge,Ae[be+2]=Re,Ae[be+3]=ze,Ae[be+4]=Ge,Ae[be+5]=Re,Ae[be+6]=ze,Ae[be+7]=Ge,Ae[be+8]=Re}I.bufferData(I.ARRAY_BUFFER,b.normalArray,I.DYNAMIC_DRAW),le.enableAttribute(me.normal),I.vertexAttribPointer(me.normal,3,I.FLOAT,!1,0,0)}b.hasUvs&&U.map&&(I.bindBuffer(I.ARRAY_BUFFER,re.uv),I.bufferData(I.ARRAY_BUFFER,b.uvArray,I.DYNAMIC_DRAW),le.enableAttribute(me.uv),I.vertexAttribPointer(me.uv,2,I.FLOAT,!1,0,0)),b.hasColors&&U.vertexColors!==Pc&&(I.bindBuffer(I.ARRAY_BUFFER,re.color),I.bufferData(I.ARRAY_BUFFER,b.colorArray,I.DYNAMIC_DRAW),le.enableAttribute(me.color),I.vertexAttribPointer(me.color,3,I.FLOAT,!1,0,0)),le.disableUnusedAttributes(),I.drawArrays(I.TRIANGLES,0,b.count),b.count=0},this.renderBufferDirect=function(b,P,U,re,me,be){var Be=me.isMesh&&me.matrixWorld.determinant()<0;le.setMaterial(re,Be);var Ae=jc(b,P,re,me),ze=U.id+"_"+Ae.id+"_"+(re.wireframe===!0),Ge=!1;ze!==x&&(x=ze,Ge=!0),me.morphTargetInfluences&&(ne.update(me,U,re,Ae),Ge=!0);var Re=U.index,Ee=U.attributes.position,at=1;re.wireframe===!0&&(Re=V.getWireframeAttribute(U),at=2);var $e,et=Y;Re!==null&&($e=D.get(Re),et=fe,et.setIndex($e)),Ge&&(je(re,Ae,U),Re!==null&&I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,$e.buffer));var Qe=0;Re!==null?Qe=Re.count:Ee!==void 0&&(Qe=Ee.count);var vt=U.drawRange.start*at,En=U.drawRange.count*at,fr=be!==null?be.start*at:0,Zt=be!==null?be.count*at:1/0,Ds=Math.max(vt,fr),Fh=Math.min(Qe,vt+En,fr+Zt)-1,Fs=Math.max(0,Fh-Ds+1);if(Fs!==0){if(me.isMesh)if(re.wireframe===!0)le.setLineWidth(re.wireframeLinewidth*k()),et.setMode(I.LINES);else switch(me.drawMode){case Wf:et.setMode(I.TRIANGLES);break;case ig:et.setMode(I.TRIANGLE_STRIP);break;case ag:et.setMode(I.TRIANGLE_FAN);break}else if(me.isLine){var Ns=re.linewidth;Ns===void 0&&(Ns=1),le.setLineWidth(Ns*k()),me.isLineSegments?et.setMode(I.LINES):me.isLineLoop?et.setMode(I.LINE_LOOP):et.setMode(I.LINE_STRIP)}else me.isPoints&&et.setMode(I.POINTS);U&&U.isInstancedBufferGeometry?U.maxInstancedCount>0&&et.renderInstances(U,Ds,Fs):et.render(Ds,Fs)}};function je(b,P,U,re){if(U&&U.isInstancedBufferGeometry&&K.get("ANGLE_instanced_arrays")===null){console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}re===void 0&&(re=0),le.initAttributes();var me=U.attributes,be=P.getAttributes(),Be=b.defaultAttributeValues;for(var Ae in be){var ze=be[Ae];if(ze>=0){var Ge=me[Ae];if(Ge!==void 0){var Re=Ge.normalized,Ee=Ge.itemSize,at=D.get(Ge);if(at===void 0)continue;var $e=at.buffer,et=at.type,Qe=at.bytesPerElement;if(Ge.isInterleavedBufferAttribute){var vt=Ge.data,En=vt.stride,fr=Ge.offset;vt&&vt.isInstancedInterleavedBuffer?(le.enableAttributeAndDivisor(ze,vt.meshPerAttribute),U.maxInstancedCount===void 0&&(U.maxInstancedCount=vt.meshPerAttribute*vt.count)):le.enableAttribute(ze),I.bindBuffer(I.ARRAY_BUFFER,$e),I.vertexAttribPointer(ze,Ee,et,Re,En*Qe,(re*En+fr)*Qe)}else Ge.isInstancedBufferAttribute?(le.enableAttributeAndDivisor(ze,Ge.meshPerAttribute),U.maxInstancedCount===void 0&&(U.maxInstancedCount=Ge.meshPerAttribute*Ge.count)):le.enableAttribute(ze),I.bindBuffer(I.ARRAY_BUFFER,$e),I.vertexAttribPointer(ze,Ee,et,Re,0,re*Ee*Qe)}else if(Be!==void 0){var Zt=Be[Ae];if(Zt!==void 0)switch(Zt.length){case 2:I.vertexAttrib2fv(ze,Zt);break;case 3:I.vertexAttrib3fv(ze,Zt);break;case 4:I.vertexAttrib4fv(ze,Zt);break;default:I.vertexAttrib1fv(ze,Zt)}}}}le.disableUnusedAttributes()}this.compile=function(b,P){l.length=0,f.length=0,b.traverse(function(U){U.isLight&&(l.push(U),U.castShadow&&f.push(U))}),X.setup(l,f,P),b.traverse(function(U){if(U.material)if(Array.isArray(U.material))for(var re=0;re<U.material.length;re++)Mn(U.material[re],b.fog,U);else Mn(U.material,b.fog,U)})};var lt=!1,fn=null;function oa(){if(!lt){var b=he.getDevice();b&&b.isPresenting?b.requestAnimationFrame(lr):window.requestAnimationFrame(lr),lt=!0}}function lr(b){fn!==null&&fn(b);var P=he.getDevice();P&&P.isPresenting?P.requestAnimationFrame(lr):window.requestAnimationFrame(lr)}this.animate=function(b){fn=b,oa()},this.render=function(b,P,U,re){if(!(P&&P.isCamera)){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!g){x="",_=-1,E=null,b.autoUpdate===!0&&b.updateMatrixWorld(),P.parent===null&&P.updateMatrixWorld(),he.enabled&&(P=he.getCamera(P)),Z.multiplyMatrices(P.projectionMatrix,P.matrixWorldInverse),H.setFromMatrix(Z),l.length=0,f.length=0,d.length=0,p.length=0,J=this.localClippingEnabled,Q=B.init(this.clippingPlanes,J,P),h=oe.get(b,P),h.init(),ca(b,P,v.sortObjects),v.sortObjects===!0&&h.sort(),w.updateVideoTextures(),Q&&B.beginShadows(),ce.render(f,b,P),X.setup(l,f,P),Q&&B.endShadows(),_e.frame++,_e.calls=0,_e.vertices=0,_e.faces=0,_e.points=0,U===void 0&&(U=null),this.setRenderTarget(U),N.render(h,b,P,re);var me=h.opaque,be=h.transparent;if(b.overrideMaterial){var Be=b.overrideMaterial;me.length&&kn(me,b,P,Be),be.length&&kn(be,b,P,Be)}else me.length&&kn(me,b,P),be.length&&kn(be,b,P);O.render(d,b,P),ee.render(p,b,P,S),U&&w.updateRenderTargetMipmap(U),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1),he.enabled&&he.submitFrame()}};function ca(b,P,U){if(b.visible!==!1){var re=b.layers.test(P.layers);if(re){if(b.isLight)l.push(b),b.castShadow&&f.push(b);else if(b.isSprite)(!b.frustumCulled||H.intersectsSprite(b))&&d.push(b);else if(b.isLensFlare)p.push(b);else if(b.isImmediateRenderObject)U&&ue.setFromMatrixPosition(b.matrixWorld).applyMatrix4(Z),h.push(b,null,b.material,ue.z,null);else if((b.isMesh||b.isLine||b.isPoints)&&(b.isSkinnedMesh&&b.skeleton.update(),!b.frustumCulled||H.intersectsObject(b))){U&&ue.setFromMatrixPosition(b.matrixWorld).applyMatrix4(Z);var me=W.update(b),be=b.material;if(Array.isArray(be))for(var Be=me.groups,Ae=0,ze=Be.length;Ae<ze;Ae++){var Ge=Be[Ae],Re=be[Ge.materialIndex];Re&&Re.visible&&h.push(b,me,Re,ue.z,Ge)}else be.visible&&h.push(b,me,be,ue.z,null)}}for(var Ee=b.children,Ae=0,ze=Ee.length;Ae<ze;Ae++)ca(Ee[Ae],P,U)}}function kn(b,P,U,re){for(var me=0,be=b.length;me<be;me++){var Be=b[me],Ae=Be.object,ze=Be.geometry,Ge=re===void 0?Be.material:re,Re=Be.group;if(U.isArrayCamera){T=U;for(var Ee=U.cameras,at=0,$e=Ee.length;at<$e;at++){var et=Ee[at];if(Ae.layers.test(et.layers)){var Qe=et.bounds,vt=Qe.x*z,En=Qe.y*q,fr=Qe.z*z,Zt=Qe.w*q;le.viewport(S.set(vt,En,fr,Zt).multiplyScalar($)),Qr(Ae,P,et,ze,Ge,Re)}}}else T=null,Qr(Ae,P,U,ze,Ge,Re)}}function Qr(b,P,U,re,me,be){if(b.onBeforeRender(v,P,U,re,me,be),b.modelViewMatrix.multiplyMatrices(U.matrixWorldInverse,b.matrixWorld),b.normalMatrix.getNormalMatrix(b.modelViewMatrix),b.isImmediateRenderObject){var Be=b.isMesh&&b.matrixWorld.determinant()<0;le.setMaterial(me,Be);var Ae=jc(U,P.fog,me,b);x="",ut(b,Ae,me)}else v.renderBufferDirect(U,P.fog,re,me,b,be);b.onAfterRender(v,P,U,re,me,be)}function Mn(b,P,U){var re=ge.get(b),me=ie.getParameters(b,X.state,f,P,B.numPlanes,B.numIntersection,U),be=ie.getProgramCode(b,me),Be=re.program,Ae=!0;if(Be===void 0)b.addEventListener("dispose",Ue);else if(Be.code!==be)He(b);else{if(me.shaderID!==void 0)return;Ae=!1}if(Ae){if(me.shaderID){var ze=_r[me.shaderID];re.shader={name:b.type,uniforms:Tt.clone(ze.uniforms),vertexShader:ze.vertexShader,fragmentShader:ze.fragmentShader}}else re.shader={name:b.type,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader};b.onBeforeCompile(re.shader),Be=ie.acquireProgram(b,re.shader,me,be),re.program=Be,b.program=Be}var Ge=Be.getAttributes();if(b.morphTargets){b.numSupportedMorphTargets=0;for(var Re=0;Re<v.maxMorphTargets;Re++)Ge["morphTarget"+Re]>=0&&b.numSupportedMorphTargets++}if(b.morphNormals){b.numSupportedMorphNormals=0;for(var Re=0;Re<v.maxMorphNormals;Re++)Ge["morphNormal"+Re]>=0&&b.numSupportedMorphNormals++}var Ee=re.shader.uniforms;(!b.isShaderMaterial&&!b.isRawShaderMaterial||b.clipping===!0)&&(re.numClippingPlanes=B.numPlanes,re.numIntersection=B.numIntersection,Ee.clippingPlanes=B.uniform),re.fog=P,re.lightsHash=X.state.hash,b.lights&&(Ee.ambientLightColor.value=X.state.ambient,Ee.directionalLights.value=X.state.directional,Ee.spotLights.value=X.state.spot,Ee.rectAreaLights.value=X.state.rectArea,Ee.pointLights.value=X.state.point,Ee.hemisphereLights.value=X.state.hemi,Ee.directionalShadowMap.value=X.state.directionalShadowMap,Ee.directionalShadowMatrix.value=X.state.directionalShadowMatrix,Ee.spotShadowMap.value=X.state.spotShadowMap,Ee.spotShadowMatrix.value=X.state.spotShadowMatrix,Ee.pointShadowMap.value=X.state.pointShadowMap,Ee.pointShadowMatrix.value=X.state.pointShadowMatrix);var at=re.program.getUniforms(),$e=rr.seqWithValue(at.seq,Ee);re.uniformsList=$e}function jc(b,P,U,re){F=0;var me=ge.get(U);if(Q&&(J||b!==E)){var be=b===E&&U.id===_;B.setState(U.clippingPlanes,U.clipIntersection,U.clipShadows,b,me,be)}U.needsUpdate===!1&&(me.program===void 0||U.fog&&me.fog!==P||U.lights&&me.lightsHash!==X.state.hash||me.numClippingPlanes!==void 0&&(me.numClippingPlanes!==B.numPlanes||me.numIntersection!==B.numIntersection))&&(U.needsUpdate=!0),U.needsUpdate&&(Mn(U,P,re),U.needsUpdate=!1);var Be=!1,Ae=!1,ze=!1,Ge=me.program,Re=Ge.getUniforms(),Ee=me.shader.uniforms;if(le.useProgram(Ge.program)&&(Be=!0,Ae=!0,ze=!0),U.id!==_&&(_=U.id,Ae=!0),Be||b!==E){if(Re.setValue(I,"projectionMatrix",b.projectionMatrix),xe.logarithmicDepthBuffer&&Re.setValue(I,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2)),E!==(T||b)&&(E=T||b,Ae=!0,ze=!0),U.isShaderMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.envMap){var at=Re.map.cameraPosition;at!==void 0&&at.setValue(I,ue.setFromMatrixPosition(b.matrixWorld))}(U.isMeshPhongMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial||U.skinning)&&Re.setValue(I,"viewMatrix",b.matrixWorldInverse)}if(U.skinning){Re.setOptional(I,re,"bindMatrix"),Re.setOptional(I,re,"bindMatrixInverse");var $e=re.skeleton;if($e){var et=$e.bones;if(xe.floatVertexTextures){if($e.boneTexture===void 0){var Qe=Math.sqrt(et.length*4);Qe=Ce.ceilPowerOfTwo(Qe),Qe=Math.max(Qe,4);var vt=new Float32Array(Qe*Qe*4);vt.set($e.boneMatrices);var En=new Rr(vt,Qe,Qe,zn,yi);$e.boneMatrices=vt,$e.boneTexture=En,$e.boneTextureSize=Qe}Re.setValue(I,"boneTexture",$e.boneTexture),Re.setValue(I,"boneTextureSize",$e.boneTextureSize)}else Re.setOptional(I,$e,"boneMatrices")}}return Ae&&(Re.setValue(I,"toneMappingExposure",v.toneMappingExposure),Re.setValue(I,"toneMappingWhitePoint",v.toneMappingWhitePoint),U.lights&&Oh(Ee,ze),P&&U.fog&&Sh(Ee,P),U.isMeshBasicMaterial?Vn(Ee,U):U.isMeshLambertMaterial?(Vn(Ee,U),Ah(Ee,U)):U.isMeshPhongMaterial?(Vn(Ee,U),U.isMeshToonMaterial?Rh(Ee,U):Yc(Ee,U)):U.isMeshStandardMaterial?(Vn(Ee,U),U.isMeshPhysicalMaterial?Ph(Ee,U):qc(Ee,U)):U.isMeshDepthMaterial?(Vn(Ee,U),Lh(Ee,U)):U.isMeshDistanceMaterial?(Vn(Ee,U),Ch(Ee,U)):U.isMeshNormalMaterial?(Vn(Ee,U),Ih(Ee,U)):U.isLineBasicMaterial?(Mh(Ee,U),U.isLineDashedMaterial&&Eh(Ee,U)):U.isPointsMaterial?Th(Ee,U):U.isShadowMaterial&&(Ee.color.value=U.color,Ee.opacity.value=U.opacity),Ee.ltcMat!==void 0&&(Ee.ltcMat.value=Te.LTC_MAT_TEXTURE),Ee.ltcMag!==void 0&&(Ee.ltcMag.value=Te.LTC_MAG_TEXTURE),rr.upload(I,me.uniformsList,Ee,v)),Re.setValue(I,"modelViewMatrix",re.modelViewMatrix),Re.setValue(I,"normalMatrix",re.normalMatrix),Re.setValue(I,"modelMatrix",re.matrixWorld),Ge}function Vn(b,P){b.opacity.value=P.opacity,P.color&&(b.diffuse.value=P.color),P.emissive&&b.emissive.value.copy(P.emissive).multiplyScalar(P.emissiveIntensity),P.map&&(b.map.value=P.map),P.alphaMap&&(b.alphaMap.value=P.alphaMap),P.specularMap&&(b.specularMap.value=P.specularMap),P.envMap&&(b.envMap.value=P.envMap,b.flipEnvMap.value=P.envMap&&P.envMap.isCubeTexture?-1:1,b.reflectivity.value=P.reflectivity,b.refractionRatio.value=P.refractionRatio),P.lightMap&&(b.lightMap.value=P.lightMap,b.lightMapIntensity.value=P.lightMapIntensity),P.aoMap&&(b.aoMap.value=P.aoMap,b.aoMapIntensity.value=P.aoMapIntensity);var U;if(P.map?U=P.map:P.specularMap?U=P.specularMap:P.displacementMap?U=P.displacementMap:P.normalMap?U=P.normalMap:P.bumpMap?U=P.bumpMap:P.roughnessMap?U=P.roughnessMap:P.metalnessMap?U=P.metalnessMap:P.alphaMap?U=P.alphaMap:P.emissiveMap&&(U=P.emissiveMap),U!==void 0){if(U.isWebGLRenderTarget&&(U=U.texture),U.matrixAutoUpdate===!0){var re=U.offset,me=U.repeat,be=U.rotation,Be=U.center;U.matrix.setUvTransform(re.x,re.y,me.x,me.y,be,Be.x,Be.y)}b.uvTransform.value.copy(U.matrix)}}function Mh(b,P){b.diffuse.value=P.color,b.opacity.value=P.opacity}function Eh(b,P){b.dashSize.value=P.dashSize,b.totalSize.value=P.dashSize+P.gapSize,b.scale.value=P.scale}function Th(b,P){if(b.diffuse.value=P.color,b.opacity.value=P.opacity,b.size.value=P.size*$,b.scale.value=q*.5,b.map.value=P.map,P.map!==null){if(P.map.matrixAutoUpdate===!0){var U=P.map.offset,re=P.map.repeat,me=P.map.rotation,be=P.map.center;P.map.matrix.setUvTransform(U.x,U.y,re.x,re.y,me,be.x,be.y)}b.uvTransform.value.copy(P.map.matrix)}}function Sh(b,P){b.fogColor.value=P.color,P.isFog?(b.fogNear.value=P.near,b.fogFar.value=P.far):P.isFogExp2&&(b.fogDensity.value=P.density)}function Ah(b,P){P.emissiveMap&&(b.emissiveMap.value=P.emissiveMap)}function Yc(b,P){b.specular.value=P.specular,b.shininess.value=Math.max(P.shininess,1e-4),P.emissiveMap&&(b.emissiveMap.value=P.emissiveMap),P.bumpMap&&(b.bumpMap.value=P.bumpMap,b.bumpScale.value=P.bumpScale),P.normalMap&&(b.normalMap.value=P.normalMap,b.normalScale.value.copy(P.normalScale)),P.displacementMap&&(b.displacementMap.value=P.displacementMap,b.displacementScale.value=P.displacementScale,b.displacementBias.value=P.displacementBias)}function Rh(b,P){Yc(b,P),P.gradientMap&&(b.gradientMap.value=P.gradientMap)}function qc(b,P){b.roughness.value=P.roughness,b.metalness.value=P.metalness,P.roughnessMap&&(b.roughnessMap.value=P.roughnessMap),P.metalnessMap&&(b.metalnessMap.value=P.metalnessMap),P.emissiveMap&&(b.emissiveMap.value=P.emissiveMap),P.bumpMap&&(b.bumpMap.value=P.bumpMap,b.bumpScale.value=P.bumpScale),P.normalMap&&(b.normalMap.value=P.normalMap,b.normalScale.value.copy(P.normalScale)),P.displacementMap&&(b.displacementMap.value=P.displacementMap,b.displacementScale.value=P.displacementScale,b.displacementBias.value=P.displacementBias),P.envMap&&(b.envMapIntensity.value=P.envMapIntensity)}function Ph(b,P){b.clearCoat.value=P.clearCoat,b.clearCoatRoughness.value=P.clearCoatRoughness,qc(b,P)}function Lh(b,P){P.displacementMap&&(b.displacementMap.value=P.displacementMap,b.displacementScale.value=P.displacementScale,b.displacementBias.value=P.displacementBias)}function Ch(b,P){P.displacementMap&&(b.displacementMap.value=P.displacementMap,b.displacementScale.value=P.displacementScale,b.displacementBias.value=P.displacementBias),b.referencePosition.value.copy(P.referencePosition),b.nearDistance.value=P.nearDistance,b.farDistance.value=P.farDistance}function Ih(b,P){P.bumpMap&&(b.bumpMap.value=P.bumpMap,b.bumpScale.value=P.bumpScale),P.normalMap&&(b.normalMap.value=P.normalMap,b.normalScale.value.copy(P.normalScale)),P.displacementMap&&(b.displacementMap.value=P.displacementMap,b.displacementScale.value=P.displacementScale,b.displacementBias.value=P.displacementBias)}function Oh(b,P){b.ambientLightColor.needsUpdate=P,b.directionalLights.needsUpdate=P,b.pointLights.needsUpdate=P,b.spotLights.needsUpdate=P,b.rectAreaLights.needsUpdate=P,b.hemisphereLights.needsUpdate=P}this.setFaceCulling=function(b,P){le.setCullFace(b),le.setFlipSided(P===_m)};function Dh(){var b=F;return b>=xe.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+b+" texture units while this GPU supports only "+xe.maxTextures),F+=1,b}this.allocTextureUnit=Dh,this.setTexture2D=function(){var b=!1;return function(U,re){U&&U.isWebGLRenderTarget&&(b||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),b=!0),U=U.texture),w.setTexture2D(U,re)}}(),this.setTexture=function(){var b=!1;return function(U,re){b||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),b=!0),w.setTexture2D(U,re)}}(),this.setTextureCube=function(){var b=!1;return function(U,re){U&&U.isWebGLRenderTargetCube&&(b||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),b=!0),U=U.texture),U&&U.isCubeTexture||Array.isArray(U.image)&&U.image.length===6?w.setTextureCube(U,re):w.setTextureCubeDynamic(U,re)}}(),this.getRenderTarget=function(){return m},this.setRenderTarget=function(b){m=b,b&&ge.get(b).__webglFramebuffer===void 0&&w.setupRenderTarget(b);var P=null,U=!1;if(b){var re=ge.get(b).__webglFramebuffer;b.isWebGLRenderTargetCube?(P=re[b.activeCubeFace],U=!0):P=re,S.copy(b.viewport),C.copy(b.scissor),R=b.scissorTest}else S.copy(te).multiplyScalar($),C.copy(L).multiplyScalar($),R=A;if(y!==P&&(I.bindFramebuffer(I.FRAMEBUFFER,P),y=P),le.viewport(S),le.scissor(C),le.setScissorTest(R),U){var me=ge.get(b.texture);I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_CUBE_MAP_POSITIVE_X+b.activeCubeFace,me.__webglTexture,b.activeMipMapLevel)}},this.readRenderTargetPixels=function(b,P,U,re,me,be){if(!(b&&b.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var Be=ge.get(b).__webglFramebuffer;if(Be){var Ae=!1;Be!==y&&(I.bindFramebuffer(I.FRAMEBUFFER,Be),Ae=!0);try{var ze=b.texture,Ge=ze.format,Re=ze.type;if(Ge!==zn&&j.convert(Ge)!==I.getParameter(I.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Re!==Nc&&j.convert(Re)!==I.getParameter(I.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Re===yi&&(K.get("OES_texture_float")||K.get("WEBGL_color_buffer_float")))&&!(Re===Uc&&K.get("EXT_color_buffer_half_float"))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}I.checkFramebufferStatus(I.FRAMEBUFFER)===I.FRAMEBUFFER_COMPLETE?P>=0&&P<=b.width-re&&U>=0&&U<=b.height-me&&I.readPixels(P,U,re,me,j.convert(Ge),j.convert(Re),be):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{Ae&&I.bindFramebuffer(I.FRAMEBUFFER,y)}}}}function Ti(e,t){this.name="",this.color=new we(e),this.density=t!==void 0?t:25e-5}Ti.prototype.isFogExp2=!0;Ti.prototype.clone=function(){return new Ti(this.color.getHex(),this.density)};Ti.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};function Si(e,t,n){this.name="",this.color=new we(e),this.near=t!==void 0?t:1,this.far=n!==void 0?n:1e3}Si.prototype.isFog=!0;Si.prototype.clone=function(){return new Si(this.color.getHex(),this.near,this.far)};Si.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}};function za(){ve.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}za.prototype=Object.assign(Object.create(ve.prototype),{constructor:za,copy:function(e,t){return ve.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ve.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}});function nl(e,t,n,r,i){ve.call(this),this.lensFlares=[],this.positionScreen=new M,this.customUpdateCallback=void 0,e!==void 0&&this.add(e,t,n,r,i)}nl.prototype=Object.assign(Object.create(ve.prototype),{constructor:nl,isLensFlare:!0,copy:function(e){ve.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,i,a){t===void 0&&(t=-1),n===void 0&&(n=0),a===void 0&&(a=1),i===void 0&&(i=new we(16777215)),r===void 0&&(r=sa),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:r})},updateLensFlares:function(){var e,t=this.lensFlares.length,n,r=-this.positionScreen.x*2,i=-this.positionScreen.y*2;for(e=0;e<t;e++)n=this.lensFlares[e],n.x=this.positionScreen.x+r*n.distance,n.y=this.positionScreen.y+i*n.distance,n.wantedRotation=n.x*Math.PI*.25,n.rotation+=(n.wantedRotation-n.rotation)*.25}});function sr(e){Fe.call(this),this.type="SpriteMaterial",this.color=new we(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}sr.prototype=Object.create(Fe.prototype);sr.prototype.constructor=sr;sr.prototype.isSpriteMaterial=!0;sr.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this};function Io(e){ve.call(this),this.type="Sprite",this.material=e!==void 0?e:new sr}Io.prototype=Object.assign(Object.create(ve.prototype),{constructor:Io,isSprite:!0,raycast:function(){var e=new M,t=new M,n=new M;return function(i,a){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var s=n.x*n.y/4;if(!(t.distanceToSquared(e)>s)){var o=i.ray.origin.distanceTo(e);o<i.near||o>i.far||a.push({distance:o,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}});function Ga(){ve.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}Ga.prototype=Object.assign(Object.create(ve.prototype),{constructor:Ga,copy:function(e){ve.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new M;return function(n,r){e.setFromMatrixPosition(this.matrixWorld);var i=n.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(n,r)}}(),update:function(){var e=new M,t=new M;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);i[0].object.visible=!0;for(var s=1,o=i.length;s<o&&a>=i[s].distance;s++)i[s-1].object.visible=!1,i[s].object.visible=!0;for(;s<o;s++)i[s].object.visible=!1}}}(),toJSON:function(e){var t=ve.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}});function Ha(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Le)}}Object.assign(Ha.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Le;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Le,t=new Le;return function(){for(var r=this.bones,i=this.boneInverses,a=this.boneMatrices,s=this.boneTexture,o=0,c=r.length;o<c;o++){var u=r[o]?r[o].matrixWorld:t;e.multiplyMatrices(u,i[o]),e.toArray(a,o*16)}s!==void 0&&(s.needsUpdate=!0)}}(),clone:function(){return new Ha(this.bones,this.boneInverses)}});function Oo(){ve.call(this),this.type="Bone"}Oo.prototype=Object.assign(Object.create(ve.prototype),{constructor:Oo,isBone:!0});function Do(e,t){Mt.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Le,this.bindMatrixInverse=new Le;var n=this.initBones(),r=new Ha(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}Do.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Do,isSkinnedMesh:!0,initBones:function(){var e=[],t,n,r,i;if(this.geometry&&this.geometry.bones!==void 0){for(r=0,i=this.geometry.bones.length;r<i;r++)n=this.geometry.bones[r],t=new Oo,e.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),n.scl!==void 0&&t.scale.fromArray(n.scl);for(r=0,i=this.geometry.bones.length;r<i;r++)n=this.geometry.bones[r],n.parent!==-1&&n.parent!==null&&e[n.parent]!==void 0?e[n.parent].add(e[r]):this.add(e[r])}return this.updateMatrixWorld(!0),e},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.manhattanLength(),e!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new qe,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),e=1/r.manhattanLength(),e!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Mt.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Ze(e){Fe.call(this),this.type="LineBasicMaterial",this.color=new we(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}Ze.prototype=Object.create(Fe.prototype);Ze.prototype.constructor=Ze;Ze.prototype.isLineBasicMaterial=!0;Ze.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};function Lt(e,t,n){if(n===1)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ke(e,t);ve.call(this),this.type="Line",this.geometry=e!==void 0?e:new ye,this.material=t!==void 0?t:new Ze({color:Math.random()*16777215})}Lt.prototype=Object.assign(Object.create(ve.prototype),{constructor:Lt,isLine:!0,raycast:function(){var e=new Le,t=new Jr,n=new rn;return function(i,a){var s=i.linePrecision,o=s*s,c=this.geometry,u=this.matrixWorld;if(c.boundingSphere===null&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(u),i.ray.intersectsSphere(n)!==!1){e.getInverse(u),t.copy(i.ray).applyMatrix4(e);var l=new M,f=new M,h=new M,d=new M,p=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var v=c.index,g=c.attributes,m=g.position.array;if(v!==null)for(var y=v.array,_=0,x=y.length-1;_<x;_+=p){var E=y[_],T=y[_+1];l.fromArray(m,E*3),f.fromArray(m,T*3);var S=t.distanceSqToSegment(l,f,d,h);if(!(S>o)){d.applyMatrix4(this.matrixWorld);var C=i.ray.origin.distanceTo(d);C<i.near||C>i.far||a.push({distance:C,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(var _=0,x=m.length/3-1;_<x;_+=p){l.fromArray(m,3*_),f.fromArray(m,3*_+3);var S=t.distanceSqToSegment(l,f,d,h);if(!(S>o)){d.applyMatrix4(this.matrixWorld);var C=i.ray.origin.distanceTo(d);C<i.near||C>i.far||a.push({distance:C,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var R=c.vertices,F=R.length,_=0;_<F-1;_+=p){var S=t.distanceSqToSegment(R[_],R[_+1],d,h);if(!(S>o)){d.applyMatrix4(this.matrixWorld);var C=i.ray.origin.distanceTo(d);C<i.near||C>i.far||a.push({distance:C,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Ke(e,t){Lt.call(this,e,t),this.type="LineSegments"}Ke.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Ke,isLineSegments:!0});function Fo(e,t){Lt.call(this,e,t),this.type="LineLoop"}Fo.prototype=Object.assign(Object.create(Lt.prototype),{constructor:Fo,isLineLoop:!0});function or(e){Fe.call(this),this.type="PointsMaterial",this.color=new we(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}or.prototype=Object.create(Fe.prototype);or.prototype.constructor=or;or.prototype.isPointsMaterial=!0;or.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this};function No(e,t){ve.call(this),this.type="Points",this.geometry=e!==void 0?e:new ye,this.material=t!==void 0?t:new or({color:Math.random()*16777215})}No.prototype=Object.assign(Object.create(ve.prototype),{constructor:No,isPoints:!0,raycast:function(){var e=new Le,t=new Jr,n=new rn;return function(i,a){var s=this,o=this.geometry,c=this.matrixWorld,u=i.params.Points.threshold;if(o.boundingSphere===null&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(c),n.radius+=u,i.ray.intersectsSphere(n)===!1)return;e.getInverse(c),t.copy(i.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),f=l*l,h=new M;function d(S,C){var R=t.distanceSqToPoint(S);if(R<f){var F=t.closestPointToPoint(S);F.applyMatrix4(c);var z=i.ray.origin.distanceTo(F);if(z<i.near||z>i.far)return;a.push({distance:z,distanceToRay:Math.sqrt(R),point:F.clone(),index:C,face:null,object:s})}}if(o.isBufferGeometry){var p=o.index,v=o.attributes,g=v.position.array;if(p!==null)for(var m=p.array,y=0,_=m.length;y<_;y++){var x=m[y];h.fromArray(g,x*3),d(h,x)}else for(var y=0,E=g.length/3;y<E;y++)h.fromArray(g,y*3),d(h,y)}else for(var T=o.vertices,y=0,E=T.length;y<E;y++)d(T[y],y)}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});function Uo(){ve.call(this),this.type="Group"}Uo.prototype=Object.assign(Object.create(ve.prototype),{constructor:Uo,isGroup:!0});function rl(e,t,n,r,i,a,s,o,c){Je.call(this,e,t,n,r,i,a,s,o,c),this.generateMipmaps=!1;var u=this;function l(){e.removeEventListener("loadeddata",l,!1),u.needsUpdate=!0}e.addEventListener("loadeddata",l,!1)}rl.prototype=Object.assign(Object.create(Je.prototype),{constructor:rl,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Ai(e,t,n,r,i,a,s,o,c,u,l,f){Je.call(this,null,a,s,o,c,u,r,i,l,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}Ai.prototype=Object.create(Je.prototype);Ai.prototype.constructor=Ai;Ai.prototype.isCompressedTexture=!0;function ka(e,t,n,r,i,a,s,o,c,u){if(u=u!==void 0?u:xr,u!==xr&&u!==_i)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===xr&&(n=Ca),n===void 0&&u===_i&&(n=Ia),Je.call(this,null,r,i,a,s,o,u,n,c),this.image={width:e,height:t},this.magFilter=s!==void 0?s:Ut,this.minFilter=o!==void 0?o:Ut,this.flipY=!1,this.generateMipmaps=!1}ka.prototype=Object.create(Je.prototype);ka.prototype.constructor=ka;ka.prototype.isDepthTexture=!0;function Va(e){ye.call(this),this.type="WireframeGeometry";var t=[],n,r,i,a,s,o=[0,0],c={},u,l,f,h,d=["a","b","c"],p;if(e&&e.isGeometry){var v=e.faces;for(n=0,i=v.length;n<i;n++){var g=v[n];for(r=0;r<3;r++)l=g[d[r]],f=g[d[(r+1)%3]],o[0]=Math.min(l,f),o[1]=Math.max(l,f),h=o[0]+","+o[1],c[h]===void 0&&(c[h]={index1:o[0],index2:o[1]})}for(h in c)u=c[h],p=e.vertices[u.index1],t.push(p.x,p.y,p.z),p=e.vertices[u.index2],t.push(p.x,p.y,p.z)}else if(e&&e.isBufferGeometry){var m,y,_,x,E,T,S,C;if(p=new M,e.index!==null){for(m=e.attributes.position,y=e.index,_=e.groups,_.length===0&&(_=[{start:0,count:y.count,materialIndex:0}]),a=0,s=_.length;a<s;++a)for(x=_[a],E=x.start,T=x.count,n=E,i=E+T;n<i;n+=3)for(r=0;r<3;r++)l=y.getX(n+r),f=y.getX(n+(r+1)%3),o[0]=Math.min(l,f),o[1]=Math.max(l,f),h=o[0]+","+o[1],c[h]===void 0&&(c[h]={index1:o[0],index2:o[1]});for(h in c)u=c[h],p.fromBufferAttribute(m,u.index1),t.push(p.x,p.y,p.z),p.fromBufferAttribute(m,u.index2),t.push(p.x,p.y,p.z)}else for(m=e.attributes.position,n=0,i=m.count/3;n<i;n++)for(r=0;r<3;r++)S=3*n+r,p.fromBufferAttribute(m,S),t.push(p.x,p.y,p.z),C=3*n+(r+1)%3,p.fromBufferAttribute(m,C),t.push(p.x,p.y,p.z)}this.addAttribute("position",new pe(t,3))}Va.prototype=Object.create(ye.prototype);Va.prototype.constructor=Va;function Wa(e,t,n){Pe.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ri(e,t,n)),this.mergeVertices()}Wa.prototype=Object.create(Pe.prototype);Wa.prototype.constructor=Wa;function Ri(e,t,n){ye.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r=[],i=[],a=[],s=[],o=1e-5,c=new M,u=new M,l=new M,f=new M,h=new M,d,p,v=t+1;for(d=0;d<=n;d++){var g=d/n;for(p=0;p<=t;p++){var m=p/t;u=e(m,g,u),i.push(u.x,u.y,u.z),m-o>=0?(l=e(m-o,g,l),f.subVectors(u,l)):(l=e(m+o,g,l),f.subVectors(l,u)),g-o>=0?(l=e(m,g-o,l),h.subVectors(u,l)):(l=e(m,g+o,l),h.subVectors(l,u)),c.crossVectors(f,h).normalize(),a.push(c.x,c.y,c.z),s.push(m,g)}}for(d=0;d<n;d++)for(p=0;p<t;p++){var y=d*v+p,_=d*v+p+1,x=(d+1)*v+p+1,E=(d+1)*v+p;r.push(y,_,E),r.push(_,x,E)}this.setIndex(r),this.addAttribute("position",new pe(i,3)),this.addAttribute("normal",new pe(a,3)),this.addAttribute("uv",new pe(s,2))}Ri.prototype=Object.create(ye.prototype);Ri.prototype.constructor=Ri;function Xa(e,t,n,r){Pe.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Ct(e,t,n,r)),this.mergeVertices()}Xa.prototype=Object.create(Pe.prototype);Xa.prototype.constructor=Xa;function Ct(e,t,n,r){ye.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var i=[],a=[];s(r),c(n),u(),this.addAttribute("position",new pe(i,3)),this.addAttribute("normal",new pe(i.slice(),3)),this.addAttribute("uv",new pe(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function s(m){for(var y=new M,_=new M,x=new M,E=0;E<t.length;E+=3)h(t[E+0],y),h(t[E+1],_),h(t[E+2],x),o(y,_,x,m)}function o(m,y,_,x){var E=Math.pow(2,x),T=[],S,C;for(S=0;S<=E;S++){T[S]=[];var R=m.clone().lerp(_,S/E),F=y.clone().lerp(_,S/E),z=E-S;for(C=0;C<=z;C++)C===0&&S===E?T[S][C]=R:T[S][C]=R.clone().lerp(F,C/z)}for(S=0;S<E;S++)for(C=0;C<2*(E-S)-1;C++){var q=Math.floor(C/2);C%2===0?(f(T[S][q+1]),f(T[S+1][q]),f(T[S][q])):(f(T[S][q+1]),f(T[S+1][q+1]),f(T[S+1][q]))}}function c(m){for(var y=new M,_=0;_<i.length;_+=3)y.x=i[_+0],y.y=i[_+1],y.z=i[_+2],y.normalize().multiplyScalar(m),i[_+0]=y.x,i[_+1]=y.y,i[_+2]=y.z}function u(){for(var m=new M,y=0;y<i.length;y+=3){m.x=i[y+0],m.y=i[y+1],m.z=i[y+2];var _=v(m)/2/Math.PI+.5,x=g(m)/Math.PI+.5;a.push(_,1-x)}d(),l()}function l(){for(var m=0;m<a.length;m+=6){var y=a[m+0],_=a[m+2],x=a[m+4],E=Math.max(y,_,x),T=Math.min(y,_,x);E>.9&&T<.1&&(y<.2&&(a[m+0]+=1),_<.2&&(a[m+2]+=1),x<.2&&(a[m+4]+=1))}}function f(m){i.push(m.x,m.y,m.z)}function h(m,y){var _=m*3;y.x=e[_+0],y.y=e[_+1],y.z=e[_+2]}function d(){for(var m=new M,y=new M,_=new M,x=new M,E=new se,T=new se,S=new se,C=0,R=0;C<i.length;C+=9,R+=6){m.set(i[C+0],i[C+1],i[C+2]),y.set(i[C+3],i[C+4],i[C+5]),_.set(i[C+6],i[C+7],i[C+8]),E.set(a[R+0],a[R+1]),T.set(a[R+2],a[R+3]),S.set(a[R+4],a[R+5]),x.copy(m).add(y).add(_).divideScalar(3);var F=v(x);p(E,R+0,m,F),p(T,R+2,y,F),p(S,R+4,_,F)}}function p(m,y,_,x){x<0&&m.x===1&&(a[y]=m.x-1),_.x===0&&_.z===0&&(a[y]=x/2/Math.PI+.5)}function v(m){return Math.atan2(m.z,-m.x)}function g(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}Ct.prototype=Object.create(ye.prototype);Ct.prototype.constructor=Ct;function ja(e,t){Pe.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Pi(e,t)),this.mergeVertices()}ja.prototype=Object.create(Pe.prototype);ja.prototype.constructor=ja;function Pi(e,t){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Ct.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}Pi.prototype=Object.create(Ct.prototype);Pi.prototype.constructor=Pi;function Ya(e,t){Pe.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Cr(e,t)),this.mergeVertices()}Ya.prototype=Object.create(Pe.prototype);Ya.prototype.constructor=Ya;function Cr(e,t){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Ct.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}Cr.prototype=Object.create(Ct.prototype);Cr.prototype.constructor=Cr;function qa(e,t){Pe.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Li(e,t)),this.mergeVertices()}qa.prototype=Object.create(Pe.prototype);qa.prototype.constructor=qa;function Li(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Ct.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}Li.prototype=Object.create(Ct.prototype);Li.prototype.constructor=Li;function Za(e,t){Pe.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ci(e,t)),this.mergeVertices()}Za.prototype=Object.create(Pe.prototype);Za.prototype.constructor=Za;function Ci(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Ct.call(this,i,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}Ci.prototype=Object.create(Ct.prototype);Ci.prototype.constructor=Ci;function Ja(e,t,n,r,i,a){Pe.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},a!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new Ii(e,t,n,r,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}Ja.prototype=Object.create(Pe.prototype);Ja.prototype.constructor=Ja;function Ii(e,t,n,r,i){ye.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var s=new M,o=new M,c=new se,u=new M,l,f,h=[],d=[],p=[],v=[];g(),this.setIndex(v),this.addAttribute("position",new pe(h,3)),this.addAttribute("normal",new pe(d,3)),this.addAttribute("uv",new pe(p,2));function g(){for(l=0;l<t;l++)m(l);m(i===!1?t:0),_(),y()}function m(x){u=e.getPointAt(x/t,u);var E=a.normals[x],T=a.binormals[x];for(f=0;f<=r;f++){var S=f/r*Math.PI*2,C=Math.sin(S),R=-Math.cos(S);o.x=R*E.x+C*T.x,o.y=R*E.y+C*T.y,o.z=R*E.z+C*T.z,o.normalize(),d.push(o.x,o.y,o.z),s.x=u.x+n*o.x,s.y=u.y+n*o.y,s.z=u.z+n*o.z,h.push(s.x,s.y,s.z)}}function y(){for(f=1;f<=t;f++)for(l=1;l<=r;l++){var x=(r+1)*(f-1)+(l-1),E=(r+1)*f+(l-1),T=(r+1)*f+l,S=(r+1)*(f-1)+l;v.push(x,E,S),v.push(E,T,S)}}function _(){for(l=0;l<=t;l++)for(f=0;f<=r;f++)c.x=l/t,c.y=f/r,p.push(c.x,c.y)}}Ii.prototype=Object.create(ye.prototype);Ii.prototype.constructor=Ii;function Ka(e,t,n,r,i,a,s){Pe.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},s!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Oi(e,t,n,r,i,a)),this.mergeVertices()}Ka.prototype=Object.create(Pe.prototype);Ka.prototype.constructor=Ka;function Oi(e,t,n,r,i,a){ye.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var s=[],o=[],c=[],u=[],l,f,h=new M,d=new M,p=new M,v=new M,g=new M,m=new M,y=new M;for(l=0;l<=n;++l){var _=l/n*i*Math.PI*2;for(z(_,i,a,e,p),z(_+.01,i,a,e,v),m.subVectors(v,p),y.addVectors(v,p),g.crossVectors(m,y),y.crossVectors(g,m),g.normalize(),y.normalize(),f=0;f<=r;++f){var x=f/r*Math.PI*2,E=-t*Math.cos(x),T=t*Math.sin(x);h.x=p.x+(E*y.x+T*g.x),h.y=p.y+(E*y.y+T*g.y),h.z=p.z+(E*y.z+T*g.z),o.push(h.x,h.y,h.z),d.subVectors(h,p).normalize(),c.push(d.x,d.y,d.z),u.push(l/n),u.push(f/r)}}for(f=1;f<=n;f++)for(l=1;l<=r;l++){var S=(r+1)*(f-1)+(l-1),C=(r+1)*f+(l-1),R=(r+1)*f+l,F=(r+1)*(f-1)+l;s.push(S,C,F),s.push(C,R,F)}this.setIndex(s),this.addAttribute("position",new pe(o,3)),this.addAttribute("normal",new pe(c,3)),this.addAttribute("uv",new pe(u,2));function z(q,$,te,L,A){var H=Math.cos(q),B=Math.sin(q),Q=te/$*q,J=Math.cos(Q);A.x=L*(2+J)*.5*H,A.y=L*(2+J)*B*.5,A.z=L*Math.sin(Q)*.5}}Oi.prototype=Object.create(ye.prototype);Oi.prototype.constructor=Oi;function Qa(e,t,n,r,i){Pe.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Di(e,t,n,r,i)),this.mergeVertices()}Qa.prototype=Object.create(Pe.prototype);Qa.prototype.constructor=Qa;function Di(e,t,n,r,i){ye.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||Math.PI*2;var a=[],s=[],o=[],c=[],u=new M,l=new M,f=new M,h,d;for(h=0;h<=n;h++)for(d=0;d<=r;d++){var p=d/r*i,v=h/n*Math.PI*2;l.x=(e+t*Math.cos(v))*Math.cos(p),l.y=(e+t*Math.cos(v))*Math.sin(p),l.z=t*Math.sin(v),s.push(l.x,l.y,l.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),f.subVectors(l,u).normalize(),o.push(f.x,f.y,f.z),c.push(d/r),c.push(h/n)}for(h=1;h<=n;h++)for(d=1;d<=r;d++){var g=(r+1)*h+d-1,m=(r+1)*(h-1)+d-1,y=(r+1)*(h-1)+d,_=(r+1)*h+d;a.push(g,m,_),a.push(m,y,_)}this.setIndex(a),this.addAttribute("position",new pe(s,3)),this.addAttribute("normal",new pe(o,3)),this.addAttribute("uv",new pe(c,2))}Di.prototype=Object.create(ye.prototype);Di.prototype.constructor=Di;var Mx={triangulate:function(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,a=ih(e,0,i,n,!0),s=[];if(!a)return s;var o,c,u,l,f,h,d;if(r&&(a=Rx(e,t,a,n)),e.length>80*n){o=u=e[0],c=l=e[1];for(var p=n;p<i;p+=n)f=e[p],h=e[p+1],f<o&&(o=f),h<c&&(c=h),f>u&&(u=f),h>l&&(l=h);d=Math.max(u-o,l-c),d=d!==0?1/d:0}return Ni(a,s,n,o,c,d),s}};function ih(e,t,n,r,i){var a,s;if(i===Bx(e,t,n,r)>0)for(a=t;a<n;a+=r)s=il(a,e[a],e[a+1],s);else for(a=n-r;a>=t;a-=r)s=il(a,e[a],e[a+1],s);return s&&Jn(s,s.next)&&(Bi(s),s=s.next),s}function Fi(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&(Jn(n,n.next)||yt(n.prev,n,n.next)===0)){if(Bi(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function Ni(e,t,n,r,i,a,s){if(!!e){!s&&a&&Ix(e,r,i,a);for(var o=e,c,u;e.prev!==e.next;){if(c=e.prev,u=e.next,a?Tx(e,r,i,a):Ex(e)){t.push(c.i/n),t.push(e.i/n),t.push(u.i/n),Bi(e),e=u.next,o=u.next;continue}if(e=u,e===o){s?s===1?(e=Sx(e,t,n),Ni(e,t,n,r,i,a,2)):s===2&&Ax(e,t,n,r,i,a):Ni(Fi(e),t,n,r,i,a,1);break}}}}function Ex(e){var t=e.prev,n=e,r=e.next;if(yt(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if($a(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&yt(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Tx(e,t,n,r){var i=e.prev,a=e,s=e.next;if(yt(i,a,s)>=0)return!1;for(var o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,c=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,u=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,l=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,f=Bo(o,c,t,n,r),h=Bo(u,l,t,n,r),d=e.nextZ;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&$a(i.x,i.y,a.x,a.y,s.x,s.y,d.x,d.y)&&yt(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&$a(i.x,i.y,a.x,a.y,s.x,s.y,d.x,d.y)&&yt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function Sx(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Jn(i,a)&&ah(i,r,r.next,a)&&Ui(i,a)&&Ui(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Bi(r),Bi(r.next),r=e=a),r=r.next}while(r!==e);return r}function Ax(e,t,n,r,i,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Fx(s,o)){var c=sh(s,o);s=Fi(s,s.next),c=Fi(c,c.next),Ni(s,t,n,r,i,a),Ni(c,t,n,r,i,a);return}o=o.next}s=s.next}while(s!==e)}function Rx(e,t,n,r){var i=[],a,s,o,c,u;for(a=0,s=t.length;a<s;a++)o=t[a]*r,c=a<s-1?t[a+1]*r:e.length,u=ih(e,o,c,r,!1),u===u.next&&(u.steiner=!0),i.push(Dx(u));for(i.sort(Px),a=0;a<i.length;a++)Lx(i[a],n),n=Fi(n,n.next);return n}function Px(e,t){return e.x-t.x}function Lx(e,t){if(t=Cx(e,t),t){var n=sh(t,e);Fi(n,n.next)}}function Cx(e,t){var n=t,r=e.x,i=e.y,a=-1/0,s;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var o=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=r&&o>a){if(a=o,o===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===a)return s.prev;var c=s,u=s.x,l=s.y,f=1/0,h;for(n=s.next;n!==c;)r>=n.x&&n.x>=u&&r!==n.x&&$a(i<l?r:a,i,u,l,i<l?a:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),(h<f||h===f&&n.x>s.x)&&Ui(n,e)&&(s=n,f=h)),n=n.next;return s}function Ix(e,t,n,r){var i=e;do i.z===null&&(i.z=Bo(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Ox(i)}function Ox(e){var t,n,r,i,a,s,o,c,u=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,r=n,o=0,t=0;t<u&&(o++,r=r.nextZ,!!r);t++);for(c=u;o>0||c>0&&r;)o!==0&&(c===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,c--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(s>1);return e}function Bo(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Dx(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function $a(e,t,n,r,i,a,s,o){return(i-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(r-o)-(n-s)*(t-o)>=0&&(n-s)*(a-o)-(i-s)*(r-o)>=0}function Fx(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Nx(e,t)&&Ui(e,t)&&Ui(t,e)&&Ux(e,t)}function yt(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Jn(e,t){return e.x===t.x&&e.y===t.y}function ah(e,t,n,r){return Jn(e,t)&&Jn(n,r)||Jn(e,r)&&Jn(n,t)?!0:yt(e,t,n)>0!=yt(e,t,r)>0&&yt(n,r,e)>0!=yt(n,r,t)>0}function Nx(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ah(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Ui(e,t){return yt(e.prev,e,e.next)<0?yt(e,t,e.next)>=0&&yt(e,e.prev,t)>=0:yt(e,t,e.prev)<0||yt(e,e.next,t)<0}function Ux(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function sh(e,t){var n=new zo(e.i,e.x,e.y),r=new zo(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function il(e,t,n,r){var i=new zo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Bi(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function zo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Bx(e,t,n,r){for(var i=0,a=t,s=n-r;a<n;a+=r)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}var Nn={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},isClockWise:function(e){return Nn.area(e)<0},triangulateShape:function(e,t){function n(l){var f=l.length;f>2&&l[f-1].equals(l[0])&&l.pop()}function r(l,f){for(var h=0;h<f.length;h++)l.push(f[h].x),l.push(f[h].y)}var i=[],a=[],s=[];n(e),r(i,e);var o=e.length;for(t.forEach(n),u=0;u<t.length;u++)a.push(o),o+=t[u].length,r(i,t[u]);for(var c=Mx.triangulate(i,a),u=0;u<c.length;u+=3)s.push(c.slice(u,u+3));return s}};function cr(e,t){Pe.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new an(e,t)),this.mergeVertices()}cr.prototype=Object.create(Pe.prototype);cr.prototype.constructor=cr;function an(e,t){typeof e>"u"||(ye.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}an.prototype=Object.create(ye.prototype);an.prototype.constructor=an;an.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),r=n?Array.prototype.slice.call(n.array):[],i=this.index,a=i?Array.prototype.slice.call(i.array):[];return{position:t,uv:r,index:a}};an.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var r=0;r<n;r++){var i=e[r];this.addShape(i,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new pe(t.arrays.position,3)),this.addAttribute("uv",new pe(t.arrays.uv,2))};an.prototype.addShape=function(e,t){var n=t.arrays?t.arrays:this.getArrays(),r=n.position,i=n.index,a=n.uv,s=[],o=t.amount!==void 0?t.amount:100,c=t.bevelThickness!==void 0?t.bevelThickness:6,u=t.bevelSize!==void 0?t.bevelSize:c-2,l=t.bevelSegments!==void 0?t.bevelSegments:3,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,p=t.extrudePath,v,g=!1,m=t.UVGenerator!==void 0?t.UVGenerator:cr.WorldUVGenerator,y,_,x,E;p&&(v=p.getSpacedPoints(d),g=!0,f=!1,y=t.frames!==void 0?t.frames:p.computeFrenetFrames(d,!1),_=new M,x=new M,E=new M),f||(l=0,c=0,u=0);var T,S,C,R=this,F=e.extractPoints(h),z=F.shape,q=F.holes,$=!Nn.isClockWise(z);if($)for(z=z.reverse(),S=0,C=q.length;S<C;S++)T=q[S],Nn.isClockWise(T)&&(q[S]=T.reverse());var te=Nn.triangulateShape(z,q),L=z;for(S=0,C=q.length;S<C;S++)T=q[S],z=z.concat(T);function A(ee,O,j){return O||console.error("THREE.ExtrudeGeometry: vec does not exist"),O.clone().multiplyScalar(j).add(ee)}var H,B,Q,J,Z,ue=z.length,de,_e=te.length;function k(ee,O,j){var ae,he,ce,Me=ee.x-O.x,Ie=ee.y-O.y,Ue=j.x-ee.x,it=j.y-ee.y,He=Me*Me+Ie*Ie,ut=Me*it-Ie*Ue;if(Math.abs(ut)>Number.EPSILON){var je=Math.sqrt(He),lt=Math.sqrt(Ue*Ue+it*it),fn=O.x-Ie/je,oa=O.y+Me/je,lr=j.x-it/lt,ca=j.y+Ue/lt,kn=((lr-fn)*it-(ca-oa)*Ue)/(Me*it-Ie*Ue);ae=fn+Me*kn-ee.x,he=oa+Ie*kn-ee.y;var Qr=ae*ae+he*he;if(Qr<=2)return new se(ae,he);ce=Math.sqrt(Qr/2)}else{var Mn=!1;Me>Number.EPSILON?Ue>Number.EPSILON&&(Mn=!0):Me<-Number.EPSILON?Ue<-Number.EPSILON&&(Mn=!0):Math.sign(Ie)===Math.sign(it)&&(Mn=!0),Mn?(ae=-Ie,he=Me,ce=Math.sqrt(He)):(ae=Me,he=Ie,ce=Math.sqrt(He/2))}return new se(ae/ce,he/ce)}for(var I=[],G=0,K=L.length,xe=K-1,le=G+1;G<K;G++,xe++,le++)xe===K&&(xe=0),le===K&&(le=0),I[G]=k(L[G],L[xe],L[le]);var ge=[],w,D=I.concat();for(S=0,C=q.length;S<C;S++){for(T=q[S],w=[],G=0,K=T.length,xe=K-1,le=G+1;G<K;G++,xe++,le++)xe===K&&(xe=0),le===K&&(le=0),w[G]=k(T[G],T[xe],T[le]);ge.push(w),D=D.concat(w)}for(H=0;H<l;H++){for(Q=H/l,J=c*Math.cos(Q*Math.PI/2),B=u*Math.sin(Q*Math.PI/2),G=0,K=L.length;G<K;G++)Z=A(L[G],I[G],B),oe(Z.x,Z.y,-J);for(S=0,C=q.length;S<C;S++)for(T=q[S],w=ge[S],G=0,K=T.length;G<K;G++)Z=A(T[G],w[G],B),oe(Z.x,Z.y,-J)}for(B=u,G=0;G<ue;G++)Z=f?A(z[G],D[G],B):z[G],g?(x.copy(y.normals[0]).multiplyScalar(Z.x),_.copy(y.binormals[0]).multiplyScalar(Z.y),E.copy(v[0]).add(x).add(_),oe(E.x,E.y,E.z)):oe(Z.x,Z.y,0);var V;for(V=1;V<=d;V++)for(G=0;G<ue;G++)Z=f?A(z[G],D[G],B):z[G],g?(x.copy(y.normals[V]).multiplyScalar(Z.x),_.copy(y.binormals[V]).multiplyScalar(Z.y),E.copy(v[V]).add(x).add(_),oe(E.x,E.y,E.z)):oe(Z.x,Z.y,o/d*V);for(H=l-1;H>=0;H--){for(Q=H/l,J=c*Math.cos(Q*Math.PI/2),B=u*Math.sin(Q*Math.PI/2),G=0,K=L.length;G<K;G++)Z=A(L[G],I[G],B),oe(Z.x,Z.y,o+J);for(S=0,C=q.length;S<C;S++)for(T=q[S],w=ge[S],G=0,K=T.length;G<K;G++)Z=A(T[G],w[G],B),g?oe(Z.x,Z.y+v[d-1].y,v[d-1].x+J):oe(Z.x,Z.y,o+J)}W(),X();function W(){var ee=r.length/3;if(f){var O=0,j=ue*O;for(G=0;G<_e;G++)de=te[G],N(de[2]+j,de[1]+j,de[0]+j);for(O=d+l*2,j=ue*O,G=0;G<_e;G++)de=te[G],N(de[0]+j,de[1]+j,de[2]+j)}else{for(G=0;G<_e;G++)de=te[G],N(de[2],de[1],de[0]);for(G=0;G<_e;G++)de=te[G],N(de[0]+ue*d,de[1]+ue*d,de[2]+ue*d)}R.addGroup(ee,r.length/3-ee,t.material!==void 0?t.material:0)}function X(){var ee=r.length/3,O=0;for(ie(L,O),O+=L.length,S=0,C=q.length;S<C;S++)T=q[S],ie(T,O),O+=T.length;R.addGroup(ee,r.length/3-ee,t.extrudeMaterial!==void 0?t.extrudeMaterial:1)}function ie(ee,O){var j,ae;for(G=ee.length;--G>=0;){j=G,ae=G-1,ae<0&&(ae=ee.length-1);var he=0,ce=d+l*2;for(he=0;he<ce;he++){var Me=ue*he,Ie=ue*(he+1),Ue=O+j+Me,it=O+ae+Me,He=O+ae+Ie,ut=O+j+Ie;ne(Ue,it,He,ut)}}}function oe(ee,O,j){s.push(ee),s.push(O),s.push(j)}function N(ee,O,j){Y(ee),Y(O),Y(j);var ae=r.length/3,he=m.generateTopUV(R,r,ae-3,ae-2,ae-1);fe(he[0]),fe(he[1]),fe(he[2])}function ne(ee,O,j,ae){Y(ee),Y(O),Y(ae),Y(O),Y(j),Y(ae);var he=r.length/3,ce=m.generateSideWallUV(R,r,he-6,he-3,he-2,he-1);fe(ce[0]),fe(ce[1]),fe(ce[3]),fe(ce[1]),fe(ce[2]),fe(ce[3])}function Y(ee){i.push(r.length/3),r.push(s[ee*3+0]),r.push(s[ee*3+1]),r.push(s[ee*3+2])}function fe(ee){a.push(ee.x),a.push(ee.y)}t.arrays||(this.setIndex(i),this.addAttribute("position",new pe(r,3)),this.addAttribute("uv",new pe(a,2)))};cr.WorldUVGenerator={generateTopUV:function(e,t,n,r,i){var a=t[n*3],s=t[n*3+1],o=t[r*3],c=t[r*3+1],u=t[i*3],l=t[i*3+1];return[new se(a,s),new se(o,c),new se(u,l)]},generateSideWallUV:function(e,t,n,r,i,a){var s=t[n*3],o=t[n*3+1],c=t[n*3+2],u=t[r*3],l=t[r*3+1],f=t[r*3+2],h=t[i*3],d=t[i*3+1],p=t[i*3+2],v=t[a*3],g=t[a*3+1],m=t[a*3+2];return Math.abs(o-l)<.01?[new se(s,1-c),new se(u,1-f),new se(h,1-p),new se(v,1-m)]:[new se(o,1-c),new se(l,1-f),new se(d,1-p),new se(g,1-m)]}};function es(e,t){Pe.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new zi(e,t)),this.mergeVertices()}es.prototype=Object.create(Pe.prototype);es.prototype.constructor=es;function zi(e,t){t=t||{};var n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Pe;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),an.call(this,r,t),this.type="TextBufferGeometry"}zi.prototype=Object.create(an.prototype);zi.prototype.constructor=zi;function Gi(e,t,n,r,i,a,s){Pe.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Ir(e,t,n,r,i,a,s)),this.mergeVertices()}Gi.prototype=Object.create(Pe.prototype);Gi.prototype.constructor=Gi;function Ir(e,t,n,r,i,a,s){ye.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==void 0?r:0,i=i!==void 0?i:Math.PI*2,a=a!==void 0?a:0,s=s!==void 0?s:Math.PI;var o=a+s,c,u,l=0,f=[],h=new M,d=new M,p=[],v=[],g=[],m=[];for(u=0;u<=n;u++){var y=[],_=u/n;for(c=0;c<=t;c++){var x=c/t;h.x=-e*Math.cos(r+x*i)*Math.sin(a+_*s),h.y=e*Math.cos(a+_*s),h.z=e*Math.sin(r+x*i)*Math.sin(a+_*s),v.push(h.x,h.y,h.z),d.set(h.x,h.y,h.z).normalize(),g.push(d.x,d.y,d.z),m.push(x,1-_),y.push(l++)}f.push(y)}for(u=0;u<n;u++)for(c=0;c<t;c++){var E=f[u][c+1],T=f[u][c],S=f[u+1][c],C=f[u+1][c+1];(u!==0||a>0)&&p.push(E,T,C),(u!==n-1||o<Math.PI)&&p.push(T,S,C)}this.setIndex(p),this.addAttribute("position",new pe(v,3)),this.addAttribute("normal",new pe(g,3)),this.addAttribute("uv",new pe(m,2))}Ir.prototype=Object.create(ye.prototype);Ir.prototype.constructor=Ir;function ts(e,t,n,r,i,a){Pe.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Hi(e,t,n,r,i,a)),this.mergeVertices()}ts.prototype=Object.create(Pe.prototype);ts.prototype.constructor=ts;function Hi(e,t,n,r,i,a){ye.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=i!==void 0?i:0,a=a!==void 0?a:Math.PI*2,n=n!==void 0?Math.max(3,n):8,r=r!==void 0?Math.max(1,r):1;var s=[],o=[],c=[],u=[],l,f=e,h=(t-e)/r,d=new M,p=new se,v,g;for(v=0;v<=r;v++){for(g=0;g<=n;g++)l=i+g/n*a,d.x=f*Math.cos(l),d.y=f*Math.sin(l),o.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,u.push(p.x,p.y);f+=h}for(v=0;v<r;v++){var m=v*(n+1);for(g=0;g<n;g++){l=g+m;var y=l,_=l+n+1,x=l+n+2,E=l+1;s.push(y,_,E),s.push(_,x,E)}}this.setIndex(s),this.addAttribute("position",new pe(o,3)),this.addAttribute("normal",new pe(c,3)),this.addAttribute("uv",new pe(u,2))}Hi.prototype=Object.create(ye.prototype);Hi.prototype.constructor=Hi;function ns(e,t,n,r){Pe.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new ki(e,t,n,r)),this.mergeVertices()}ns.prototype=Object.create(Pe.prototype);ns.prototype.constructor=ns;function ki(e,t,n,r){ye.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||Math.PI*2,r=Ce.clamp(r,0,Math.PI*2);var i=[],a=[],s=[],o,c=1/t,u=new M,l=new se,f,h;for(f=0;f<=t;f++){var d=n+f*c*r,p=Math.sin(d),v=Math.cos(d);for(h=0;h<=e.length-1;h++)u.x=e[h].x*p,u.y=e[h].y,u.z=e[h].x*v,a.push(u.x,u.y,u.z),l.x=f/t,l.y=h/(e.length-1),s.push(l.x,l.y)}for(f=0;f<t;f++)for(h=0;h<e.length-1;h++){o=h+f*e.length;var g=o,m=o+e.length,y=o+e.length+1,_=o+1;i.push(g,m,_),i.push(m,y,_)}if(this.setIndex(i),this.addAttribute("position",new pe(a,3)),this.addAttribute("uv",new pe(s,2)),this.computeVertexNormals(),r===Math.PI*2){var x=this.attributes.normal.array,E=new M,T=new M,S=new M;for(o=t*e.length*3,f=0,h=0;f<e.length;f++,h+=3)E.x=x[h+0],E.y=x[h+1],E.z=x[h+2],T.x=x[o+h+0],T.y=x[o+h+1],T.z=x[o+h+2],S.addVectors(E,T).normalize(),x[h+0]=x[o+h+0]=S.x,x[h+1]=x[o+h+1]=S.y,x[h+2]=x[o+h+2]=S.z}}ki.prototype=Object.create(ye.prototype);ki.prototype.constructor=ki;function Or(e,t){Pe.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Dr(e,t)),this.mergeVertices()}Or.prototype=Object.create(Pe.prototype);Or.prototype.constructor=Or;Or.prototype.toJSON=function(){var e=Pe.prototype.toJSON.call(this),t=this.parameters.shapes;return oh(t,e)};function Dr(e,t){ye.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],s=0,o=0;if(Array.isArray(e)===!1)u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(s,o,c),s+=o,o=0;this.setIndex(n),this.addAttribute("position",new pe(r,3)),this.addAttribute("normal",new pe(i,3)),this.addAttribute("uv",new pe(a,2));function u(l){var f,h,d,p=r.length/3,v=l.extractPoints(t),g=v.shape,m=v.holes;if(Nn.isClockWise(g)===!1)for(g=g.reverse(),f=0,h=m.length;f<h;f++)d=m[f],Nn.isClockWise(d)===!0&&(m[f]=d.reverse());var y=Nn.triangulateShape(g,m);for(f=0,h=m.length;f<h;f++)d=m[f],g=g.concat(d);for(f=0,h=g.length;f<h;f++){var _=g[f];r.push(_.x,_.y,0),i.push(0,0,1),a.push(_.x,_.y)}for(f=0,h=y.length;f<h;f++){var x=y[f],E=x[0]+p,T=x[1]+p,S=x[2]+p;n.push(E,T,S),o+=3}}}Dr.prototype=Object.create(ye.prototype);Dr.prototype.constructor=Dr;Dr.prototype.toJSON=function(){var e=ye.prototype.toJSON.call(this),t=this.parameters.shapes;return oh(t,e)};function oh(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function rs(e,t){ye.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;var n=[],r=Math.cos(Ce.DEG2RAD*t),i=[0,0],a={},s,o,c,u=["a","b","c"],l;e.isBufferGeometry?(l=new Pe,l.fromBufferGeometry(e)):l=e.clone(),l.mergeVertices(),l.computeFaceNormals();for(var f=l.vertices,h=l.faces,d=0,p=h.length;d<p;d++)for(var v=h[d],g=0;g<3;g++)s=v[u[g]],o=v[u[(g+1)%3]],i[0]=Math.min(s,o),i[1]=Math.max(s,o),c=i[0]+","+i[1],a[c]===void 0?a[c]={index1:i[0],index2:i[1],face1:d,face2:void 0}:a[c].face2=d;for(c in a){var m=a[c];if(m.face2===void 0||h[m.face1].normal.dot(h[m.face2].normal)<=r){var y=f[m.index1];n.push(y.x,y.y,y.z),y=f[m.index2],n.push(y.x,y.y,y.z)}}this.addAttribute("position",new pe(n,3))}rs.prototype=Object.create(ye.prototype);rs.prototype.constructor=rs;function Fr(e,t,n,r,i,a,s,o){Pe.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Hn(e,t,n,r,i,a,s,o)),this.mergeVertices()}Fr.prototype=Object.create(Pe.prototype);Fr.prototype.constructor=Fr;function Hn(e,t,n,r,i,a,s,o){ye.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o};var c=this;e=e!==void 0?e:1,t=t!==void 0?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=a!==void 0?a:!1,s=s!==void 0?s:0,o=o!==void 0?o:Math.PI*2;var u=[],l=[],f=[],h=[],d=0,p=[],v=n/2,g=0;m(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.addAttribute("position",new pe(l,3)),this.addAttribute("normal",new pe(f,3)),this.addAttribute("uv",new pe(h,2));function m(){var _,x,E=new M,T=new M,S=0,C=(t-e)/n;for(x=0;x<=i;x++){var R=[],F=x/i,z=F*(t-e)+e;for(_=0;_<=r;_++){var q=_/r,$=q*o+s,te=Math.sin($),L=Math.cos($);T.x=z*te,T.y=-F*n+v,T.z=z*L,l.push(T.x,T.y,T.z),E.set(te,C,L).normalize(),f.push(E.x,E.y,E.z),h.push(q,1-F),R.push(d++)}p.push(R)}for(_=0;_<r;_++)for(x=0;x<i;x++){var A=p[x][_],H=p[x+1][_],B=p[x+1][_+1],Q=p[x][_+1];u.push(A,H,Q),u.push(H,B,Q),S+=6}c.addGroup(g,S,0),g+=S}function y(_){var x,E,T,S=new se,C=new M,R=0,F=_===!0?e:t,z=_===!0?1:-1;for(E=d,x=1;x<=r;x++)l.push(0,v*z,0),f.push(0,z,0),h.push(.5,.5),d++;for(T=d,x=0;x<=r;x++){var q=x/r,$=q*o+s,te=Math.cos($),L=Math.sin($);C.x=F*L,C.y=v*z,C.z=F*te,l.push(C.x,C.y,C.z),f.push(0,z,0),S.x=te*.5+.5,S.y=L*.5*z+.5,h.push(S.x,S.y),d++}for(x=0;x<r;x++){var A=E+x,H=T+x;_===!0?u.push(H,H+1,A):u.push(H+1,H,A),R+=3}c.addGroup(g,R,_===!0?1:2),g+=R}}Hn.prototype=Object.create(ye.prototype);Hn.prototype.constructor=Hn;function is(e,t,n,r,i,a,s){Fr.call(this,0,e,t,n,r,i,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}is.prototype=Object.create(Fr.prototype);is.prototype.constructor=is;function as(e,t,n,r,i,a,s){Hn.call(this,0,e,t,n,r,i,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:s}}as.prototype=Object.create(Hn.prototype);as.prototype.constructor=as;function ss(e,t,n,r){Pe.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Vi(e,t,n,r)),this.mergeVertices()}ss.prototype=Object.create(Pe.prototype);ss.prototype.constructor=ss;function Vi(e,t,n,r){ye.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?n:0,r=r!==void 0?r:Math.PI*2;var i=[],a=[],s=[],o=[],c,u,l=new M,f=new se;for(a.push(0,0,0),s.push(0,0,1),o.push(.5,.5),u=0,c=3;u<=t;u++,c+=3){var h=n+u/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),s.push(0,0,1),f.x=(a[c]/e+1)/2,f.y=(a[c+1]/e+1)/2,o.push(f.x,f.y)}for(c=1;c<=t;c++)i.push(c,c+1,0);this.setIndex(i),this.addAttribute("position",new pe(a,3)),this.addAttribute("normal",new pe(s,3)),this.addAttribute("uv",new pe(o,2))}Vi.prototype=Object.create(ye.prototype);Vi.prototype.constructor=Vi;var Et=Object.freeze({WireframeGeometry:Va,ParametricGeometry:Wa,ParametricBufferGeometry:Ri,TetrahedronGeometry:ja,TetrahedronBufferGeometry:Pi,OctahedronGeometry:Ya,OctahedronBufferGeometry:Cr,IcosahedronGeometry:qa,IcosahedronBufferGeometry:Li,DodecahedronGeometry:Za,DodecahedronBufferGeometry:Ci,PolyhedronGeometry:Xa,PolyhedronBufferGeometry:Ct,TubeGeometry:Ja,TubeBufferGeometry:Ii,TorusKnotGeometry:Ka,TorusKnotBufferGeometry:Oi,TorusGeometry:Qa,TorusBufferGeometry:Di,TextGeometry:es,TextBufferGeometry:zi,SphereGeometry:Gi,SphereBufferGeometry:Ir,RingGeometry:ts,RingBufferGeometry:Hi,PlaneGeometry:Ba,PlaneBufferGeometry:Lr,LatheGeometry:ns,LatheBufferGeometry:ki,ShapeGeometry:Or,ShapeBufferGeometry:Dr,ExtrudeGeometry:cr,ExtrudeBufferGeometry:an,EdgesGeometry:rs,ConeGeometry:is,ConeBufferGeometry:as,CylinderGeometry:Fr,CylinderBufferGeometry:Hn,CircleGeometry:ss,CircleBufferGeometry:Vi,BoxGeometry:Ua,BoxBufferGeometry:Pr});function Wi(e){Fe.call(this),this.type="ShadowMaterial",this.color=new we(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}Wi.prototype=Object.create(Fe.prototype);Wi.prototype.constructor=Wi;Wi.prototype.isShadowMaterial=!0;function Xi(e){qt.call(this,e),this.type="RawShaderMaterial"}Xi.prototype=Object.create(qt.prototype);Xi.prototype.constructor=Xi;Xi.prototype.isRawShaderMaterial=!0;function gn(e){Fe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new we(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}gn.prototype=Object.create(Fe.prototype);gn.prototype.constructor=gn;gn.prototype.isMeshStandardMaterial=!0;gn.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Nr(e){gn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}Nr.prototype=Object.create(gn.prototype);Nr.prototype.constructor=Nr;Nr.prototype.isMeshPhysicalMaterial=!0;Nr.prototype.copy=function(e){return gn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this};function sn(e){Fe.call(this),this.type="MeshPhongMaterial",this.color=new we(16777215),this.specular=new we(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}sn.prototype=Object.create(Fe.prototype);sn.prototype.constructor=sn;sn.prototype.isMeshPhongMaterial=!0;sn.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Ur(e){sn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}Ur.prototype=Object.create(sn.prototype);Ur.prototype.constructor=Ur;Ur.prototype.isMeshToonMaterial=!0;Ur.prototype.copy=function(e){return sn.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this};function Br(e){Fe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new se(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Br.prototype=Object.create(Fe.prototype);Br.prototype.constructor=Br;Br.prototype.isMeshNormalMaterial=!0;Br.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function zr(e){Fe.call(this),this.type="MeshLambertMaterial",this.color=new we(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new we(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Cs,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}zr.prototype=Object.create(Fe.prototype);zr.prototype.constructor=zr;zr.prototype.isMeshLambertMaterial=!0;zr.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Gr(e){Ze.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Gr.prototype=Object.create(Ze.prototype);Gr.prototype.constructor=Gr;Gr.prototype.isLineDashedMaterial=!0;Gr.prototype.copy=function(e){return Ze.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var zx=Object.freeze({ShadowMaterial:Wi,SpriteMaterial:sr,RawShaderMaterial:Xi,ShaderMaterial:qt,PointsMaterial:or,MeshPhysicalMaterial:Nr,MeshStandardMaterial:gn,MeshPhongMaterial:sn,MeshToonMaterial:Ur,MeshNormalMaterial:Br,MeshLambertMaterial:zr,MeshDepthMaterial:ir,MeshDistanceMaterial:ar,MeshBasicMaterial:Pt,LineDashedMaterial:Gr,LineBasicMaterial:Ze,Material:Fe}),Hr={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function ch(e,t,n){var r=this,i=!1,a=0,s=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){s++,i===!1&&r.onStart!==void 0&&r.onStart(c,a,s),i=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,s),a===s&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return o?o(c):c},this.setURLModifier=function(c){return o=c,this}}var Dt=new ch,hn={};function wn(e){this.manager=e!==void 0?e:Dt}Object.assign(wn.prototype,{load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Hr.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(hn[e]!==void 0){hn[e].push({onLoad:t,onProgress:n,onError:r});return}var s=/^data:(.*?)(;base64)?,(.*)$/,o=e.match(s);if(o){var c=o[1],u=!!o[2],l=o[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var f,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);h==="blob"?f=new Blob([d.buffer],{type:c}):f=d.buffer;break;case"document":var v=new DOMParser;f=v.parseFromString(l,c);break;case"json":f=JSON.parse(l);break;default:f=l;break}window.setTimeout(function(){t&&t(f),i.manager.itemEnd(e)},0)}catch(y){window.setTimeout(function(){r&&r(y),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{hn[e]=[],hn[e].push({onLoad:t,onProgress:n,onError:r});var g=new XMLHttpRequest;g.open("GET",e,!0),g.addEventListener("load",function(y){var _=this.response;Hr.add(e,_);var x=hn[e];if(delete hn[e],this.status===200){for(var E=0,T=x.length;E<T;E++){var S=x[E];S.onLoad&&S.onLoad(_)}i.manager.itemEnd(e)}else if(this.status===0){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var E=0,T=x.length;E<T;E++){var S=x[E];S.onLoad&&S.onLoad(_)}i.manager.itemEnd(e)}else{for(var E=0,T=x.length;E<T;E++){var S=x[E];S.onError&&S.onError(y)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),g.addEventListener("progress",function(y){for(var _=hn[e],x=0,E=_.length;x<E;x++){var T=_[x];T.onProgress&&T.onProgress(y)}},!1),g.addEventListener("error",function(y){var _=hn[e];delete hn[e];for(var x=0,E=_.length;x<E;x++){var T=_[x];T.onError&&T.onError(y)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),this.responseType!==void 0&&(g.responseType=this.responseType),this.withCredentials!==void 0&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(var m in this.requestHeader)g.setRequestHeader(m,this.requestHeader[m]);g.send(null)}return i.manager.itemStart(e),g},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});function Gx(e){this.manager=e!==void 0?e:Dt,this._parser=null}Object.assign(Gx.prototype,{load:function(e,t,n,r){var i=this,a=[],s=new Ai;s.image=a;var o=new wn(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer");function c(h){o.load(e[h],function(d){var p=i._parser(d,!0);a[h]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(s.minFilter=St),s.format=p.format,s.needsUpdate=!0,t&&t(s))},n,r)}if(Array.isArray(e))for(var u=0,l=0,f=e.length;l<f;++l)c(l);else o.load(e,function(h){var d=i._parser(h,!0);if(d.isCubemap)for(var p=d.mipmaps.length/d.mipmapCount,v=0;v<p;v++){a[v]={mipmaps:[]};for(var g=0;g<d.mipmapCount;g++)a[v].mipmaps.push(d.mipmaps[v*d.mipmapCount+g]),a[v].format=d.format,a[v].width=d.width,a[v].height=d.height}else s.image.width=d.width,s.image.height=d.height,s.mipmaps=d.mipmaps;d.mipmapCount===1&&(s.minFilter=St),s.format=d.format,s.needsUpdate=!0,t&&t(s)},n,r);return s},setPath:function(e){return this.path=e,this}});function Hx(e){this.manager=e!==void 0?e:Dt,this._parser=null}Object.assign(Hx.prototype,{load:function(e,t,n,r){var i=this,a=new Rr,s=new wn(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(o){var c=i._parser(o);!c||(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Nt,a.wrapT=c.wrapT!==void 0?c.wrapT:Nt,a.magFilter=c.magFilter!==void 0?c.magFilter:St,a.minFilter=c.minFilter!==void 0?c.minFilter:Is,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps),c.mipmapCount===1&&(a.minFilter=St),a.needsUpdate=!0,t&&t(a,c))},n,r),a}});function Os(e){this.manager=e!==void 0?e:Dt}Object.assign(Os.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Hr.get(e);if(a!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){Hr.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),s.addEventListener("error",function(o){r&&r(o),i.manager.itemEnd(e),i.manager.itemError(e)},!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function kx(e){this.manager=e!==void 0?e:Dt}Object.assign(kx.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new nr,a=new Os(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;function o(u){a.load(e[u],function(l){i.images[u]=l,s++,s===6&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)o(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function kc(e){this.manager=e!==void 0?e:Dt}Object.assign(kc.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new Je,a=new Os(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(s){i.image=s;var o=e.search(/\.(jpg|jpeg)$/)>0||e.search(/^data\:image\/jpeg/)===0;i.format=o?xi:zn,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}});function Se(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Se.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n,r=this.getPoint(0),i,a=0;for(t.push(0),i=1;i<=e;i++)n=this.getPoint(i/e),a+=n.distanceTo(r),t.push(a),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n=this.getLengths(),r=0,i=n.length,a;t?a=t:a=e*n[i-1];for(var s=0,o=i-1,c;s<=o;)if(r=Math.floor(s+(o-s)/2),c=n[r]-a,c<0)s=r+1;else if(c>0)o=r-1;else{o=r;break}if(r=o,n[r]===a)return r/(i-1);var u=n[r],l=n[r+1],f=l-u,h=(a-u)/f,d=(r+h)/(i-1);return d},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),a=this.getPoint(r),s=a.clone().sub(i);return s.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n=new M,r=[],i=[],a=[],s=new M,o=new Le,c,u,l;for(c=0;c<=e;c++)u=c/e,r[c]=this.getTangentAt(u),r[c].normalize();i[0]=new M,a[0]=new M;var f=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);for(h<=f&&(f=h,n.set(1,0,0)),d<=f&&(f=d,n.set(0,1,0)),p<=f&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),a[0].crossVectors(r[0],i[0]),c=1;c<=e;c++)i[c]=i[c-1].clone(),a[c]=a[c-1].clone(),s.crossVectors(r[c-1],r[c]),s.length()>Number.EPSILON&&(s.normalize(),l=Math.acos(Ce.clamp(r[c-1].dot(r[c]),-1,1)),i[c].applyMatrix4(o.makeRotationAxis(s,l))),a[c].crossVectors(r[c],i[c]);if(t===!0)for(l=Math.acos(Ce.clamp(i[0].dot(i[e]),-1,1)),l/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(l=-l),c=1;c<=e;c++)i[c].applyMatrix4(o.makeRotationAxis(r[c],l*c)),a[c].crossVectors(r[c],i[c]);return{tangents:r,normals:i,binormals:a}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function Gt(e,t,n,r,i,a,s,o){Se.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}Gt.prototype=Object.create(Se.prototype);Gt.prototype.constructor=Gt;Gt.prototype.isEllipseCurve=!0;Gt.prototype.getPoint=function(e,t){for(var n=t||new se,r=Math.PI*2,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(a?i=0:i=r),this.aClockwise===!0&&!a&&(i===r?i=-r:i=i-r);var s=this.aStartAngle+e*i,o=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),f=o-this.aX,h=c-this.aY;o=f*u-h*l+this.aX,c=f*l+h*u+this.aY}return n.set(o,c)};Gt.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};Gt.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};Gt.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function ji(e,t,n,r,i,a){Gt.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}ji.prototype=Object.create(Gt.prototype);ji.prototype.constructor=ji;ji.prototype.isArcCurve=!0;function Vc(){var e=0,t=0,n=0,r=0;function i(a,s,o,c){e=a,t=o,n=-3*a+3*s-2*o-c,r=2*a-2*s+o+c}return{initCatmullRom:function(a,s,o,c,u){i(s,o,u*(o-a),u*(c-s))},initNonuniformCatmullRom:function(a,s,o,c,u,l,f){var h=(s-a)/u-(o-a)/(u+l)+(o-s)/l,d=(o-s)/l-(c-s)/(l+f)+(c-o)/f;h*=l,d*=l,i(s,o,h,d)},calc:function(a){var s=a*a,o=s*a;return e+t*a+n*s+r*o}}}var pa=new M,Js=new Vc,Ks=new Vc,Qs=new Vc;function It(e,t,n,r){Se.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}It.prototype=Object.create(Se.prototype);It.prototype.constructor=It;It.prototype.isCatmullRomCurve3=!0;It.prototype.getPoint=function(e,t){var n=t||new M,r=this.points,i=r.length,a=(i-(this.closed?0:1))*e,s=Math.floor(a),o=a-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r.length)+1)*r.length:o===0&&s===i-1&&(s=i-2,o=1);var c,u,l,f;if(this.closed||s>0?c=r[(s-1)%i]:(pa.subVectors(r[0],r[1]).add(r[0]),c=pa),u=r[s%i],l=r[(s+1)%i],this.closed||s+2<i?f=r[(s+2)%i]:(pa.subVectors(r[i-1],r[i-2]).add(r[i-1]),f=pa),this.curveType==="centripetal"||this.curveType==="chordal"){var h=this.curveType==="chordal"?.5:.25,d=Math.pow(c.distanceToSquared(u),h),p=Math.pow(u.distanceToSquared(l),h),v=Math.pow(l.distanceToSquared(f),h);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),Js.initNonuniformCatmullRom(c.x,u.x,l.x,f.x,d,p,v),Ks.initNonuniformCatmullRom(c.y,u.y,l.y,f.y,d,p,v),Qs.initNonuniformCatmullRom(c.z,u.z,l.z,f.z,d,p,v)}else this.curveType==="catmullrom"&&(Js.initCatmullRom(c.x,u.x,l.x,f.x,this.tension),Ks.initCatmullRom(c.y,u.y,l.y,f.y,this.tension),Qs.initCatmullRom(c.z,u.z,l.z,f.z,this.tension));return n.set(Js.calc(o),Ks.calc(o),Qs.calc(o)),n};It.prototype.copy=function(e){Se.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};It.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};It.prototype.fromJSON=function(e){Se.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(new M().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function al(e,t,n,r,i){var a=(r-t)*.5,s=(i-n)*.5,o=e*e,c=e*o;return(2*n-2*r+a+s)*c+(-3*n+3*r-2*a-s)*o+a*e+n}function Vx(e,t){var n=1-e;return n*n*t}function Wx(e,t){return 2*(1-e)*e*t}function Xx(e,t){return e*e*t}function ui(e,t,n,r){return Vx(e,t)+Wx(e,n)+Xx(e,r)}function jx(e,t){var n=1-e;return n*n*n*t}function Yx(e,t){var n=1-e;return 3*n*n*e*t}function qx(e,t){return 3*(1-e)*e*e*t}function Zx(e,t){return e*e*e*t}function li(e,t,n,r,i){return jx(e,t)+Yx(e,n)+qx(e,r)+Zx(e,i)}function on(e,t,n,r){Se.call(this),this.type="CubicBezierCurve",this.v0=e||new se,this.v1=t||new se,this.v2=n||new se,this.v3=r||new se}on.prototype=Object.create(Se.prototype);on.prototype.constructor=on;on.prototype.isCubicBezierCurve=!0;on.prototype.getPoint=function(e,t){var n=t||new se,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(li(e,r.x,i.x,a.x,s.x),li(e,r.y,i.y,a.y,s.y)),n};on.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};on.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};on.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function yn(e,t,n,r){Se.call(this),this.type="CubicBezierCurve3",this.v0=e||new M,this.v1=t||new M,this.v2=n||new M,this.v3=r||new M}yn.prototype=Object.create(Se.prototype);yn.prototype.constructor=yn;yn.prototype.isCubicBezierCurve3=!0;yn.prototype.getPoint=function(e,t){var n=t||new M,r=this.v0,i=this.v1,a=this.v2,s=this.v3;return n.set(li(e,r.x,i.x,a.x,s.x),li(e,r.y,i.y,a.y,s.y),li(e,r.z,i.z,a.z,s.z)),n};yn.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};yn.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};yn.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function Ot(e,t){Se.call(this),this.type="LineCurve",this.v1=e||new se,this.v2=t||new se}Ot.prototype=Object.create(Se.prototype);Ot.prototype.constructor=Ot;Ot.prototype.isLineCurve=!0;Ot.prototype.getPoint=function(e,t){var n=t||new se;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Ot.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Ot.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()};Ot.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Ot.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Ot.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function cn(e,t){Se.call(this),this.type="LineCurve3",this.v1=e||new M,this.v2=t||new M}cn.prototype=Object.create(Se.prototype);cn.prototype.constructor=cn;cn.prototype.isLineCurve3=!0;cn.prototype.getPoint=function(e,t){var n=t||new M;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};cn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};cn.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};cn.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};cn.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function un(e,t,n){Se.call(this),this.type="QuadraticBezierCurve",this.v0=e||new se,this.v1=t||new se,this.v2=n||new se}un.prototype=Object.create(Se.prototype);un.prototype.constructor=un;un.prototype.isQuadraticBezierCurve=!0;un.prototype.getPoint=function(e,t){var n=t||new se,r=this.v0,i=this.v1,a=this.v2;return n.set(ui(e,r.x,i.x,a.x),ui(e,r.y,i.y,a.y)),n};un.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};un.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};un.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function xn(e,t,n){Se.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new M,this.v1=t||new M,this.v2=n||new M}xn.prototype=Object.create(Se.prototype);xn.prototype.constructor=xn;xn.prototype.isQuadraticBezierCurve3=!0;xn.prototype.getPoint=function(e,t){var n=t||new M,r=this.v0,i=this.v1,a=this.v2;return n.set(ui(e,r.x,i.x,a.x),ui(e,r.y,i.y,a.y),ui(e,r.z,i.z,a.z)),n};xn.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};xn.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};xn.prototype.fromJSON=function(e){return Se.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function ln(e){Se.call(this),this.type="SplineCurve",this.points=e||[]}ln.prototype=Object.create(Se.prototype);ln.prototype.constructor=ln;ln.prototype.isSplineCurve=!0;ln.prototype.getPoint=function(e,t){var n=t||new se,r=this.points,i=(r.length-1)*e,a=Math.floor(i),s=i-a,o=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],l=r[a>r.length-3?r.length-1:a+2];return n.set(al(s,o.x,c.x,u.x,l.x),al(s,o.y,c.y,u.y,l.y)),n};ln.prototype.copy=function(e){Se.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this};ln.prototype.toJSON=function(){var e=Se.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e};ln.prototype.fromJSON=function(e){Se.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(new se().fromArray(r))}return this};var Jx=Object.freeze({ArcCurve:ji,CatmullRomCurve3:It,CubicBezierCurve:on,CubicBezierCurve3:yn,EllipseCurve:Gt,LineCurve:Ot,LineCurve3:cn,QuadraticBezierCurve:un,QuadraticBezierCurve3:xn,SplineCurve:ln});function In(){Se.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}In.prototype=Object.assign(Object.create(Se.prototype),{constructor:In,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ot(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],s=a.getLength(),o=s===0?0:1-i/s;return a.getPointAt(o)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],n,r=0,i=this.curves;r<i.length;r++)for(var a=i[r],s=a&&a.isEllipseCurve?e*2:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s),c=0;c<o.length;c++){var u=o[c];n&&n.equals(u)||(t.push(u),n=u)}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Se.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Se.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Se.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(new Jx[r.type]().fromJSON(r))}return this}});function tn(e){In.call(this),this.type="Path",this.currentPoint=new se,e&&this.setFromPoints(e)}tn.prototype=Object.assign(Object.create(In.prototype),{constructor:tn,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Ot(this.currentPoint.clone(),new se(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new un(this.currentPoint.clone(),new se(e,t),new se(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var s=new on(this.currentPoint.clone(),new se(e,t),new se(n,r),new se(i,a));this.curves.push(s),this.currentPoint.set(i,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new ln(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,a){var s=this.currentPoint.x,o=this.currentPoint.y;this.absarc(e+s,t+o,n,r,i,a)},absarc:function(e,t,n,r,i,a){this.absellipse(e,t,n,n,r,i,a)},ellipse:function(e,t,n,r,i,a,s,o){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,a,s,o)},absellipse:function(e,t,n,r,i,a,s,o){var c=new Gt(e,t,n,r,i,a,s,o);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return In.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=In.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return In.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function er(e){tn.call(this,e),this.uuid=Ce.generateUUID(),this.type="Shape",this.holes=[]}er.prototype=Object.assign(Object.create(tn.prototype),{constructor:er,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){tn.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=tn.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){tn.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(new tn().fromJSON(r))}return this}});function nt(e,t){ve.call(this),this.type="Light",this.color=new we(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}nt.prototype=Object.assign(Object.create(ve.prototype),{constructor:nt,isLight:!0,copy:function(e){return ve.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ve.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function Go(e,t,n){nt.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ve.DefaultUp),this.updateMatrix(),this.groundColor=new we(t)}Go.prototype=Object.assign(Object.create(nt.prototype),{constructor:Go,isHemisphereLight:!0,copy:function(e){return nt.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Kr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new se(512,512),this.map=null,this.matrix=new Le}Object.assign(Kr.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return this.bias!==0&&(e.bias=this.bias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function Ho(){Kr.call(this,new st(50,1,.5,500))}Ho.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Ho,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=Ce.RAD2DEG*2*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}});function ko(e,t,n,r,i,a){nt.call(this,e,t),this.type="SpotLight",this.position.copy(ve.DefaultUp),this.updateMatrix(),this.target=new ve,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(s){this.intensity=s/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=i!==void 0?i:0,this.decay=a!==void 0?a:1,this.shadow=new Ho}ko.prototype=Object.assign(Object.create(nt.prototype),{constructor:ko,isSpotLight:!0,copy:function(e){return nt.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function Vo(e,t,n,r){nt.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(i){this.intensity=i/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=r!==void 0?r:1,this.shadow=new Kr(new st(90,1,.5,500))}Vo.prototype=Object.assign(Object.create(nt.prototype),{constructor:Vo,isPointLight:!0,copy:function(e){return nt.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function Wo(){Kr.call(this,new wi(-5,5,5,-5,.5,500))}Wo.prototype=Object.assign(Object.create(Kr.prototype),{constructor:Wo});function Xo(e,t){nt.call(this,e,t),this.type="DirectionalLight",this.position.copy(ve.DefaultUp),this.updateMatrix(),this.target=new ve,this.shadow=new Wo}Xo.prototype=Object.assign(Object.create(nt.prototype),{constructor:Xo,isDirectionalLight:!0,copy:function(e){return nt.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function jo(e,t){nt.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}jo.prototype=Object.assign(Object.create(nt.prototype),{constructor:jo,isAmbientLight:!0});function Yo(e,t,n,r){nt.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=n!==void 0?n:10,this.height=r!==void 0?r:10}Yo.prototype=Object.assign(Object.create(nt.prototype),{constructor:Yo,isRectAreaLight:!0,copy:function(e){return nt.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=nt.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});function qo(e,t,n,r){ct.call(this,e,t,n,r)}qo.prototype=Object.assign(Object.create(ct.prototype),{constructor:qo,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Oa,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Zo(e,t,n){ct.call(this,e,t,n)}Zo.prototype=Object.assign(Object.create(ct.prototype),{constructor:Zo,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Oa,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function zt(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(zt.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var s=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){var o=t[1];e<o&&(n=2,i=o);for(var s=n-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(zt.prototype,{beforeStart_:zt.prototype.copySampleValue_,afterEnd_:zt.prototype.copySampleValue_});function Jo(e,t,n,r){zt.call(this,e,t,n,r)}Jo.prototype=Object.assign(Object.create(zt.prototype),{constructor:Jo,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,c=(n-t)/(r-t),u=o+s;o!==u;o+=4)tt.slerpFlat(i,0,a,o-s,a,o,c);return i}});function os(e,t,n,r){ct.call(this,e,t,n,r)}os.prototype=Object.assign(Object.create(ct.prototype),{constructor:os,ValueTypeName:"quaternion",DefaultInterpolation:Ma,InterpolantFactoryMethodLinear:function(e){return new Jo(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function Ko(e,t,n,r){ct.call(this,e,t,n,r)}Ko.prototype=Object.assign(Object.create(ct.prototype),{constructor:Ko,ValueTypeName:"color"});function Yi(e,t,n,r){ct.call(this,e,t,n,r)}Yi.prototype=Object.assign(Object.create(ct.prototype),{constructor:Yi,ValueTypeName:"number"});function Qo(e,t,n,r){zt.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}Qo.prototype=Object.assign(Object.create(zt.prototype),{constructor:Qo,DefaultSettings_:{endingStart:Sr,endingEnd:Sr},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,s=r[i],o=r[a];if(s===void 0)switch(this.getSettings_().endingStart){case vr:i=e,s=2*t-n;break;case Da:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(o===void 0)switch(this.getSettings_().endingEnd){case vr:a=e,o=2*n-t;break;case Da:a=1,o=n+r[1]-r[0];break;default:a=e-1,o=t}var c=(n-t)*.5,u=this.valueSize;this._weightPrev=c/(t-s),this._weightNext=c/(o-n),this._offsetPrev=i*u,this._offsetNext=a*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,c=o-s,u=this._offsetPrev,l=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,g=-f*v+2*f*p-f*d,m=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*d+1,y=(-1-h)*v+(1.5+h)*p+.5*d,_=h*v-h*p,x=0;x!==s;++x)i[x]=g*a[u+x]+m*a[c+x]+y*a[o+x]+_*a[l+x];return i}});function cs(e,t,n,r){zt.call(this,e,t,n,r)}cs.prototype=Object.assign(Object.create(zt.prototype),{constructor:cs,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,c=o-s,u=(n-t)/(r-t),l=1-u,f=0;f!==s;++f)i[f]=a[c+f]*l+a[o+f]*u;return i}});function $o(e,t,n,r){zt.call(this,e,t,n,r)}$o.prototype=Object.assign(Object.create(zt.prototype),{constructor:$o,interpolate_:function(e){return this.copySampleValue_(e-1)}});var xt={arraySlice:function(e,t,n){return xt.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(a,s){return e[a]-e[s]}for(var n=e.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,s=0;s!==r;++a)for(var o=n[a]*t,c=0;c!==t;++c)i[s++]=e[o+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];a!==void 0&&a[r]===void 0;)a=e[i++];if(a!==void 0){var s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(t.push(a.time),n.push.apply(n,s)),a=e[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(t.push(a.time),s.toArray(n,n.length)),a=e[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(t.push(a.time),n.push(s)),a=e[i++];while(a!==void 0)}}};function ct(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xt.convertArray(t,this.TimeBufferType),this.values=xt.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}Object.assign(ct,{parse:function(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=ct._getTrackTypeForValueTypeName(e.type);if(e.times===void 0){var n=[],r=[];xt.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor,n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:xt.convertArray(e.times,Array),values:xt.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yi;case"vector":case"vector2":case"vector3":case"vector4":return qi;case"color":return Ko;case"quaternion":return os;case"bool":case"boolean":return Zo;case"string":return qo}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}});Object.assign(ct.prototype,{constructor:ct,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Ma,InterpolantFactoryMethodDiscrete:function(e){return new $o(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new cs(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Qo(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Oa:t=this.InterpolantFactoryMethodDiscrete;break;case Ma:t=this.InterpolantFactoryMethodLinear;break;case Ys:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);console.warn("THREE.KeyframeTrack:",n);return}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Oa;case this.InterpolantFactoryMethodLinear:return Ma;case this.InterpolantFactoryMethodSmooth:return Ys}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(e!==1)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;a!==-1&&n[a]>t;)--a;if(++a,i!==0||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);var s=this.getValueSize();this.times=xt.arraySlice(n,i,a),this.values=xt.arraySlice(this.values,i*s,a*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,s=0;s!==i;s++){var o=n[s];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(a!==null&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(r!==void 0&&xt.isTypedArray(r))for(var s=0,c=r.length;s!==c;++s){var u=r[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Ys,i=1,a=e.length-1,s=1;s<a;++s){var o=!1,c=e[s],u=e[s+1];if(c!==u&&(s!==1||c!==c[0]))if(r)o=!0;else for(var l=s*n,f=l-n,h=l+n,d=0;d!==n;++d){var p=t[l+d];if(p!==t[f+d]||p!==t[h+d]){o=!0;break}}if(o){if(s!==i){e[i]=e[s];for(var v=s*n,g=i*n,d=0;d!==n;++d)t[g+d]=t[v+d]}++i}}if(a>0){e[i]=e[a];for(var v=a*n,g=i*n,d=0;d!==n;++d)t[g+d]=t[v+d];++i}return i!==e.length&&(this.times=xt.arraySlice(e,0,i),this.values=xt.arraySlice(t,0,i*n)),this}});function qi(e,t,n,r){ct.call(this,e,t,n,r)}qi.prototype=Object.assign(Object.create(ct.prototype),{constructor:qi,ValueTypeName:"vector"});function Wt(e,t,n){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.uuid=Ce.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}Object.assign(Wt,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(ct.parse(n[i]).scale(r));return new Wt(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t},i=0,a=n.length;i!==a;++i)t.push(ct.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],s=0;s<i;s++){var o=[],c=[];o.push((s+i-1)%i,s,(s+1)%i),c.push(0,1,0);var u=xt.getKeyframeOrder(o);o=xt.sortedArray(o,1,u),c=xt.sortedArray(c,1,u),!r&&o[0]===0&&(o.push(i),c.push(c[0])),a.push(new Yi(".morphTargetInfluences["+t[s].name+"]",o,c).scale(1/n))}return new Wt(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],c=o.name.match(i);if(c&&c.length>1){var u=c[1],l=r[u];l||(r[u]=l=[]),l.push(o)}}var f=[];for(var u in r)f.push(Wt.CreateFromMorphTargetSequence(u,r[u],t,n));return f},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(_,x,E,T,S){if(E.length!==0){var C=[],R=[];xt.flattenJSON(E,C,R,T),C.length!==0&&S.push(new _(x,C,R))}},r=[],i=e.name||"default",a=e.length||-1,s=e.fps||30,o=e.hierarchy||[],c=0;c<o.length;c++){var u=o[c].keys;if(!(!u||u.length===0))if(u[0].morphTargets){for(var l={},f=0;f<u.length;f++)if(u[f].morphTargets)for(var h=0;h<u[f].morphTargets.length;h++)l[u[f].morphTargets[h]]=-1;for(var d in l){for(var p=[],v=[],h=0;h!==u[f].morphTargets.length;++h){var g=u[f];p.push(g.time),v.push(g.morphTarget===d?1:0)}r.push(new Yi(".morphTargetInfluence["+d+"]",p,v))}a=l.length*(s||1)}else{var m=".bones["+t[c].name+"]";n(qi,m+".position",u,"pos",r),n(os,m+".quaternion",u,"rot",r),n(qi,m+".scale",u,"scl",r)}}if(r.length===0)return null;var y=new Wt(i,a,r);return y}});Object.assign(Wt.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,n=0,r=e.length;n!==r;++n){var i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});function Wc(e){this.manager=e!==void 0?e:Dt,this.textures={}}Object.assign(Wc.prototype,{load:function(e,t,n,r){var i=this,a=new wn(i.manager);a.load(e,function(s){t(i.parse(JSON.parse(s)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}var r=new zx[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearCoat!==void 0&&(r.clearCoat=e.clearCoat),e.clearCoatRoughness!==void 0&&(r.clearCoatRoughness=e.clearCoatRoughness),e.uniforms!==void 0&&(r.uniforms=e.uniforms),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.vertexColors!==void 0&&(r.vertexColors=e.vertexColors),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.side!==void 0&&(r.side=e.side),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.skinning!==void 0&&(r.skinning=e.skinning),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.dithering!==void 0&&(r.dithering=e.dithering),e.visible!==void 0&&(r.visible=e.visible),e.userData!==void 0&&(r.userData=e.userData),e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalScale!==void 0){var i=e.normalScale;Array.isArray(i)===!1&&(i=[i,i]),r.normalScale=new se().fromArray(i)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),r}});function uh(e){this.manager=e!==void 0?e:Dt}Object.assign(uh.prototype,{load:function(e,t,n,r){var i=this,a=new wn(i.manager);a.load(e,function(s){t(i.parse(JSON.parse(s)))},n,r)},parse:function(e){var t=new ye,n=e.data.index;if(n!==void 0){var r=new sl[n.type](n.array);t.setIndex(new Oe(r,1))}var i=e.data.attributes;for(var a in i){var s=i[a],r=new sl[s.type](s.array);t.addAttribute(a,new Oe(r,s.itemSize,s.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(o!==void 0)for(var c=0,u=o.length;c!==u;++c){var l=o[c];t.addGroup(l.start,l.count,l.materialIndex)}var f=e.data.boundingSphere;if(f!==void 0){var h=new M;f.center!==void 0&&h.fromArray(f.center),t.boundingSphere=new rn(h,f.radius)}return t}});var sl={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Zi(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}Zi.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],a=t[n+1];if(i.test(e))return a}return null}};Object.assign(Zi.prototype,{crossOrigin:void 0,initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:xo,NormalBlending:sa,AdditiveBlending:If,SubtractiveBlending:Of,MultiplyBlending:Df,CustomBlending:Ff},t=new we,n=new kc,r=new Wc;return function(a,s,o){var c={};function u(d,p,v,g,m){var y=s+d,_=Zi.Handlers.get(y),x;_!==null?x=_.load(y):(n.setCrossOrigin(o),x=n.load(y)),p!==void 0&&(x.repeat.fromArray(p),p[0]!==1&&(x.wrapS=Ln),p[1]!==1&&(x.wrapT=Ln)),v!==void 0&&x.offset.fromArray(v),g!==void 0&&(g[0]==="repeat"&&(x.wrapS=Ln),g[0]==="mirror"&&(x.wrapS=Tr),g[1]==="repeat"&&(x.wrapT=Ln),g[1]==="mirror"&&(x.wrapT=Tr)),m!==void 0&&(x.anisotropy=m);var E=Ce.generateUUID();return c[E]=x,E}var l={uuid:Ce.generateUUID(),type:"MeshLambertMaterial"};for(var f in a){var h=a[f];switch(f){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=h;break;case"blending":l.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",f,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(h).getHex();break;case"colorSpecular":l.specular=t.fromArray(h).getHex();break;case"colorEmissive":l.emissive=t.fromArray(h).getHex();break;case"specularCoef":l.shininess=h;break;case"shading":h.toLowerCase()==="basic"&&(l.type="MeshBasicMaterial"),h.toLowerCase()==="phong"&&(l.type="MeshPhongMaterial"),h.toLowerCase()==="standard"&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=u(h,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=u(h,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=u(h,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=u(h,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=u(h,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=u(h,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=u(h,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=u(h,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=u(h,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=u(h,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=tr;break;case"doubleSided":l.side=Yr;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[f]=h;break;case"vertexColors":h===!0&&(l.vertexColors=qr),h==="face"&&(l.vertexColors=Cf);break;default:console.error("THREE.Loader.createMaterial: Unsupported",f,h);break}}return l.type==="MeshBasicMaterial"&&delete l.emissive,l.type!=="MeshPhongMaterial"&&delete l.specular,l.opacity<1&&(l.transparent=!0),r.setTextures(c),r.parse(l)}}()});var lh={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return t},extractUrlBase:function(e){var t=e.split("/");return t.length===1?"./":(t.pop(),t.join("/")+"/")}};function fh(e){typeof e=="boolean"&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=e!==void 0?e:Dt,this.withCredentials=!1}Object.assign(fh.prototype,{load:function(e,t,n,r){var i=this,a=this.texturePath&&typeof this.texturePath=="string"?this.texturePath:lh.extractUrlBase(e),s=new wn(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,function(o){var c=JSON.parse(o),u=c.metadata;if(u!==void 0){var l=u.type;if(l!==void 0){if(l.toLowerCase()==="object"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");return}if(l.toLowerCase()==="scene"){console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.");return}}}var f=i.parse(c,a);t(f.geometry,f.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function e(i,a){function s(_e,k){return _e&1<<k}var o,c,u,l,f,h,d,p,v,g,m,y,_,x,E,T,S,C,R,F,z,q,$,te,L,A,H,B=i.faces,Q=i.vertices,J=i.normals,Z=i.colors,ue=i.scale,de=0;if(i.uvs!==void 0){for(o=0;o<i.uvs.length;o++)i.uvs[o].length&&de++;for(o=0;o<de;o++)a.faceVertexUvs[o]=[]}for(l=0,f=Q.length;l<f;)C=new M,C.x=Q[l++]*ue,C.y=Q[l++]*ue,C.z=Q[l++]*ue,a.vertices.push(C);for(l=0,f=B.length;l<f;)if(g=B[l++],m=s(g,0),y=s(g,1),_=s(g,3),x=s(g,4),E=s(g,5),T=s(g,6),S=s(g,7),m){if(F=new $n,F.a=B[l],F.b=B[l+1],F.c=B[l+3],z=new $n,z.a=B[l+1],z.b=B[l+2],z.c=B[l+3],l+=4,y&&(v=B[l++],F.materialIndex=v,z.materialIndex=v),u=a.faces.length,_)for(o=0;o<de;o++)for(te=i.uvs[o],a.faceVertexUvs[o][u]=[],a.faceVertexUvs[o][u+1]=[],c=0;c<4;c++)p=B[l++],A=te[p*2],H=te[p*2+1],L=new se(A,H),c!==2&&a.faceVertexUvs[o][u].push(L),c!==0&&a.faceVertexUvs[o][u+1].push(L);if(x&&(d=B[l++]*3,F.normal.set(J[d++],J[d++],J[d]),z.normal.copy(F.normal)),E)for(o=0;o<4;o++)d=B[l++]*3,$=new M(J[d++],J[d++],J[d]),o!==2&&F.vertexNormals.push($),o!==0&&z.vertexNormals.push($);if(T&&(h=B[l++],q=Z[h],F.color.setHex(q),z.color.setHex(q)),S)for(o=0;o<4;o++)h=B[l++],q=Z[h],o!==2&&F.vertexColors.push(new we(q)),o!==0&&z.vertexColors.push(new we(q));a.faces.push(F),a.faces.push(z)}else{if(R=new $n,R.a=B[l++],R.b=B[l++],R.c=B[l++],y&&(v=B[l++],R.materialIndex=v),u=a.faces.length,_)for(o=0;o<de;o++)for(te=i.uvs[o],a.faceVertexUvs[o][u]=[],c=0;c<3;c++)p=B[l++],A=te[p*2],H=te[p*2+1],L=new se(A,H),a.faceVertexUvs[o][u].push(L);if(x&&(d=B[l++]*3,R.normal.set(J[d++],J[d++],J[d])),E)for(o=0;o<3;o++)d=B[l++]*3,$=new M(J[d++],J[d++],J[d]),R.vertexNormals.push($);if(T&&(h=B[l++],R.color.setHex(Z[h])),S)for(o=0;o<3;o++)h=B[l++],R.vertexColors.push(new we(Z[h]));a.faces.push(R)}}function t(i,a){var s=i.influencesPerVertex!==void 0?i.influencesPerVertex:2;if(i.skinWeights)for(var o=0,c=i.skinWeights.length;o<c;o+=s){var u=i.skinWeights[o],l=s>1?i.skinWeights[o+1]:0,f=s>2?i.skinWeights[o+2]:0,h=s>3?i.skinWeights[o+3]:0;a.skinWeights.push(new qe(u,l,f,h))}if(i.skinIndices)for(var o=0,c=i.skinIndices.length;o<c;o+=s){var d=i.skinIndices[o],p=s>1?i.skinIndices[o+1]:0,v=s>2?i.skinIndices[o+2]:0,g=s>3?i.skinIndices[o+3]:0;a.skinIndices.push(new qe(d,p,v,g))}a.bones=i.bones,a.bones&&a.bones.length>0&&(a.skinWeights.length!==a.skinIndices.length||a.skinIndices.length!==a.vertices.length)&&console.warn("When skinning, number of vertices ("+a.vertices.length+"), skinIndices ("+a.skinIndices.length+"), and skinWeights ("+a.skinWeights.length+") should match.")}function n(i,a){var s=i.scale;if(i.morphTargets!==void 0)for(var o=0,c=i.morphTargets.length;o<c;o++){a.morphTargets[o]={},a.morphTargets[o].name=i.morphTargets[o].name,a.morphTargets[o].vertices=[];for(var u=a.morphTargets[o].vertices,l=i.morphTargets[o].vertices,f=0,h=l.length;f<h;f+=3){var d=new M;d.x=l[f]*s,d.y=l[f+1]*s,d.z=l[f+2]*s,u.push(d)}}if(i.morphColors!==void 0&&i.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var p=a.faces,v=i.morphColors[0].colors,o=0,c=p.length;o<c;o++)p[o].color.fromArray(v,o*3)}}function r(i,a){var s=[],o=[];i.animation!==void 0&&o.push(i.animation),i.animations!==void 0&&(i.animations.length?o=o.concat(i.animations):o.push(i.animations));for(var c=0;c<o.length;c++){var u=Wt.parseAnimation(o[c],a.bones);u&&s.push(u)}if(a.morphTargets){var l=Wt.CreateClipsFromMorphTargetSequences(a.morphTargets,10);s=s.concat(l)}s.length>0&&(a.animations=s)}return function(i,a){i.data!==void 0&&(i=i.data),i.scale!==void 0?i.scale=1/i.scale:i.scale=1;var s=new Pe;if(e(i,s),t(i,s),n(i,s),r(i,s),s.computeFaceNormals(),s.computeBoundingSphere(),i.materials===void 0||i.materials.length===0)return{geometry:s};var o=Zi.prototype.initMaterials(i.materials,a,this.crossOrigin);return{geometry:s,materials:o}}}()});function Kx(e){this.manager=e!==void 0?e:Dt,this.texturePath=""}Object.assign(Kx.prototype,{load:function(e,t,n,r){this.texturePath===""&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this,a=new wn(i.manager);a.load(e,function(s){var o=null;try{o=JSON.parse(s)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}var c=o.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");return}i.parse(o,t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){t!==void 0&&t(o)}),a=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s);return e.animations&&(o.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(o),o},parseShape:function(e){var t={};if(e!==void 0)for(var n=0,r=e.length;n<r;n++){var i=new er().fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(e!==void 0)for(var r=new fh,i=new uh,a=0,s=e.length;a<s;a++){var o,c=e[a];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Et[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Et[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Et[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Et[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Et[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Et[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Et[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Et[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Et[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Et[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Et[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Et[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],a=0,s=c.shapes.length;a<s;a++){var l=t[c.shapes[a]];u.push(l)}o=new Et[c.type](u,c.curveSegments);break;case"BufferGeometry":o=i.parse(c);break;case"Geometry":o=r.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}o.uuid=c.uuid,c.name!==void 0&&(o.name=c.name),n[c.uuid]=o}return n},parseMaterials:function(e,t){var n={};if(e!==void 0){var r=new Wc;r.setTextures(t);for(var i=0,a=e.length;i<a;i++){var s=e[i];if(s.type==="MultiMaterial"){for(var o=[],c=0;c<s.materials.length;c++)o.push(r.parse(s.materials[c]));n[s.uuid]=o}else n[s.uuid]=r.parse(s)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=Wt.parse(e[n]);t.push(r)}return t},parseImages:function(e,t){var n=this,r={};function i(f){return n.manager.itemStart(f),s.load(f,function(){n.manager.itemEnd(f)},void 0,function(){n.manager.itemEnd(f),n.manager.itemError(f)})}if(e!==void 0&&e.length>0){var a=new ch(t),s=new Os(a);s.setCrossOrigin(this.crossOrigin);for(var o=0,c=e.length;o<c;o++){var u=e[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;r[u.uuid]=i(l)}}return r},parseTextures:function(e,t){function n(c,u){return typeof c=="number"?c:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",c),u[c])}var r={};if(e!==void 0)for(var i=0,a=e.length;i<a;i++){var s=e[i];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),t[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var o=new Je(t[s.image]);o.needsUpdate=!0,o.uuid=s.uuid,s.name!==void 0&&(o.name=s.name),s.mapping!==void 0&&(o.mapping=n(s.mapping,Qx)),s.offset!==void 0&&o.offset.fromArray(s.offset),s.repeat!==void 0&&o.repeat.fromArray(s.repeat),s.center!==void 0&&o.center.fromArray(s.center),s.rotation!==void 0&&(o.rotation=s.rotation),s.wrap!==void 0&&(o.wrapS=n(s.wrap[0],ol),o.wrapT=n(s.wrap[1],ol)),s.minFilter!==void 0&&(o.minFilter=n(s.minFilter,cl)),s.magFilter!==void 0&&(o.magFilter=n(s.magFilter,cl)),s.anisotropy!==void 0&&(o.anisotropy=s.anisotropy),s.flipY!==void 0&&(o.flipY=s.flipY),r[s.uuid]=o}return r},parseObject:function(){var e=new Le;return function(n,r,i){var a;function s(g){return r[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),r[g]}function o(g){if(g!==void 0){if(Array.isArray(g)){for(var m=[],y=0,_=g.length;y<_;y++){var x=g[y];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),i[g]}}switch(n.type){case"Scene":a=new za,n.background!==void 0&&Number.isInteger(n.background)&&(a.background=new we(n.background)),n.fog!==void 0&&(n.fog.type==="Fog"?a.fog=new Si(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(a.fog=new Ti(n.fog.color,n.fog.density)));break;case"PerspectiveCamera":a=new st(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(a.focus=n.focus),n.zoom!==void 0&&(a.zoom=n.zoom),n.filmGauge!==void 0&&(a.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(a.filmOffset=n.filmOffset),n.view!==void 0&&(a.view=Object.assign({},n.view));break;case"OrthographicCamera":a=new wi(n.left,n.right,n.top,n.bottom,n.near,n.far);break;case"AmbientLight":a=new jo(n.color,n.intensity);break;case"DirectionalLight":a=new Xo(n.color,n.intensity);break;case"PointLight":a=new Vo(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":a=new Yo(n.color,n.intensity,n.width,n.height);break;case"SpotLight":a=new ko(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);break;case"HemisphereLight":a=new Go(n.color,n.groundColor,n.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var c=s(n.geometry),u=o(n.material);c.bones&&c.bones.length>0?a=new Do(c,u):a=new Mt(c,u);break;case"LOD":a=new Ga;break;case"Line":a=new Lt(s(n.geometry),o(n.material),n.mode);break;case"LineLoop":a=new Fo(s(n.geometry),o(n.material));break;case"LineSegments":a=new Ke(s(n.geometry),o(n.material));break;case"PointCloud":case"Points":a=new No(s(n.geometry),o(n.material));break;case"Sprite":a=new Io(o(n.material));break;case"Group":a=new Uo;break;default:a=new ve}if(a.uuid=n.uuid,n.name!==void 0&&(a.name=n.name),n.matrix!==void 0?(e.fromArray(n.matrix),e.decompose(a.position,a.quaternion,a.scale)):(n.position!==void 0&&a.position.fromArray(n.position),n.rotation!==void 0&&a.rotation.fromArray(n.rotation),n.quaternion!==void 0&&a.quaternion.fromArray(n.quaternion),n.scale!==void 0&&a.scale.fromArray(n.scale)),n.castShadow!==void 0&&(a.castShadow=n.castShadow),n.receiveShadow!==void 0&&(a.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.bias!==void 0&&(a.shadow.bias=n.shadow.bias),n.shadow.radius!==void 0&&(a.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(a.visible=n.visible),n.userData!==void 0&&(a.userData=n.userData),n.children!==void 0)for(var l=n.children,f=0;f<l.length;f++)a.add(this.parseObject(l[f],r,i));if(n.type==="LOD")for(var h=n.levels,d=0;d<h.length;d++){var p=h[d],v=a.getObjectByProperty("uuid",p.object);v!==void 0&&a.addLevel(v,p.distance)}return a}}()});var Qx={UVMapping:Lc,CubeReflectionMapping:Cc,CubeRefractionMapping:bo,EquirectangularReflectionMapping:Gf,EquirectangularRefractionMapping:wo,SphericalReflectionMapping:Hf,CubeUVReflectionMapping:Ic,CubeUVRefractionMapping:Oc},ol={RepeatWrapping:Ln,ClampToEdgeWrapping:Nt,MirroredRepeatWrapping:Tr},cl={NearestFilter:Ut,NearestMipMapNearestFilter:Dc,NearestMipMapLinearFilter:Fc,LinearFilter:St,LinearMipMapNearestFilter:kf,LinearMipMapLinearFilter:Is};function ul(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=e!==void 0?e:Dt,this.options=void 0}ul.prototype={constructor:ul,setOptions:function(t){return this.options=t,this},load:function(t,n,r,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t);var a=this,s=Hr.get(t);if(s!==void 0)return a.manager.itemStart(t),setTimeout(function(){n&&n(s),a.manager.itemEnd(t)},0),s;fetch(t).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,a.options)}).then(function(o){Hr.add(t,o),n&&n(o),a.manager.itemEnd(t)}).catch(function(o){i&&i(o),a.manager.itemEnd(t),a.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}};function hh(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}Object.assign(hh.prototype,{moveTo:function(e,t){this.currentPath=new tn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,a){this.currentPath.bezierCurveTo(e,t,n,r,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(L){for(var A=[],H=0,B=L.length;H<B;H++){var Q=L[H],J=new er;J.curves=Q.curves,A.push(J)}return A}function r(L,A){for(var H=A.length,B=!1,Q=H-1,J=0;J<H;Q=J++){var Z=A[Q],ue=A[J],de=ue.x-Z.x,_e=ue.y-Z.y;if(Math.abs(_e)>Number.EPSILON){if(_e<0&&(Z=A[J],de=-de,ue=A[Q],_e=-_e),L.y<Z.y||L.y>ue.y)continue;if(L.y===Z.y){if(L.x===Z.x)return!0}else{var k=_e*(L.x-Z.x)-de*(L.y-Z.y);if(k===0)return!0;if(k<0)continue;B=!B}}else{if(L.y!==Z.y)continue;if(ue.x<=L.x&&L.x<=Z.x||Z.x<=L.x&&L.x<=ue.x)return!0}}return B}var i=Nn.isClockWise,a=this.subPaths;if(a.length===0)return[];if(t===!0)return n(a);var s,o,c,u=[];if(a.length===1)return o=a[0],c=new er,c.curves=o.curves,u.push(c),u;var l=!i(a[0].getPoints());l=e?!l:l;var f=[],h=[],d=[],p=0,v;h[p]=void 0,d[p]=[];for(var g=0,m=a.length;g<m;g++)o=a[g],v=o.getPoints(),s=i(v),s=e?!s:s,s?(!l&&h[p]&&p++,h[p]={s:new er,p:v},h[p].s.curves=o.curves,l&&p++,d[p]=[]):d[p].push({h:o,p:v[0]});if(!h[0])return n(a);if(h.length>1){for(var y=!1,_=[],x=0,E=h.length;x<E;x++)f[x]=[];for(var x=0,E=h.length;x<E;x++)for(var T=d[x],S=0;S<T.length;S++){for(var C=T[S],R=!0,F=0;F<h.length;F++)r(C.p,h[F].p)&&(x!==F&&_.push({froms:x,tos:F,hole:S}),R?(R=!1,f[F].push(C)):y=!0);R&&f[x].push(C)}_.length>0&&(y||(d=f))}for(var z,g=0,q=h.length;g<q;g++){c=h[g].s,u.push(c),z=d[g];for(var $=0,te=z.length;$<te;$++)c.holes.push(z[$].h)}return u}});function dh(e){this.type="Font",this.data=e}Object.assign(dh.prototype,{isFont:!0,generateShapes:function(e,t,n){function r(l){for(var f=String(l).split(""),h=t/a.resolution,d=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*h,p=0,v=0,g=[],m=0;m<f.length;m++){var y=f[m];if(y===`
`)p=0,v-=d;else{var _=i(y,h,p,v);p+=_.offsetX,g.push(_.path)}}return g}function i(l,f,h,d){var p=a.glyphs[l]||a.glyphs["?"];if(!!p){var v=new hh,g=[],m,y,_,x,E,T,S,C,R;if(p.o)for(var F=p._cachedOutline||(p._cachedOutline=p.o.split(" ")),z=0,q=F.length;z<q;){var $=F[z++];switch($){case"m":m=F[z++]*f+h,y=F[z++]*f+d,v.moveTo(m,y);break;case"l":m=F[z++]*f+h,y=F[z++]*f+d,v.lineTo(m,y);break;case"q":_=F[z++]*f+h,x=F[z++]*f+d,E=F[z++]*f+h,T=F[z++]*f+d,v.quadraticCurveTo(E,T,_,x),R=g[g.length-1],R&&(R.x,R.y);break;case"b":_=F[z++]*f+h,x=F[z++]*f+d,E=F[z++]*f+h,T=F[z++]*f+d,S=F[z++]*f+h,C=F[z++]*f+d,v.bezierCurveTo(E,T,S,C,_,x),R=g[g.length-1],R&&(R.x,R.y);break}}return{offsetX:p.ha*f,path:v}}}t===void 0&&(t=100);for(var a=this.data,s=r(e),o=[],c=0,u=s.length;c<u;c++)Array.prototype.push.apply(o,s[c].toShapes());return o}});function $x(e){this.manager=e!==void 0?e:Dt}Object.assign($x.prototype,{load:function(e,t,n,r){var i=this,a=new wn(this.manager);a.setPath(this.path),a.load(e,function(s){var o;try{o=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),o=JSON.parse(s.substring(65,s.length-2))}var c=i.parse(o);t&&t(c)},n,r)},parse:function(e){return new dh(e)},setPath:function(e){return this.path=e,this}});var va,ph={getContext:function(){return va===void 0&&(va=new(window.AudioContext||window.webkitAudioContext)),va},setContext:function(e){va=e}};function vh(e){this.manager=e!==void 0?e:Dt}Object.assign(vh.prototype,{load:function(e,t,n,r){var i=new wn(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(a){var s=ph.getContext();s.decodeAudioData(a,function(o){t(o)})},n,r)}});function e_(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new st,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new st,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(e_.prototype,{update:function(){var e,t,n,r,i,a,s,o,c=new Le,u=new Le;return function(f){var h=e!==this||t!==f.focus||n!==f.fov||r!==f.aspect*this.aspect||i!==f.near||a!==f.far||s!==f.zoom||o!==this.eyeSep;if(h){e=this,t=f.focus,n=f.fov,r=f.aspect*this.aspect,i=f.near,a=f.far,s=f.zoom;var d=f.projectionMatrix.clone();o=this.eyeSep/2;var p=o*i/t,v=i*Math.tan(Ce.DEG2RAD*n*.5)/s,g,m;u.elements[12]=-o,c.elements[12]=o,g=-v*r+p,m=v*r+p,d.elements[0]=2*i/(m-g),d.elements[8]=(m+g)/(m-g),this.cameraL.projectionMatrix.copy(d),g=-v*r-p,m=v*r-p,d.elements[0]=2*i/(m-g),d.elements[8]=(m+g)/(m-g),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(f.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(f.matrixWorld).multiply(c)}}()});function us(e,t,n){ve.call(this),this.type="CubeCamera";var r=90,i=1,a=new st(r,i,e,t);a.up.set(0,-1,0),a.lookAt(new M(1,0,0)),this.add(a);var s=new st(r,i,e,t);s.up.set(0,-1,0),s.lookAt(new M(-1,0,0)),this.add(s);var o=new st(r,i,e,t);o.up.set(0,0,1),o.lookAt(new M(0,1,0)),this.add(o);var c=new st(r,i,e,t);c.up.set(0,0,-1),c.lookAt(new M(0,-1,0)),this.add(c);var u=new st(r,i,e,t);u.up.set(0,-1,0),u.lookAt(new M(0,0,1)),this.add(u);var l=new st(r,i,e,t);l.up.set(0,-1,0),l.lookAt(new M(0,0,-1)),this.add(l);var f={format:xi,magFilter:St,minFilter:St};this.renderTarget=new bi(n,n,f),this.renderTarget.texture.name="CubeCamera",this.update=function(h,d){this.parent===null&&this.updateMatrixWorld();var p=this.renderTarget,v=p.texture.generateMipmaps;p.texture.generateMipmaps=!1,p.activeCubeFace=0,h.render(d,a,p),p.activeCubeFace=1,h.render(d,s,p),p.activeCubeFace=2,h.render(d,o,p),p.activeCubeFace=3,h.render(d,c,p),p.activeCubeFace=4,h.render(d,u,p),p.texture.generateMipmaps=v,p.activeCubeFace=5,h.render(d,l,p),h.setRenderTarget(null)},this.clear=function(h,d,p,v){for(var g=this.renderTarget,m=0;m<6;m++)g.activeCubeFace=m,h.setRenderTarget(g),h.clear(d,p,v);h.setRenderTarget(null)}}us.prototype=Object.create(ve.prototype);us.prototype.constructor=us;function ll(){ve.call(this),this.type="AudioListener",this.context=ph.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}ll.prototype=Object.assign(Object.create(ve.prototype),{constructor:ll,getInput:function(){return this.gain},removeFilter:function(){this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new M,t=new tt,n=new M,r=new M;return function(a){ve.prototype.updateMatrixWorld.call(this,a);var s=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),s.positionX?(s.positionX.setValueAtTime(e.x,this.context.currentTime),s.positionY.setValueAtTime(e.y,this.context.currentTime),s.positionZ.setValueAtTime(e.z,this.context.currentTime),s.forwardX.setValueAtTime(r.x,this.context.currentTime),s.forwardY.setValueAtTime(r.y,this.context.currentTime),s.forwardZ.setValueAtTime(r.z,this.context.currentTime),s.upX.setValueAtTime(o.x,this.context.currentTime),s.upY.setValueAtTime(o.y,this.context.currentTime),s.upZ.setValueAtTime(o.z,this.context.currentTime)):(s.setPosition(e.x,e.y,e.z),s.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z))}}()});function Ji(e){ve.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}Ji.prototype=Object.assign(Object.create(ve.prototype),{constructor:Ji,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.source.stop(),this.offset=0,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}});function fl(e){Ji.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}fl.prototype=Object.assign(Object.create(Ji.prototype),{constructor:fl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new M;return function(n){ve.prototype.updateMatrixWorld.call(this,n),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()});function mh(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(mh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}});function gh(e,t,n){this.binding=e,this.valueSize=n;var r=Float64Array,i;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(n*4),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(gh.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(a===0){for(var s=0;s!==r;++s)n[i+s]=n[s];a=t}else{a+=t;var o=t/a;this._mixBufferRegion(n,i,0,o,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var s=t*3;this._mixBufferRegion(n,r,s,1-i,t)}for(var o=t,c=t+t;o!==c;++o)if(n[o]!==n[o+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*3;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){tt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,s=0;s!==i;++s){var o=t+s;e[o]=e[o]*a+e[n+s]*r}}});function yh(e,t,n){var r=n||_t.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}Object.assign(yh.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function _t(e,t,n){this.path=t,this.parsedPath=n||_t.parseTrackName(t),this.node=_t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(_t,{Composite:yh,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new _t.Composite(e,t,n):new _t(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,n=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,r=/\.([\w-]+)(?:\[(.+)\])?/,i=new RegExp("^"+e.source+t.source+n.source+r.source+"$"),a=["material","materials","bones"];return function(s){var o=i.exec(s);if(!o)throw new Error("PropertyBinding: Cannot parse trackName: "+s);var c={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},u=c.nodeName&&c.nodeName.lastIndexOf(".");if(u!==void 0&&u!==-1){var l=c.nodeName.substring(u+1);a.indexOf(l)!==-1&&(c.nodeName=c.nodeName.substring(0,u),c.objectName=l)}if(c.propertyName===null||c.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+s);return c}}(),findNode:function(e,t){if(!t||t===""||t==="root"||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(s){for(var o=0;o<s.bones.length;o++){var c=s.bones[o];if(c.name===t)return c}return null},r=n(e.skeleton);if(r)return r}if(e.children){var i=function(s){for(var o=0;o<s.length;o++){var c=s[o];if(c.name===t||c.uuid===t)return c;var u=i(c.children);if(u)return u}return null},a=i(e.children);if(a)return a}return null}});Object.assign(_t.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)t[n++]=r[i]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++]},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){for(var r=this.resolvedProperty,i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=_t.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(a!==void 0){if(e[a]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[a]}}var o=e[r];if(o===void 0){var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}var u=this.Versioning.None;e.needsUpdate!==void 0?(u=this.Versioning.NeedsUpdate,this.targetObject=e):e.matrixWorldNeedsUpdate!==void 0&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===i){i=s;break}}else{if(!e.geometry.morphTargets){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);return}for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===i){i=s;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(_t.prototype,{_getValue_unbound:_t.prototype.getValue,_setValue_unbound:_t.prototype.setValue});function t_(){this.uuid=Ce.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}Object.assign(t_.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length,c=0,u=arguments.length;c!==u;++c){var l=arguments[c],f=l.uuid,h=r[f],d=void 0;if(h===void 0){h=t++,r[f]=h,e.push(l);for(var p=0,v=o;p!==v;++p)s[p].push(new _t(l,i[p],a[p]))}else if(h<n){d=e[h];var g=--n,m=e[g];r[m.uuid]=h,e[h]=m,r[f]=g,e[g]=l;for(var p=0,v=o;p!==v;++p){var y=s[p],_=y[g],x=y[h];y[h]=_,x===void 0&&(x=new _t(l,i[p],a[p])),y[g]=x}}else e[h]!==d&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],c=o.uuid,u=n[c];if(u!==void 0&&u>=t){var l=t++,f=e[l];n[f.uuid]=u,e[u]=f,n[c]=l,e[l]=o;for(var h=0,d=i;h!==d;++h){var p=r[h],v=p[l],g=p[u];p[u]=v,p[l]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,s=0,o=arguments.length;s!==o;++s){var c=arguments[s],u=c.uuid,l=r[u];if(l!==void 0)if(delete r[u],l<n){var f=--n,h=e[f],d=--t,p=e[d];r[h.uuid]=l,e[l]=h,r[p.uuid]=f,e[f]=p,e.pop();for(var v=0,g=a;v!==g;++v){var m=i[v],y=m[f],_=m[d];m[l]=y,m[f]=_,m.pop()}}else{var d=--t,p=e[d];r[p.uuid]=l,e[l]=p,e.pop();for(var v=0,g=a;v!==g;++v){var m=i[v];m[l]=m[d],m.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(r!==void 0)return i[r];var a=this._paths,s=this._parsedPaths,o=this._objects,c=o.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,a.push(e),s.push(t),i.push(l);for(var f=u,h=o.length;f!==h;++f){var d=o[f];l[f]=new _t(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){var r=this._paths,i=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s],c=e[s];t[c]=n,a[n]=o,a.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}});function xh(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),s={endingStart:Sr,endingEnd:Sr},o=0;o!==i;++o){var c=r[o].createInterpolant(null);a[o]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ng,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(xh.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,s=r/i;e.warp(1,a,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,s=this.timeScale;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var o=a.parameterPositions,c=a.sampleValues;return o[0]=i,o[1]=i+n,c[0]=e/s,c[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}var i=this._startTime;if(i!==null){var a=(e-i)*n;if(a<0||n===0)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var s=this._updateTime(t),o=this._updateWeight(e);if(o>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,f=c.length;l!==f;++l)c[l].evaluate(s),u[l].accumulate(r,o)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(n!==null){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(e===0)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===tg){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else if(t<0)t=0;else break e;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=r===rg;if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),t>=n||t<0){var s=Math.floor(t/n);t-=n*s,i+=Math.abs(s);var o=this.repetitions-i;if(o<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===0){var c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&(i&1)===1)return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=vr,r.endingEnd=vr):(e?r.endingStart=this.zeroSlopeAtStart?vr:Sr:r.endingStart=Da,t?r.endingEnd=this.zeroSlopeAtEnd?vr:Sr:r.endingEnd=Da)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var s=a.parameterPositions,o=a.sampleValues;return s[0]=i,o[0]=t,s[1]=i+e,o[1]=n,this}});function hl(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}hl.prototype=Object.assign(Object.create(bn.prototype),{constructor:hl,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,c=this._bindingsByRootAndName,u=c[o];u===void 0&&(u={},c[o]=u);for(var l=0;l!==i;++l){var f=r[l],h=f.name,d=u[h];if(d!==void 0)a[l]=d;else{if(d=a[l],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,o,h));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;d=new gh(_t.create(n,h,p),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,o,h),a[l]=d}s[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,s=i.length;a!==s;++a){var o=i[a];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,s=a[i],o=s.knownActions,c=o[o.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,o[u]=c,o.pop(),e._byClipCacheIndex=null;var l=s.actionByRoot,f=(e._localRoot||this._root).uuid;delete l[f],o.length===0&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],a=this._bindings;i===void 0&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],c=e._cacheIndex;o._cacheIndex=c,t[c]=o,t.pop(),delete s[i];e:{for(var u in s)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return n===void 0&&(n=new cs(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?Wt.findByName(n,e):e,a=i!==null?i.uuid:e,s=this._actionsByClip[a],o=null;if(s!==void 0){var c=s.actionByRoot[r];if(c!==void 0)return c;o=s.knownActions[0],i===null&&(i=o._clip)}if(i===null)return null;var u=new xh(this,i,t);return this._bindAction(u,o),this._addInactiveAction(u,a,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i=typeof e=="string"?Wt.findByName(n,e):e,a=i?i.uuid:e,s=this._actionsByClip[a];return s!==void 0&&s.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,s=0;s!==n;++s){var o=t[s];o._update(r,e,i,a)}for(var c=this._bindings,u=this._nActiveBindings,s=0;s!==u;++s)c[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){for(var a=i.knownActions,s=0,o=a.length;s!==o;++s){var c=a[s];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,a=i[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}var s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(var c in o){var u=o[c];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function ec(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}ec.prototype.clone=function(){return new ec(this.value.clone===void 0?this.value:this.value.clone())};function dl(){ye.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}dl.prototype=Object.assign(Object.create(ye.prototype),{constructor:dl,isInstancedBufferGeometry:!0,copy:function(e){return ye.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}});function _h(e,t,n,r){this.uuid=Ce.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}Object.defineProperties(_h.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(_h.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}});function Ki(e,t){this.uuid=Ce.generateUUID(),this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}Object.defineProperty(Ki.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Ki.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=e!==void 0?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});function pl(e,t,n){Ki.call(this,e,t),this.meshPerAttribute=n||1}pl.prototype=Object.assign(Object.create(Ki.prototype),{constructor:pl,isInstancedInterleavedBuffer:!0,copy:function(e){return Ki.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function vl(e,t,n){Oe.call(this,e,t),this.meshPerAttribute=n||1}vl.prototype=Object.assign(Object.create(Oe.prototype),{constructor:vl,isInstancedBufferAttribute:!0,copy:function(e){return Oe.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}});function n_(e,t,n,r){this.ray=new Jr(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ml(e,t){return e.distance-t.distance}function tc(e,t,n,r){if(e.visible!==!1&&(e.raycast(t,n),r===!0))for(var i=e.children,a=0,s=i.length;a<s;a++)tc(i[a],t,n,!0)}Object.assign(n_.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return tc(e,this,n,t),n.sort(ml),n},intersectObjects:function(e,t){var n=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=e.length;r<i;r++)tc(e[r],this,n,t);return n.sort(ml),n}});function r_(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(r_.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});function ls(e,t,n){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=n!==void 0?n:0,this}Object.assign(ls.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Ce.clamp(e.y/this.radius,-1,1))),this}});function i_(e,t,n){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=n!==void 0?n:0,this}Object.assign(i_.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}});function fs(e){ve.call(this),this.material=e,this.render=function(){}}fs.prototype=Object.create(ve.prototype);fs.prototype.constructor=fs;fs.prototype.isImmediateRenderObject=!0;function hs(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var i=n!==void 0?n:16711680,a=r!==void 0?r:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=o.faces.length*3:o&&o.isBufferGeometry&&(s=o.attributes.normal.count);var c=new ye,u=new pe(s*2*3,3);c.addAttribute("position",u),Ke.call(this,c,new Ze({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}hs.prototype=Object.create(Ke.prototype);hs.prototype.constructor=hs;hs.prototype.update=function(){var e=new M,t=new M,n=new Rt;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld,s=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var c=o.vertices,u=o.faces,l=0,f=0,h=u.length;f<h;f++)for(var d=u[f],p=0,v=d.vertexNormals.length;p<v;p++){var g=c[d[i[p]]],m=d.vertexNormals[p];e.copy(g).applyMatrix4(a),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),s.setXYZ(l,e.x,e.y,e.z),l=l+1,s.setXYZ(l,t.x,t.y,t.z),l=l+1}else if(o&&o.isBufferGeometry)for(var y=o.attributes.position,_=o.attributes.normal,l=0,p=0,v=y.count;p<v;p++)e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(a),t.set(_.getX(p),_.getY(p),_.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),s.setXYZ(l,e.x,e.y,e.z),l=l+1,s.setXYZ(l,t.x,t.y,t.z),l=l+1;s.needsUpdate=!0}}();function Qi(e,t){ve.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ye,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1,s=32;i<s;i++,a++){var o=i/s*Math.PI*2,c=a/s*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(c),Math.sin(c),1)}n.addAttribute("position",new pe(r,3));var u=new Ze({fog:!1});this.cone=new Ke(n,u),this.add(this.cone),this.update()}Qi.prototype=Object.create(ve.prototype);Qi.prototype.constructor=Qi;Qi.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};Qi.prototype.update=function(){var e=new M,t=new M;return function(){this.light.updateMatrixWorld();var r=this.light.distance?this.light.distance:1e3,i=r*Math.tan(this.light.angle);this.cone.scale.set(i,i,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}();function bh(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,bh(e.children[n]));return t}function $i(e){for(var t=bh(e),n=new ye,r=[],i=[],a=new we(0,0,1),s=new we(0,1,0),o=0;o<t.length;o++){var c=t[o];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(s.r,s.g,s.b))}n.addAttribute("position",new pe(r,3)),n.addAttribute("color",new pe(i,3));var u=new Ze({vertexColors:qr,depthTest:!1,depthWrite:!1,transparent:!0});Ke.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}$i.prototype=Object.create(Ke.prototype);$i.prototype.constructor=$i;$i.prototype.updateMatrixWorld=function(){var e=new M,t=new Le,n=new Le;return function(i){var a=this.bones,s=this.geometry,o=s.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var c=0,u=0;c<a.length;c++){var l=a[c];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(u+1,e.x,e.y,e.z),u+=2)}s.getAttribute("position").needsUpdate=!0,ve.prototype.updateMatrixWorld.call(this,i)}}();function ea(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Ir(t,4,2),i=new Pt({wireframe:!0,fog:!1});Mt.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}ea.prototype=Object.create(Mt.prototype);ea.prototype.constructor=ea;ea.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};ea.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};function ta(e,t){ve.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new Ze({fog:!1}),r=new ye;r.addAttribute("position",new Oe(new Float32Array(5*3),3)),this.line=new Lt(r,n),this.add(this.line),this.update()}ta.prototype=Object.create(ve.prototype);ta.prototype.constructor=ta;ta.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};ta.prototype.update=function(){var e=this.light.width*.5,t=this.light.height*.5,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,this.color!==void 0?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)};function na(e,t,n){ve.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Cr(t);r.rotateY(Math.PI*.5),this.material=new Pt({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=qr);var i=r.getAttribute("position"),a=new Float32Array(i.count*3);r.addAttribute("color",new Oe(a,3)),this.add(new Mt(r,this.material)),this.update()}na.prototype=Object.create(ve.prototype);na.prototype.constructor=na;na.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};na.prototype.update=function(){var e=new M,t=new we,n=new we;return function(){var i=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var a=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var s=0,o=a.count;s<o;s++){var c=s<o/2?t:n;a.setXYZ(s,c.r,c.g,c.b)}a.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}();function ds(e,t,n,r){e=e||10,t=t||10,n=new we(n!==void 0?n:4473924),r=new we(r!==void 0?r:8947848);for(var i=t/2,a=e/t,s=e/2,o=[],c=[],u=0,l=0,f=-s;u<=t;u++,f+=a){o.push(-s,0,f,s,0,f),o.push(f,0,-s,f,0,s);var h=u===i?n:r;h.toArray(c,l),l+=3,h.toArray(c,l),l+=3,h.toArray(c,l),l+=3,h.toArray(c,l),l+=3}var d=new ye;d.addAttribute("position",new pe(o,3)),d.addAttribute("color",new pe(c,3));var p=new Ze({vertexColors:qr});Ke.call(this,d,p)}ds.prototype=Object.create(Ke.prototype);ds.prototype.constructor=ds;function nc(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new we(i!==void 0?i:4473924),a=new we(a!==void 0?a:8947848);var s=[],o=[],c,u,l,f,h,d,p;for(f=0;f<=t;f++)l=f/t*(Math.PI*2),c=Math.sin(l)*e,u=Math.cos(l)*e,s.push(0,0,0),s.push(c,0,u),p=f&1?i:a,o.push(p.r,p.g,p.b),o.push(p.r,p.g,p.b);for(f=0;f<=n;f++)for(p=f&1?i:a,d=e-e/n*f,h=0;h<r;h++)l=h/r*(Math.PI*2),c=Math.sin(l)*d,u=Math.cos(l)*d,s.push(c,0,u),o.push(p.r,p.g,p.b),l=(h+1)/r*(Math.PI*2),c=Math.sin(l)*d,u=Math.cos(l)*d,s.push(c,0,u),o.push(p.r,p.g,p.b);var v=new ye;v.addAttribute("position",new pe(s,3)),v.addAttribute("color",new pe(o,3));var g=new Ze({vertexColors:qr});Ke.call(this,v,g)}nc.prototype=Object.create(Ke.prototype);nc.prototype.constructor=nc;function ps(e,t,n,r){this.object=e,this.size=t!==void 0?t:1;var i=n!==void 0?n:16776960,a=r!==void 0?r:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new ye,u=new pe(s*2*3,3);c.addAttribute("position",u),Ke.call(this,c,new Ze({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}ps.prototype=Object.create(Ke.prototype);ps.prototype.constructor=ps;ps.prototype.update=function(){var e=new M,t=new M,n=new Rt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry,o=s.vertices,c=s.faces,u=0,l=0,f=c.length;l<f;l++){var h=c[l],d=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u=u+1,a.setXYZ(u,t.x,t.y,t.z),u=u+1}a.needsUpdate=!0}}();function ra(e,t,n){ve.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);var r=new ye;r.addAttribute("position",new pe([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new Ze({fog:!1});this.lightPlane=new Lt(r,i),this.add(this.lightPlane),r=new ye,r.addAttribute("position",new pe([0,0,0,0,0,1],3)),this.targetLine=new Lt(r,i),this.add(this.targetLine),this.update()}ra.prototype=Object.create(ve.prototype);ra.prototype.constructor=ra;ra.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};ra.prototype.update=function(){var e=new M,t=new M,n=new M;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}();function vs(e){var t=new ye,n=new Ze({color:16777215,vertexColors:Cf}),r=[],i=[],a={},s=new we(16755200),o=new we(16711680),c=new we(43775),u=new we(16777215),l=new we(3355443);f("n1","n2",s),f("n2","n4",s),f("n4","n3",s),f("n3","n1",s),f("f1","f2",s),f("f2","f4",s),f("f4","f3",s),f("f3","f1",s),f("n1","f1",s),f("n2","f2",s),f("n3","f3",s),f("n4","f4",s),f("p","n1",o),f("p","n2",o),f("p","n3",o),f("p","n4",o),f("u1","u2",c),f("u2","u3",c),f("u3","u1",c),f("c","t",u),f("p","c",l),f("cn1","cn2",l),f("cn3","cn4",l),f("cf1","cf2",l),f("cf3","cf4",l);function f(d,p,v){h(d,v),h(p,v)}function h(d,p){r.push(0,0,0),i.push(p.r,p.g,p.b),a[d]===void 0&&(a[d]=[]),a[d].push(r.length/3-1)}t.addAttribute("position",new pe(r,3)),t.addAttribute("color",new pe(i,3)),Ke.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}vs.prototype=Object.create(Ke.prototype);vs.prototype.constructor=vs;vs.prototype.update=function(){var e,t,n=new M,r=new mn;function i(a,s,o,c){n.set(s,o,c).unproject(r);var u=t[a];if(u!==void 0)for(var l=e.getAttribute("position"),f=0,h=u.length;f<h;f++)l.setXYZ(u[f],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;var s=1,o=1;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-s,-o,-1),i("n2",s,-o,-1),i("n3",-s,o,-1),i("n4",s,o,-1),i("f1",-s,-o,1),i("f2",s,-o,1),i("f3",-s,o,1),i("f4",s,o,1),i("u1",s*.7,o*1.1,-1),i("u2",-s*.7,o*1.1,-1),i("u3",0,o*2,-1),i("cf1",-s,0,1),i("cf2",s,0,1),i("cf3",0,-o,1),i("cf4",0,o,1),i("cn1",-s,0,-1),i("cn2",s,0,-1),i("cn3",0,-o,-1),i("cn4",0,o,-1),e.getAttribute("position").needsUpdate=!0}}();function ia(e,t){this.object=e,t===void 0&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),i=new ye;i.setIndex(new Oe(n,1)),i.addAttribute("position",new Oe(r,3)),Ke.call(this,i,new Ze({color:t})),this.matrixAutoUpdate=!1,this.update()}ia.prototype=Object.create(Ke.prototype);ia.prototype.constructor=ia;ia.prototype.update=function(){var e=new Gn;return function(n){if(n!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&e.setFromObject(this.object),!e.isEmpty()){var r=e.min,i=e.max,a=this.geometry.attributes.position,s=a.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=r.x,s[4]=i.y,s[5]=i.z,s[6]=r.x,s[7]=r.y,s[8]=i.z,s[9]=i.x,s[10]=r.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=r.z,s[15]=r.x,s[16]=i.y,s[17]=r.z,s[18]=r.x,s[19]=r.y,s[20]=r.z,s[21]=i.x,s[22]=r.y,s[23]=r.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();ia.prototype.setFromObject=function(e){return this.object=e,this.update(),this};function ms(e,t){this.type="Box3Helper",this.box=e;var n=t!==void 0?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new ye;a.setIndex(new Oe(r,1)),a.addAttribute("position",new pe(i,3)),Ke.call(this,a,new Ze({color:n})),this.geometry.computeBoundingSphere()}ms.prototype=Object.create(Ke.prototype);ms.prototype.constructor=ms;ms.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ve.prototype.updateMatrixWorld.call(this,e))};function gs(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=t===void 0?1:t;var r=n!==void 0?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],a=new ye;a.addAttribute("position",new pe(i,3)),a.computeBoundingSphere(),Lt.call(this,a,new Ze({color:r}));var s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],o=new ye;o.addAttribute("position",new pe(s,3)),o.computeBoundingSphere(),this.add(new Mt(o,new Pt({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}gs.prototype=Object.create(Lt.prototype);gs.prototype.constructor=gs;gs.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),ve.prototype.updateMatrixWorld.call(this,e)};var ma,$s;function kr(e,t,n,r,i,a){ve.call(this),r===void 0&&(r=16776960),n===void 0&&(n=1),i===void 0&&(i=.2*n),a===void 0&&(a=.2*i),ma===void 0&&(ma=new ye,ma.addAttribute("position",new pe([0,0,0,0,1,0],3)),$s=new Hn(0,.5,1,5,1),$s.translate(0,-.5,0)),this.position.copy(t),this.line=new Lt(ma,new Ze({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mt($s,new Pt({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}kr.prototype=Object.create(ve.prototype);kr.prototype.constructor=kr;kr.prototype.setDirection=function(){var e=new M,t;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}();kr.prototype.setLength=function(e,t,n){t===void 0&&(t=.2*e),n===void 0&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()};kr.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)};function rc(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new ye;r.addAttribute("position",new pe(t,3)),r.addAttribute("color",new pe(n,3));var i=new Ze({vertexColors:qr});Ke.call(this,r,i)}rc.prototype=Object.create(Ke.prototype);rc.prototype.constructor=rc;Se.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Se.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(In.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Pe,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new M(i.x,i.y,i.z||0))}return t}});Object.assign(tn.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});Object.create(It.prototype);Object.create(It.prototype);function wh(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),It.call(this,e),this.type="catmullrom"}wh.prototype=Object.create(It.prototype);Object.assign(wh.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});ds.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};$i.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Zi.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),lh.extractUrlBase(e)}});Object.assign(Bc.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Gn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});ci.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Object.assign(Ce,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Ce.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Ce.ceilPowerOfTwo(e)}});Object.assign(Rt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(Le.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return e===void 0&&(e=new M),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}});kt.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};tt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(Jr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(er.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new cr(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Or(this,e)}});Object.assign(se.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(M.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(qe.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Pe.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")};Object.assign(ve.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}});Object.defineProperties(ve.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.defineProperties(Ga.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Ha.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Object.defineProperty(Se.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});st.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(nt.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(Oe.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}});Object.assign(ye.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}});Object.defineProperties(ye.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(ec.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Fe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new we}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===Lf}}});Object.defineProperties(sn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(qt.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(Hc.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}});Object.defineProperties(Hc.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}});Object.defineProperties(eh.prototype,{cullFace:{get:function(){return this.renderReverseSided?Rf:La},set:function(e){var t=e!==La;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}});Object.defineProperties(Ar.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.assign(Gc.prototype,{getStandingMatrix:function(){console.warn("THREE.WebVRManager: .getStandingMatrix() has been removed.")}});Object.defineProperties(Gc.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}});Ji.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this,n=new vh;return n.load(e,function(r){t.setBuffer(r)}),this};mh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};us.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};const ys=function(e,t){this.object=e,this.domElement=t!==void 0?t:document,this.enabled=!0,this.target=new M,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:Xs.LEFT,ZOOM:Xs.MIDDLE,PAN:Xs.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),o=s.NONE},this.update=function(){var N=new M,ne=new tt().setFromUnitVectors(e.up,new M(0,1,0)),Y=ne.clone().inverse(),fe=new M,ee=new tt;return function(){var j=n.object.position;return N.copy(j).sub(n.target),N.applyQuaternion(ne),u.setFromVector3(N),n.autoRotate&&o===s.NONE&&R(S()),u.theta+=l.theta,u.phi+=l.phi,u.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=f,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),n.target.add(h),N.setFromSpherical(u),N.applyQuaternion(Y),j.copy(n.target).add(N),n.object.lookAt(n.target),n.enableDamping===!0?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor):l.set(0,0,0),f=1,h.set(0,0,0),d||fe.distanceToSquared(n.object.position)>c||8*(1-ee.dot(n.object.quaternion))>c?(n.dispatchEvent(r),fe.copy(n.object.position),ee.copy(n.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",oe,!1),n.domElement.removeEventListener("mousedown",le,!1),n.domElement.removeEventListener("wheel",D,!1),n.domElement.removeEventListener("touchstart",W,!1),n.domElement.removeEventListener("touchend",ie,!1),n.domElement.removeEventListener("touchmove",X,!1),document.removeEventListener("mousemove",ge,!1),document.removeEventListener("mouseup",w,!1),window.removeEventListener("keydown",V,!1)};var n=this,r={type:"change"},i={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},o=s.NONE,c=1e-6,u=new ls,l=new ls,f=1,h=new M,d=!1,p=new se,v=new se,g=new se,m=new se,y=new se,_=new se,x=new se,E=new se,T=new se;function S(){return 2*Math.PI/60/60*n.autoRotateSpeed}function C(){return Math.pow(.95,n.zoomSpeed)}function R(N){l.theta-=N}function F(N){l.phi-=N}var z=function(){var N=new M;return function(Y,fe){N.setFromMatrixColumn(fe,0),N.multiplyScalar(-Y),h.add(N)}}(),q=function(){var N=new M;return function(Y,fe){N.setFromMatrixColumn(fe,1),N.multiplyScalar(Y),h.add(N)}}(),$=function(){var N=new M;return function(Y,fe){var ee=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var O=n.object.position;N.copy(O).sub(n.target);var j=N.length();j*=Math.tan(n.object.fov/2*Math.PI/180),z(2*Y*j/ee.clientHeight,n.object.matrix),q(2*fe*j/ee.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(z(Y*(n.object.right-n.object.left)/n.object.zoom/ee.clientWidth,n.object.matrix),q(fe*(n.object.top-n.object.bottom)/n.object.zoom/ee.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function te(N){n.object.isPerspectiveCamera?f/=N:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*N)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(N){n.object.isPerspectiveCamera?f*=N:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/N)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function A(N){p.set(N.clientX,N.clientY)}function H(N){x.set(N.clientX,N.clientY)}function B(N){m.set(N.clientX,N.clientY)}function Q(N){v.set(N.clientX,N.clientY),g.subVectors(v,p);var ne=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*g.x/ne.clientWidth*n.rotateSpeed),F(2*Math.PI*g.y/ne.clientHeight*n.rotateSpeed),p.copy(v),n.update()}function J(N){E.set(N.clientX,N.clientY),T.subVectors(E,x),T.y>0?te(C()):T.y<0&&L(C()),x.copy(E),n.update()}function Z(N){y.set(N.clientX,N.clientY),_.subVectors(y,m),$(_.x,_.y),m.copy(y),n.update()}function ue(N){N.deltaY<0?L(C()):N.deltaY>0&&te(C()),n.update()}function de(N){switch(N.keyCode){case n.keys.UP:$(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:$(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:$(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:$(-n.keyPanSpeed,0),n.update();break}}function _e(N){p.set(N.touches[0].pageX,N.touches[0].pageY)}function k(N){var ne=N.touches[0].pageX-N.touches[1].pageX,Y=N.touches[0].pageY-N.touches[1].pageY,fe=Math.sqrt(ne*ne+Y*Y);x.set(0,fe)}function I(N){m.set(N.touches[0].pageX,N.touches[0].pageY)}function G(N){v.set(N.touches[0].pageX,N.touches[0].pageY),g.subVectors(v,p);var ne=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*g.x/ne.clientWidth*n.rotateSpeed),F(2*Math.PI*g.y/ne.clientHeight*n.rotateSpeed),p.copy(v),n.update()}function K(N){var ne=N.touches[0].pageX-N.touches[1].pageX,Y=N.touches[0].pageY-N.touches[1].pageY,fe=Math.sqrt(ne*ne+Y*Y);E.set(0,fe),T.subVectors(E,x),T.y>0?L(C()):T.y<0&&te(C()),x.copy(E),n.update()}function xe(N){y.set(N.touches[0].pageX,N.touches[0].pageY),_.subVectors(y,m),$(_.x,_.y),m.copy(y),n.update()}function le(N){if(n.enabled!==!1){switch(N.preventDefault(),N.button){case n.mouseButtons.ORBIT:if(n.enableRotate===!1)return;A(N),o=s.ROTATE;break;case n.mouseButtons.ZOOM:if(n.enableZoom===!1)return;H(N),o=s.DOLLY;break;case n.mouseButtons.PAN:if(n.enablePan===!1)return;B(N),o=s.PAN;break}o!==s.NONE&&(document.addEventListener("mousemove",ge,!1),document.addEventListener("mouseup",w,!1),n.dispatchEvent(i))}}function ge(N){if(n.enabled!==!1)switch(N.preventDefault(),o){case s.ROTATE:if(n.enableRotate===!1)return;Q(N);break;case s.DOLLY:if(n.enableZoom===!1)return;J(N);break;case s.PAN:if(n.enablePan===!1)return;Z(N);break}}function w(N){n.enabled!==!1&&(document.removeEventListener("mousemove",ge,!1),document.removeEventListener("mouseup",w,!1),n.dispatchEvent(a),o=s.NONE)}function D(N){n.enabled===!1||n.enableZoom===!1||o!==s.NONE&&o!==s.ROTATE||(N.preventDefault(),N.stopPropagation(),ue(N),n.dispatchEvent(i),n.dispatchEvent(a))}function V(N){n.enabled===!1||n.enableKeys===!1||n.enablePan===!1||de(N)}function W(N){if(n.enabled!==!1){switch(N.touches.length){case 1:if(n.enableRotate===!1)return;_e(N),o=s.TOUCH_ROTATE;break;case 2:if(n.enableZoom===!1)return;k(N),o=s.TOUCH_DOLLY;break;case 3:if(n.enablePan===!1)return;I(N),o=s.TOUCH_PAN;break;default:o=s.NONE}o!==s.NONE&&n.dispatchEvent(i)}}function X(N){if(n.enabled!==!1)switch(N.preventDefault(),N.stopPropagation(),N.touches.length){case 1:if(n.enableRotate===!1||o!==s.TOUCH_ROTATE)return;G(N);break;case 2:if(n.enableZoom===!1||o!==s.TOUCH_DOLLY)return;K(N);break;case 3:if(n.enablePan===!1||o!==s.TOUCH_PAN)return;xe(N);break;default:o=s.NONE}}function ie(N){n.enabled!==!1&&(n.dispatchEvent(a),o=s.NONE)}function oe(N){n.enabled!==!1&&N.preventDefault()}n.domElement.addEventListener("contextmenu",oe,!1),n.domElement.addEventListener("mousedown",le,!1),n.domElement.addEventListener("wheel",D,!1),n.domElement.addEventListener("touchstart",W,!1),n.domElement.addEventListener("touchend",ie,!1),n.domElement.addEventListener("touchmove",X,!1),window.addEventListener("keydown",V,!1),this.update()};ys.prototype=Object.create(bn.prototype);ys.prototype.constructor=ys;const a_="/projection/assets/world.d886f9be.jpg",s_=new M;class o_{constructor(t,n,r,i,a,s,o){mt(this,"geometry");mt(this,"from");mt(this,"to");mt(this,"duration");mt(this,"camera");mt(this,"cameraFrom");mt(this,"cameraTo");mt(this,"progress");mt(this,"startAt");mt(this,"playing");mt(this,"resetCamera");mt(this,"start",()=>{this.playing=!0,this.startAt=Date.now()});mt(this,"stop",()=>{this.playing=!1});mt(this,"update",()=>{!this.playing||(this.progress=Ce.clamp((Date.now()-this.startAt)/this.duration,0,1),this.geometry.vertices.map((t,n)=>{const r=this.from[n],i=this.to[n];t.lerpVectors(r,i,this.progress)}),this.geometry.verticesNeedUpdate=!0,this.resetCamera&&(this.camera.position.lerpVectors(this.cameraFrom,this.cameraTo,this.progress),this.camera.lookAt(s_)),this.progress===1&&(this.playing=!1))});this.geometry=t,this.from=n,this.to=r,this.duration=i,this.camera=a,this.cameraFrom=s,this.cameraTo=o,this.progress=0,this.startAt=0,this.playing=!1,this.resetCamera=s&&o}}const c_={id:"container"},u_=Ss({__name:"baseEarth",setup(e){let t,n,r,i,a;const s={sphere:[],cylinder:[],plane:[]},o=100;_c(()=>{E()});const c=()=>{const T=window.innerWidth,S=window.innerHeight;n.aspect=T/S,n.updateProjectionMatrix(),r.setSize(T,S)};window.addEventListener("resize",c);const u=()=>{t=new za,r=new Hc({antialias:!0}),r.setSize(innerWidth,innerHeight);const T=document.getElementById("container");T&&T.appendChild(r.domElement),t.background=new we(2568514)},l=()=>{n=new st(30,innerWidth/innerHeight,1,1e4),n.position.set(0,0,1600),n.lookAt(t.position)},f=()=>{i=new ys(n,r.domElement),i.enableDamping=!0,i.dampingFactor=.12,i.rotateSpeed=.2,i.minDistance=1e3,i.maxDistance=2e3},h=()=>{requestAnimationFrame(h),r.render(t,n),n.lookAt(t.position),a&&a.update(),i.update()},d=Dl(),p=()=>{const T=new kc().load(a_),S=new Pt({side:Yr,map:T});d.value=new Gi(o,32,32,-Math.PI/2,Math.PI*2-1e-4,.008,Math.PI-.016);const C=new Mt(d.value,S);s.sphere=d.value.vertices.map(F=>F.clone());const R=new ls;s.cylinder=[],s.plane=[],d.value.vertices.map(F=>{R.setFromVector3(F);const z=Math.PI/2-R.theta,q=Ce.clamp(Math.PI/2-R.phi,-1.483,1.483);s.cylinder.push(new M(o*Math.cos(z),o*Math.log(Math.tan(Math.PI/4+q/2)),o*Math.sin(z))),s.plane.push(new M(-o*z+Math.PI/2*o,o*Math.log(Math.tan(Math.PI/4+q/2)),0))}),t.add(C)},v=[].slice.call(document.querySelectorAll(".steps .step-state")),g=()=>{v.map((T,S)=>{const C=["sphere","cylinder","plane"];T.addEventListener("click",()=>{v.map(R=>R.className=R.className.replace(/ active/,"")),T.className+=" active",m(s[C[S]],1e3)},!1)})},m=(T,S,C)=>{a&&a.stop();const R=d.value.vertices.map(F=>F.clone());a=new o_(d.value,R,T,S,n,n.position.clone(),new M(0,0,1600)),a.start()};let y=window.innerWidth,_=window.innerHeight;const x=T=>{(T.clientX-y/2)/2,(T.clientY-_/2)/2};document.addEventListener("mousemove",x,!1);const E=()=>{u(),l(),f(),h(),p(),g()};return(T,S)=>(Ec(),uf("div",c_))}});const Xc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},l_=Xc(u_,[["__scopeId","data-v-c8980801"]]),f_=Cp('<div id="container" data-v-5b20378e><ul class="steps" data-v-5b20378e><li class="step" data-v-5b20378e><div class="step-state active" data-v-5b20378e><div class="icon sphere" data-v-5b20378e></div></div></li><li class="step" data-v-5b20378e><div class="step-state" data-v-5b20378e><div class="icon cylinder" data-v-5b20378e></div></div></li><li class="step" data-v-5b20378e><div class="step-state plane" data-v-5b20378e><div class="icon plane" data-v-5b20378e></div></div></li></ul></div>',1),h_=Ss({__name:"index",setup(e){return(t,n)=>(Ec(),uf(Ht,null,[f_,wt(l_)],64))}});const d_=Xc(h_,[["__scopeId","data-v-5b20378e"]]),p_=[{path:"/",name:"index",component:d_}],v_=mm({history:Iv("/projection/"),routes:p_});const m_={};function g_(e,t){const n=sp("router-view");return Ec(),Ap(n)}const y_=Xc(m_,[["render",g_]]);hv(y_).use(v_).mount("#app");
